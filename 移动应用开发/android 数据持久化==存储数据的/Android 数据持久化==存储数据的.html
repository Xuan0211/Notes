<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../css/wolai.css"/><title>Android 数据持久化==存储数据的五种方法 - 简书 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="Android 数据持久化==存储数据的五种方法 - 简书" class="main-title"></div></div></header><article><ul class="wolai-block"><li id="SMSXMLjeQTF2qLsukwfW3"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">1、使用<span class="jill"></span>SharedPreferences<span class="jill"></span>存储数据</span></li><li id="6kjAxcNXTvovfqrqWfZFbe"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">2、文件存储数据</span></li><li id="wUFXxXr3HkQFt4apKP31XY"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">3、SQLite<span class="jill"></span>数据库存储数据</span></li><li id="iigMngCSnRDyLXpT4Ev83P"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">4、使用<span class="jill"></span>ContentProvider<span class="jill"></span>存储数据</span></li><li id="afV3ZiwXePMEisSR5Uh8CM"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">5、网络存储数据</span></li></ul><h2 id="bJjaCJDicooy38pMT1wdP2" class="wolai-block"><span class="inline-wrap">第一种： 使用<span class="jill"></span>SharedPreferences<span class="jill"></span>存储数据</span></h2><div id="pCWkRCdz3xuLgPzDiWoCF9" class="wolai-block wolai-text"><div><span class="inline-wrap">适用范围：保存少量的数据，且这些数据的格式非常简单：字符串型、基本类型的值。比如应用程序的各种配置信息（如是否打开音效、是否使用震动效果、小游戏的玩家积分等），解锁口 令密码等</span></div></div><div id="2Y1FyhChGMoW7RSzGfrGx1" class="wolai-block wolai-text"><div><span class="inline-wrap">核心原理：保存基于<span class="jill"></span>XML<span class="jill"></span>文件存储的<span class="jill"></span>key-value<span class="jill"></span>键值对数据，通常用来存储一些简单的配置信息。通过<span class="jill"></span>DDMS<span class="jill"></span>的<span class="jill"></span>File Explorer<span class="jill"></span>面板，展开文件浏览树,很明显<span class="jill"></span>SharedPreferences<span class="jill"></span>数据总是存储在/data/data/&lt;package name&gt;/shared_prefs<span class="jill"></span>目录下。SharedPreferences<span class="jill"></span>对象本身只能获取数据而不支持存储和修改,存储修改是通过<span class="jill"></span>SharedPreferences.edit()获取的内部接口<span class="jill"></span>Editor<span class="jill"></span>对象实现。 SharedPreferences<span class="jill"></span>本身是一 个接口，程序无法直接创建<span class="jill"></span>SharedPreferences<span class="jill"></span>实例，只能通过<span class="jill"></span>Context<span class="jill"></span>提供的<span class="jill"></span>getSharedPreferences(String name, int mode)方法来获取<span class="jill"></span>SharedPreferences<span class="jill"></span>实例，该方法中<span class="jill"></span>name<span class="jill"></span>表示要操作的<span class="jill"></span>xml<span class="jill"></span>文件名，第二个参数具体如下：  
Context.MODE_PRIVATE: 指定该<span class="jill"></span>SharedPreferences<span class="jill"></span>数据只能被本应用程序读、写。</span></div></div><div id="7Jwz6wJ6DCSZMS92hsowhj" class="wolai-block wolai-text"><div><span class="inline-wrap">Context.MODE\_WORLD\_READABLE: 指定该<span class="jill"></span>SharedPreferences<span class="jill"></span>数据能被其他应用程序读，但不能写。</span></div></div><div id="pE8AchqEzPnSHQvEsRrqtr" class="wolai-block wolai-text"><div><span class="inline-wrap">Context.MODE\_WORLD\_WRITEABLE: 指定该<span class="jill"></span>SharedPreferences<span class="jill"></span>数据能被其他应用程序读，写</span></div></div><div id="m6DS4ooho7hvYcNT5vuhaB" class="wolai-block wolai-text"><div><span class="inline-wrap">Editor<span class="jill"></span>有如下主要重要方法：  
SharedPreferences.Editor clear():清空<span class="jill"></span>SharedPreferences<span class="jill"></span>里所有数据 SharedPreferences.Editor putXxx(String key , xxx value): 向<span class="jill"></span>SharedPreferences<span class="jill"></span>存入指定<span class="jill"></span>key<span class="jill"></span>对应的数据，其中<span class="jill"></span>xxx 可以是<span class="jill"></span>boolean,float,int<span class="jill"></span>等各种基本类型据  
SharedPreferences.Editor remove(): 删除<span class="jill"></span>SharedPreferences<span class="jill"></span>中指定<span class="jill"></span>key<span class="jill"></span>对应的数据项  
boolean commit(): 当<span class="jill"></span>Editor<span class="jill"></span>编辑完成后，使用该方法提交修改  
实际案例：运行界面如下:</span></div></div><div id="2aVkr5uV1ZgfCHEmqopd5z" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload-images.jianshu.io/upload_images/11881598-c0176773b09c780e.png" style="width: 269.6px"/></figure></div><div id="degJv73GBUygBP48GJHMhy" class="wolai-block wolai-text"><div><span class="inline-wrap">image.png</span></div></div><div id="x7QLLXNTGj3sBFaV6iw89" class="wolai-block wolai-text"><div><span class="inline-wrap">这里只提供了两个按钮和一个输入文本框，布局简单，故在此不给出界面布局文件了,程序核心代码如下：</span></div></div><code-block id="8FL2o91Gju4KJ3T3uqC1cF" class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">ViewOcl</span> <span class="token keyword">implements</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword">switch</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btnSet<span class="token operator">:</span>
                
                <span class="token class-name">String</span> code <span class="token operator">=</span> txtCode<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                <span class="token class-name">SharedPreferences<span class="token punctuation">.</span>Editor</span> editor <span class="token operator">=</span> <span class="token function">getSharedPreferences</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">,</span> MODE_WORLD_WRITEABLE<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                editor<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                editor<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"口令设置成功"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btnGet<span class="token operator">:</span>
                
                <span class="token class-name">SharedPreferences</span> read <span class="token operator">=</span> <span class="token function">getSharedPreferences</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">,</span> MODE_WORLD_READABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                <span class="token class-name">String</span> value <span class="token operator">=</span> read<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"口令为："</span><span class="token operator">+</span>value<span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                <span class="token keyword">break</span><span class="token punctuation">;</span>
                
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span> </pre></div></code-block><div id="wDRLbsseAD3kqb5XgeZ9bB" class="wolai-block wolai-text"><div><span class="inline-wrap">读写其他应用的<span class="jill"></span>SharedPreferences: 步骤如下</span></div></div><div id="25zcKx1jaeBzUH7wovpHKr" class="wolai-block wolai-text"><div><span class="inline-wrap">1、在创建<span class="jill"></span>SharedPreferences<span class="jill"></span>时，指定<span class="jill"></span>MODE\_WORLD\_READABLE<span class="jill"></span>模式，表明该<span class="jill"></span>SharedPreferences<span class="jill"></span>数据可以被其他程序读取  
2、创建其他应用程序对应的<span class="jill"></span>Context:  
Context pvCount = createPackageContext(&quot;com.tony.app&quot;, Context.CONTEXT\_IGNORE\_SECURITY);这里的<span class="jill"></span>com.tony.app<span class="jill"></span>就是其他程序的包名  
3、使用其他程序的<span class="jill"></span>Context<span class="jill"></span>获取对应的<span class="jill"></span>SharedPreferences  
SharedPreferences read = pvCount.getSharedPreferences(&quot;lock&quot;, Context.MODE\_WORLD\_READABLE);  
4、如果是写入数据，使用<span class="jill"></span>Editor<span class="jill"></span>接口即可，所有其他操作均和前面一致。</span></div></div><div id="srJjhUJsukQE8pyNtikuGF" class="wolai-block wolai-text"><div><span class="inline-wrap">SharedPreferences<span class="jill"></span>对象与<span class="jill"></span>SQLite<span class="jill"></span>数据库相比，免去了创建数据库，创建表，写<span class="jill"></span>SQL<span class="jill"></span>语句等诸多操作，相对而言更加方便，简洁。但是<span class="jill"></span>SharedPreferences<span class="jill"></span>也有其自身缺陷，比如其职能存储<span class="jill"></span>boolean，int，float，long<span class="jill"></span>和<span class="jill"></span>String<span class="jill"></span>五种简单的数据类型，比如其无法进行条件查询等。所以不论<span class="jill"></span>SharedPreferences<span class="jill"></span>的数据存储操作是如何简单，它也只能是存储方式的一种补充，而无法完全替代如<span class="jill"></span>SQLite<span class="jill"></span>数据库这样的其他数据存储方式。</span></div></div><h2 id="bzWEZdTdSDJ2umvfV48jwJ" class="wolai-block"><span class="inline-wrap">第二种： 文件存储数据</span></h2><div id="pAqnMmPSMWVH9waEojV6jr" class="wolai-block wolai-text"><div><span class="inline-wrap">核心原理: Context<span class="jill"></span>提供了两个方法来打开数据文件里的文件<span class="jill"></span>IO<span class="jill"></span>流 FileInputStream openFileInput(String name); FileOutputStream(String name , int mode),这两个方法第一个参数 用于指定文件名，第二个参数指定打开文件的模式。具体有以下值可选：</span></div></div><div id="k4DT7bwwcV8tRHt1UtS67k" class="wolai-block wolai-text"><div><span class="inline-wrap">MODE\_PRIVATE：为默认操作模式，代表该文件是私有数据，只能被应用本身访问，在该模式下，写入的内容会覆盖原文件的内容，如果想把新写入的内容追加到原文件中。可 以使用<span class="jill"></span>Context.MODE\_APPEND</span></div></div><div id="2yMyg3yhxhE4mxhwHwWem1" class="wolai-block wolai-text"><div><span class="inline-wrap">MODE_APPEND：模式会检查文件是否存在，存在就往文件追加内容，否则就创建新文件。</span></div></div><div id="hDs5XdEmPEbaUH9TG8WUuW" class="wolai-block wolai-text"><div><span class="inline-wrap">MODE\_WORLD\_READABLE：表示当前文件可以被其他应用读取；</span></div></div><div id="w6SswdynS9woJFEdRL1Dgw" class="wolai-block wolai-text"><div><span class="inline-wrap">MODE\_WORLD\_WRITEABLE：表示当前文件可以被其他应用写入。</span></div></div><div id="rczrKZRTAZqnTBS6qy3Mgc" class="wolai-block wolai-text"><div><span class="inline-wrap">除此之外，Context<span class="jill"></span>还提供了如下几个重要的方法：</span></div></div><div id="iN6L8hoL9hm7Hdu7Cg5Nr1" class="wolai-block wolai-text"><div><span class="inline-wrap">getDir(String name , int mode):在应用程序的数据文件夹下获取或者创建<span class="jill"></span>name<span class="jill"></span>对应的子目录</span></div></div><div id="8ES5L6JHsgthNC6344Btf2" class="wolai-block wolai-text"><div><span class="inline-wrap">File getFilesDir():获取该应用程序的数据文件夹得绝对路径</span></div></div><div id="moqEjBP5z3TTC6MXferJGq" class="wolai-block wolai-text"><div><span class="inline-wrap">String\[\] fileList():返回该应用数据文件夹的全部文件</span></div></div><div id="cyTHuyVALX8rbcqNgN7B8d" class="wolai-block wolai-text"><div><span class="inline-wrap">实际案例：界面沿用上图</span></div></div><div id="h9Drp4z5HjdjvnqAcvnvny" class="wolai-block wolai-text"><div><span class="inline-wrap">核心代码如下：</span></div></div><code-block id="3dFLjAy9zf4ikM8jfoHBJ4" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token keyword">public</span> <span class="token known-class-name class-name">String</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
            <span class="token maybe-class-name">FileInputStream</span> inStream <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">openFileInput</span><span class="token punctuation">(</span><span class="token string">"message.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            byte<span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            int hasRead <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token maybe-class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>hasRead <span class="token operator">=</span> inStream<span class="token punctuation">.</span><span class="token method function property-access">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                sb<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> hasRead<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            inStream<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword control-flow">return</span> sb<span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 
        <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> msg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
        <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
            
            <span class="token maybe-class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token function">openFileOutput</span><span class="token punctuation">(</span><span class="token string">"message.txt"</span><span class="token punctuation">,</span>
                    <span class="token constant">MODE_APPEND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            fos<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token method function property-access">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            fos<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> </pre></div></code-block><div id="gtv5i5VAsTGnoiodJSmtNr" class="wolai-block wolai-text"><div><span class="inline-wrap">openFileOutput()方法的第一参数用于指定文件名称，不能包含路径分隔符“/” ，如果文件不存在，Android 会自动创建它。创建的文件保存在/data/data/&lt;package name&gt;/files<span class="jill"></span>目录，如： /data/data/cn.tony.app/files/message.txt，</span></div></div><div id="oQ1zAfaVfQSJaasYbKcFjh" class="wolai-block wolai-text"><div><span class="inline-wrap">下面讲解某些特殊文件读写需要注意的地方:</span></div></div><h2 id="5S5tg4ZMHqZaUgkqjHh1K6" class="wolai-block"><span class="inline-wrap">读写<span class="jill"></span>sdcard<span class="jill"></span>上的文件</span></h2><div id="ntQs3qadCYSyjPau3qqi54" class="wolai-block wolai-text"><div><span class="inline-wrap">其中读写步骤按如下进行:</span></div></div><div id="xyPaZ9BeqW6YHQCfkrEyzi" class="wolai-block wolai-text"><div><span class="inline-wrap">1、调用<span class="jill"></span>Environment<span class="jill"></span>的<span class="jill"></span>getExternalStorageState()方法判断手机上是否插了<span class="jill"></span>sd<span class="jill"></span>卡,且应用程序具有读写<span class="jill"></span>SD<span class="jill"></span>卡的权限，如下代码将返回<span class="jill"></span>true</span></div></div><div id="nA93KDpo1HycGYnNroUVFZ" class="wolai-block wolai-text"><div><span class="inline-wrap">Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)</span></div></div><div id="trAXKciL624Kd24g78hjXr" class="wolai-block wolai-text"><div><span class="inline-wrap">2、调用<span class="jill"></span>Environment.getExternalStorageDirectory()方法来获取外部存储器，也就是<span class="jill"></span>SD<span class="jill"></span>卡的目录,或者使用&quot;/mnt/sdcard/&quot;目录</span></div></div><div id="arNWgr6VY8D5cFsztrEPZT" class="wolai-block wolai-text"><div><span class="inline-wrap">3、使用<span class="jill"></span>IO<span class="jill"></span>流操作<span class="jill"></span>SD<span class="jill"></span>卡上的文件</span></div></div><div id="nDR42fSXutTe3fYLa1ZZhL" class="wolai-block wolai-text"><div><span class="inline-wrap">注意点：手机应该已插入<span class="jill"></span>SD<span class="jill"></span>卡，对于模拟器而言，可通过<span class="jill"></span>mksdcard<span class="jill"></span>命令来创建虚拟存储卡</span></div></div><div id="28VxdFxXy6sFZ8L4CWzAKE" class="wolai-block wolai-text"><div><span class="inline-wrap">必须在<span class="jill"></span>AndroidManifest.xml<span class="jill"></span>上配置读写<span class="jill"></span>SD<span class="jill"></span>卡的权限</span></div></div><code-block id="tdSm24feBFMHTJUhp5r9sN" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"android.permission.MOUNT_UNMOUNT_FILESYSTEMS"</span><span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"android.permission.WRITE_EXTERNAL_STORAGE"</span><span class="token operator">/</span><span class="token operator">></span> </pre></div></code-block><div id="4unwCfjnm5QYz1Ld4tQxmU" class="wolai-block wolai-text"><div><span class="inline-wrap">案例代码：</span></div><code-block id="hV5ccX6FLjMZGef5iKQGvT" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Environment</span><span class="token punctuation">.</span><span class="token method function property-access">getExternalStorageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">equals</span><span class="token punctuation">(</span>
               <span class="token maybe-class-name">Environment</span><span class="token punctuation">.</span><span class="token constant">MEDIA_MOUNTED</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
           <span class="token maybe-class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token maybe-class-name">Environment</span><span class="token punctuation">.</span><span class="token method function property-access">getExternalStorageDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                   <span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                   <span class="token operator">+</span> <span class="token maybe-class-name">File</span><span class="token punctuation">.</span><span class="token property-access">separator</span>
                   <span class="token operator">+</span> <span class="token constant">DIR</span>
                   <span class="token operator">+</span> <span class="token maybe-class-name">File</span><span class="token punctuation">.</span><span class="token property-access">separator</span>
                   <span class="token operator">+</span> <span class="token constant">FILENAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
           <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token method function property-access">getParentFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
               file<span class="token punctuation">.</span><span class="token method function property-access">getParentFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
           <span class="token punctuation">}</span>
           <span class="token maybe-class-name">PrintStream</span> out <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span> 
           <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
               out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
               out<span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>
               <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>out <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                   out<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
               <span class="token punctuation">}</span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span> 
           <span class="token maybe-class-name">Toast</span><span class="token punctuation">.</span><span class="token method function property-access">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"保存失败，SD卡不存在！"</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Toast</span><span class="token punctuation">.</span><span class="token constant">LENGTH_LONG</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>

   
   <span class="token keyword">private</span> <span class="token known-class-name class-name">String</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

       <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Environment</span><span class="token punctuation">.</span><span class="token method function property-access">getExternalStorageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">equals</span><span class="token punctuation">(</span>
               <span class="token maybe-class-name">Environment</span><span class="token punctuation">.</span><span class="token constant">MEDIA_MOUNTED</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
           <span class="token maybe-class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token maybe-class-name">Environment</span><span class="token punctuation">.</span><span class="token method function property-access">getExternalStorageDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                   <span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                   <span class="token operator">+</span> <span class="token maybe-class-name">File</span><span class="token punctuation">.</span><span class="token property-access">separator</span>
                   <span class="token operator">+</span> <span class="token constant">DIR</span>
                   <span class="token operator">+</span> <span class="token maybe-class-name">File</span><span class="token punctuation">.</span><span class="token property-access">separator</span>
                   <span class="token operator">+</span> <span class="token constant">FILENAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
           <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token method function property-access">getParentFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
               file<span class="token punctuation">.</span><span class="token method function property-access">getParentFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
           <span class="token punctuation">}</span>
           <span class="token maybe-class-name">Scanner</span> scan <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span> 
           <span class="token maybe-class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
               scan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
               <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>scan<span class="token punctuation">.</span><span class="token method function property-access">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                   sb<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span>scan<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
               <span class="token punctuation">}</span>
               <span class="token keyword control-flow">return</span> sb<span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>
               <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>scan <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                   scan<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
               <span class="token punctuation">}</span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span> 
           <span class="token maybe-class-name">Toast</span><span class="token punctuation">.</span><span class="token method function property-access">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"读取失败，SD卡不存在！"</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Toast</span><span class="token punctuation">.</span><span class="token constant">LENGTH_LONG</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> </pre></div></code-block></div><h2 id="87rc1yntKKz3w5NFNSYMcM" class="wolai-block"><span class="inline-wrap">第三种：SQLite<span class="jill"></span>存储数据</span></h2><div id="i7S7ZeZGyWgAPrfGrMUHEY" class="wolai-block wolai-text"><div><span class="inline-wrap">SQLite<span class="jill"></span>是轻量级嵌入式数据库引擎，它支持 SQL 语言，并且只利用很少的内存就有很好的性能。现在的主流移动设备像<span class="jill"></span>Android、iPhone<span class="jill"></span>等都使用<span class="jill"></span>SQLite<span class="jill"></span>作为复杂数据的存储引擎，在我们为移动设备开发应用程序时，也许就要使用到<span class="jill"></span>SQLite<span class="jill"></span>来存储我们大量的数据，所以我们就需要掌握移动设备上的<span class="jill"></span>SQLite<span class="jill"></span>开发技巧</span></div></div><div id="u5HuSyKohfyYi6tgDpG3NL" class="wolai-block wolai-text"><div><span class="inline-wrap">SQLiteDatabase<span class="jill"></span>类为我们提供了很多种方法，上面的代码中基本上囊括了大部分的数据库操作；对于添加、更新和删除来说，我们都可以使用</span></div></div><div id="bAin7TVHTgcLWHDC8Rh9sQ" class="wolai-block wolai-text"><div><span class="inline-wrap">1 db.executeSQL(String sql);  
2 db.executeSQL(String sql, Object\[\] bindArgs);//sql<span class="jill"></span>语句中使用占位符，然后第二个参数是实际的参数集  
除了统一的形式之外，他们还有各自的操作方法：</span></div></div><div id="dGfB3rUUQbtVGKgwcmBFWD" class="wolai-block wolai-text"><div><span class="inline-wrap">1 db.insert(String table, String nullColumnHack, ContentValues values);  
2 db.update(String table, Contentvalues values, String whereClause, String whereArgs);  
3 db.delete(String table, String whereClause, String whereArgs);  
以上三个方法的第一个参数都是表示要操作的表名；insert<span class="jill"></span>中的第二个参数表示如果插入的数据每一列都为空的话，需要指定此行中某一列的名称，系统将此列设置为<span class="jill"></span>NULL，不至于出现错误；insert<span class="jill"></span>中的第三个参数是<span class="jill"></span>ContentValues<span class="jill"></span>类型的变量，是键值对组成的<span class="jill"></span>Map，key<span class="jill"></span>代表列名，value<span class="jill"></span>代表该列要插入的值；update<span class="jill"></span>的第二个参数也很类似，只不过它是更新该字段<span class="jill"></span>key<span class="jill"></span>为最新的<span class="jill"></span>value<span class="jill"></span>值，第三个参数<span class="jill"></span>whereClause<span class="jill"></span>表示<span class="jill"></span>WHERE<span class="jill"></span>表达式，比如“age &gt; ? and age &lt; ?”等，最后的<span class="jill"></span>whereArgs<span class="jill"></span>参数是占位符的实际参数值；delete<span class="jill"></span>方法的参数也是一样</span></div></div><div id="8JveUsPfigHMEZHv3Hamkd" class="wolai-block wolai-text"><div><span class="inline-wrap">下面给出<span class="jill"></span>demo</span></div></div><div id="52tCea9QMzkp7r73EDJDJQ" class="wolai-block wolai-text"><div><span class="inline-wrap">数据的添加</span></div></div><div id="h4PZHutnd6V2jzRwUDtgRZ" class="wolai-block wolai-text"><div><span class="inline-wrap">1.使用<span class="jill"></span>insert<span class="jill"></span>方法</span></div><code-block id="egheeUCck4ZJkaX3qJHSep" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token maybe-class-name">ContentValues</span> cv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContentValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cv<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span><span class="token string">"you are beautiful"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cv<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"weather"</span><span class="token punctuation">,</span><span class="token string">"sun"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
cv<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"context"</span><span class="token punctuation">,</span><span class="token string">"xxxx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token known-class-name class-name">String</span> publish <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span>
                       <span class="token punctuation">.</span><span class="token method function property-access">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cv<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"publish "</span><span class="token punctuation">,</span>publish<span class="token punctuation">)</span><span class="token punctuation">;</span> 
db<span class="token punctuation">.</span><span class="token method function property-access">insert</span><span class="token punctuation">(</span><span class="token string">"diary"</span><span class="token punctuation">,</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span>cv<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></div></code-block></div><div id="cGMX4rT3H8kRhaFqeYLkTT" class="wolai-block wolai-text"><div><span class="inline-wrap">2.使用<span class="jill"></span>execSQL<span class="jill"></span>方式来实现</span></div></div><div id="bTkEBkwBi4ymxVfavvjKHi" class="wolai-block wolai-text"><div><span class="inline-wrap">String sql = &quot;insert into user(username,password) values (&#39;Jack Johnson&#39;,&#39;iLovePopMuisc&#39;);//插入操作的<span class="jill"></span>SQL<span class="jill"></span>语句  
db.execSQL(sql);//执行<span class="jill"></span>SQL<span class="jill"></span>语句  
数据的删除</span></div></div><div id="96epdsSmXm3uzt5kiLWz4E" class="wolai-block wolai-text"><div><span class="inline-wrap">同样有<span class="jill"></span>2<span class="jill"></span>种方式可以实现</span></div></div><div id="eYEGMWHZkDjBZJvy1XQtrz" class="wolai-block wolai-text"><div><span class="inline-wrap">String whereClause = &quot;username=?&quot;;//删除的条件  
String\[\] whereArgs = {&quot;Jack Johnson&quot;};//删除的条件参数  
db.delete(&quot;user&quot;,whereClause,whereArgs);//执行删除  
使用<span class="jill"></span>execSQL<span class="jill"></span>方式的实现</span></div></div><div id="bkkLngmGmpvaTYteF7aPhz" class="wolai-block wolai-text"><div><span class="inline-wrap">String sql = &quot;delete from user where username=&#39;Jack Johnson&#39;&quot;;//删除操作的<span class="jill"></span>SQL<span class="jill"></span>语句  
db.execSQL(sql);//执行删除操作  
数据修改</span></div></div><div id="mni1s7fZbUwcskr3mrHpV3" class="wolai-block wolai-text"><div><span class="inline-wrap">同上，仍是<span class="jill"></span>2<span class="jill"></span>种方式</span></div></div><div id="5fN3Vu27mCooHJTHrckXBs" class="wolai-block wolai-text"><div><span class="inline-wrap">ContentValues cv = new ContentValues();//实例化<span class="jill"></span>ContentValues  
cv.put(&quot;password&quot;,&quot;iHatePopMusic&quot;);//添加要更改的字段及内容  
String whereClause = &quot;username=?&quot;;//修改条件  
String\[\] whereArgs = {&quot;Jack Johnson&quot;};//修改条件的参数  
db.update(&quot;user&quot;,cv,whereClause,whereArgs);//执行修改  
使用<span class="jill"></span>execSQL<span class="jill"></span>方式的实现</span></div></div><div id="tmCDW6dSz75B62v6LcCNYC" class="wolai-block wolai-text"><div><span class="inline-wrap">String sql = &quot;update user set password = &#39;iHatePopMusic&#39; where username=&#39;Jack Johnson&#39;&quot;;//修改的<span class="jill"></span>SQL<span class="jill"></span>语句  
db.execSQL(sql);//执行修改  
数据查询</span></div></div><div id="u6vyifEF4anebyEdKMu4vS" class="wolai-block wolai-text"><div><span class="inline-wrap">下面来说说查询操作。查询操作相对于上面的几种操作要复杂些，因为我们经常要面对着各种各样的查询条件，所以系统也考虑到这种复杂性，为我们提供了较为丰富的查询形式：</span></div><code-block id="4jf5UAbkNsuhqsAWiDxmMf" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre>db<span class="token punctuation">.</span><span class="token method function property-access">rawQuery</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span> sql<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> selectionArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>  
db<span class="token punctuation">.</span><span class="token method function property-access">query</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span> table<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> selection<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> selectionArgs<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> groupBy<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> having<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> orderBy<span class="token punctuation">)</span><span class="token punctuation">;</span>  
db<span class="token punctuation">.</span><span class="token method function property-access">query</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span> table<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> selection<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> selectionArgs<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> groupBy<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> having<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> orderBy<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> limit<span class="token punctuation">)</span><span class="token punctuation">;</span>  
db<span class="token punctuation">.</span><span class="token method function property-access">query</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span> distinct<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> table<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> selection<span class="token punctuation">,</span> 
<span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> selectionArgs<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> groupBy<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> having<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> orderBy<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> limit<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></div></code-block></div><div id="YtQfrk9cn3WGQ4Vzfcsx5" class="wolai-block wolai-text"><div><span class="inline-wrap">上面几种都是常用的查询方法，第一种最为简单，将所有的<span class="jill"></span>SQL<span class="jill"></span>语句都组织到一个字符串中，使用占位符代替实际参数，selectionArgs<span class="jill"></span>就是占位符实际参数集；</span></div></div><div id="42Widb4m9VscprHS3r8M25" class="wolai-block wolai-text"><div><span class="inline-wrap">各参数说明：  
table：表名称  
colums：表示要查询的列所有名称集  
selection：表示<span class="jill"></span>WHERE<span class="jill"></span>之后的条件语句，可以使用占位符  
selectionArgs：条件语句的参数数组  
groupBy：指定分组的列名  
having：指定分组条件,配合<span class="jill"></span>groupBy<span class="jill"></span>使用  
orderBy：y<span class="jill"></span>指定排序的列名  
limit：指定分页参数  
distinct：指定“true”或“false”表示要不要过滤重复值  
Cursor：返回值，相当于结果集<span class="jill"></span>ResultSet  
最后，他们同时返回一个<span class="jill"></span>Cursor<span class="jill"></span>对象，代表数据集的游标，有点类似于<span class="jill"></span>JavaSE<span class="jill"></span>中的<span class="jill"></span>ResultSet。下面是<span class="jill"></span>Cursor<span class="jill"></span>对象的常用方法：</span></div><code-block id="vQEEwWQLeEDYHRYBRQ7kWE" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token number">1</span> c<span class="token punctuation">.</span><span class="token method function property-access">move</span><span class="token punctuation">(</span>int offset<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token number">2</span> c<span class="token punctuation">.</span><span class="token method function property-access">moveToFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token number">3</span> c<span class="token punctuation">.</span><span class="token method function property-access">moveToLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     
<span class="token number">4</span> c<span class="token punctuation">.</span><span class="token method function property-access">moveToPosition</span><span class="token punctuation">(</span>int position<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token number">5</span> c<span class="token punctuation">.</span><span class="token method function property-access">moveToPrevious</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token number">6</span> c<span class="token punctuation">.</span><span class="token method function property-access">moveToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     
<span class="token number">7</span> c<span class="token punctuation">.</span><span class="token method function property-access">isFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
<span class="token number">8</span> c<span class="token punctuation">.</span><span class="token method function property-access">isLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     
<span class="token number">9</span> c<span class="token punctuation">.</span><span class="token method function property-access">isBeforeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token number">0</span> c<span class="token punctuation">.</span><span class="token method function property-access">isAfterLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token number">1</span> c<span class="token punctuation">.</span><span class="token method function property-access">isNull</span><span class="token punctuation">(</span>int columnIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token number">2</span> c<span class="token punctuation">.</span><span class="token method function property-access">isClosed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       
<span class="token number">3</span> c<span class="token punctuation">.</span><span class="token method function property-access">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       
<span class="token number">4</span> c<span class="token punctuation">.</span><span class="token method function property-access">getPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token number">5</span> c<span class="token punctuation">.</span><span class="token method function property-access">getColumnIndex</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span> columnName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">6</span> c<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span>int columnIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></div></code-block></div><div id="5MMb1yZHshWt8gSXqE1tJn" class="wolai-block wolai-text"><div><span class="inline-wrap">实现代码</span></div></div><code-block id="gTjTUZ5BMYx27pSnBVjQcS" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> params <span class="token operator">=</span>  <span class="token punctuation">{</span><span class="token number">12345</span><span class="token punctuation">,</span><span class="token number">123456</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Cursor</span> cursor <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token method function property-access">query</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span>columns<span class="token punctuation">,</span><span class="token string">"ID=?"</span><span class="token punctuation">,</span>params<span class="token punctuation">,</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token method function property-access">moveToFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>cursor<span class="token punctuation">.</span><span class="token method function property-access">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        cursor<span class="token punctuation">.</span><span class="token method function property-access">move</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token known-class-name class-name">String</span> username <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token method function property-access">getColumnIndex</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token known-class-name class-name">String</span> password <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token method function property-access">getColumnIndex</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> </pre></div></code-block><div id="cM4HUdhxVCwtNGvsuDXbrA" class="wolai-block wolai-text"><div><span class="inline-wrap">通过<span class="jill"></span>rawQuery<span class="jill"></span>实现的带参数查询</span></div></div><code-block id="jTcXZTKrzLdXcRQUfDXNMR" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token maybe-class-name">Cursor</span> result<span class="token operator">=</span>db<span class="token punctuation">.</span><span class="token method function property-access">rawQuery</span><span class="token punctuation">(</span><span class="token string">"SELECT ID, name, inventory FROM mytable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

result<span class="token punctuation">.</span><span class="token method function property-access">moveToFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span><span class="token method function property-access">isAfterLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    int id<span class="token operator">=</span>result<span class="token punctuation">.</span><span class="token method function property-access">getInt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token known-class-name class-name">String</span> name<span class="token operator">=</span>result<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    int inventory<span class="token operator">=</span>result<span class="token punctuation">.</span><span class="token method function property-access">getInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    
    result<span class="token punctuation">.</span><span class="token method function property-access">moveToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 <span class="token punctuation">}</span> 
 result<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></div></code-block><div id="xht6QJta2NTd5qhbxPEdF1" class="wolai-block wolai-text"><div><span class="inline-wrap">在上面的代码示例中，已经用到了这几个常用方法中的一些，关于更多的信息，大家可以参考官方文档中的说明。</span></div></div><div id="aQS7U9wKiroJH9RdV5ibnr" class="wolai-block wolai-text"><div><span class="inline-wrap">最后当我们完成了对数据库的操作后，记得调用<span class="jill"></span>SQLiteDatabase<span class="jill"></span>的<span class="jill"></span>close()方法释放数据库连接，否则容易出现<span class="jill"></span>SQLiteException。</span></div></div><div id="ukPvtm2jddwohQWz3EfV3n" class="wolai-block wolai-text"><div><span class="inline-wrap">上面就是<span class="jill"></span>SQLite<span class="jill"></span>的基本应用，但在实际开发中，为了能够更好的管理和维护数据库，我们会封装一个继承自<span class="jill"></span>SQLiteOpenHelper<span class="jill"></span>类的数据库操作类，然后以这个类为基础，再封装我们的业务逻辑方法。</span></div></div><div id="vvyNtbWVWAn3188F6Hi7Bx" class="wolai-block wolai-text"><div><span class="inline-wrap">这里直接使用案例讲解：下面是案例<span class="jill"></span>demo<span class="jill"></span>的界面</span></div></div><div id="p25Yt1B9XmykR3KEKmyYr1" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload-images.jianshu.io/upload_images/11881598-c3aed388671a2918.png" style="width: 257.6px"/></figure></div><div id="oeYmrbmkeB4APQVUbbNs5B" class="wolai-block wolai-text"><div><span class="inline-wrap">image.png</span></div></div><div id="nNRTDXb3ZWbEeBDg82uoXF" class="wolai-block wolai-text"><div><span class="inline-wrap">SQLiteOpenHelper<span class="jill"></span>类介绍</span></div></div><div id="aNucNfDsfWv4ovxcycFScq" class="wolai-block wolai-text"><div><span class="inline-wrap">SQLiteOpenHelper<span class="jill"></span>是<span class="jill"></span>SQLiteDatabase<span class="jill"></span>的一个帮助类，用来管理数据库的创建和版本的更新。一般是建立一个类继承它，并实现它的<span class="jill"></span>onCreate<span class="jill"></span>和<span class="jill"></span>onUpgrade<span class="jill"></span>方法。</span></div></div><div id="8ZtSVEt6bQm3GamonsTmBx" class="wolai-block wolai-text"><div><span class="inline-wrap">方法名 方法描述  
SQLiteOpenHelper(Context context,String name,SQLiteDatabase.CursorFactory factory,int version)  
构造方法，其中</span></div></div><div id="hHjLAephu9XyVj6Ez8uMAd" class="wolai-block wolai-text"><div><span class="inline-wrap">context 程序上下文环境 即：XXXActivity.this;</span></div></div><div id="qsXCqTuHyUU3kAxpsdRjEL" class="wolai-block wolai-text"><div><span class="inline-wrap">name :数据库名字;</span></div></div><div id="9y7bcLQXgrSYEqK9xbpS5p" class="wolai-block wolai-text"><div><span class="inline-wrap">factory:游标工厂，默认为<span class="jill"></span>null,即为使用默认工厂;</span></div></div><div id="3wYX2haC2HJMfvEeHQXK4o" class="wolai-block wolai-text"><div><span class="inline-wrap">version 数据库版本号</span></div></div><div id="x8yCKtdbtfVffur3DdRTh2" class="wolai-block wolai-text"><div><span class="inline-wrap">onCreate(SQLiteDatabase db) 创建数据库时调用  
onUpgrade(SQLiteDatabase db,int oldVersion , int newVersion) 版本更新时调用  
getReadableDatabase() 创建或打开一个只读数据库  
getWritableDatabase() 创建或打开一个读写数据库  
首先创建数据库类</span></div><code-block id="wTE6vW8McSp1TKyN3vMMhf" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token number">1</span> <span class="token keyword module">import</span> android<span class="token punctuation">.</span><span class="token property-access">content</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Context</span></span><span class="token punctuation">;</span>
<span class="token number">2</span> <span class="token keyword module">import</span> android<span class="token punctuation">.</span><span class="token property-access">database</span><span class="token punctuation">.</span><span class="token property-access">sqlite</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">SQLiteDatabase</span></span><span class="token punctuation">;</span>
<span class="token number">3</span> <span class="token keyword module">import</span> android<span class="token punctuation">.</span><span class="token property-access">database</span><span class="token punctuation">.</span><span class="token property-access">sqlite</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">SQLiteDatabase</span></span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">CursorFactory</span></span><span class="token punctuation">;</span>
<span class="token number">4</span> <span class="token keyword module">import</span> android<span class="token punctuation">.</span><span class="token property-access">database</span><span class="token punctuation">.</span><span class="token property-access">sqlite</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">SQLiteOpenHelper</span></span><span class="token punctuation">;</span>
<span class="token number">5</span> 
<span class="token number">6</span> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SqliteDBHelper</span> <span class="token keyword">extends</span> <span class="token class-name">SQLiteOpenHelper</span> <span class="token punctuation">{</span>
<span class="token number">7</span> 
<span class="token number">8</span>     
<span class="token number">9</span>     <span class="token keyword">private</span> <span class="token keyword">static</span> final <span class="token known-class-name class-name">String</span> <span class="token constant">DATABASE_NAME</span> <span class="token operator">=</span> <span class="token string">"diary_db"</span><span class="token punctuation">;</span>
<span class="token number">0</span>     <span class="token keyword">private</span> <span class="token keyword">static</span> final int <span class="token constant">VERSION</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token number">1</span>     <span class="token keyword">private</span> <span class="token keyword">static</span> final <span class="token known-class-name class-name">String</span> <span class="token constant">TABLE_NAME</span> <span class="token operator">=</span> <span class="token string">"diary"</span><span class="token punctuation">;</span>
<span class="token number">2</span> 
<span class="token number">3</span>     
<span class="token number">4</span>     <span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">SqliteDBHelper</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">Context</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">5</span>         <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token constant">DATABASE_NAME</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token constant">VERSION</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">6</span>     <span class="token punctuation">}</span>
<span class="token number">7</span> 
<span class="token number">8</span>     
<span class="token number">4</span>     <span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">SqliteDBHelper</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">Context</span> context<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> name<span class="token punctuation">,</span> <span class="token maybe-class-name">CursorFactory</span> factory<span class="token punctuation">,</span>
<span class="token number">5</span>             int version</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">6</span>         <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> name<span class="token punctuation">,</span> factory<span class="token punctuation">,</span> version<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">7</span>     <span class="token punctuation">}</span>
<span class="token number">8</span>     
<span class="token number">9</span>     @<span class="token maybe-class-name">Override</span>
<span class="token number">0</span>     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">SQLiteDatabase</span> db</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">1</span>         
<span class="token number">2</span>         <span class="token known-class-name class-name">String</span> strSQL <span class="token operator">=</span> <span class="token string">"create table "</span>
<span class="token number">3</span>                 <span class="token operator">+</span> <span class="token constant">TABLE_NAME</span>
<span class="token number">4</span>                 <span class="token operator">+</span> <span class="token string">"(tid integer primary key autoincrement,title varchar(20),weather varchar(10),context text,publish date)"</span><span class="token punctuation">;</span>
<span class="token number">5</span>         
<span class="token number">6</span>         db<span class="token punctuation">.</span><span class="token method function property-access">execSQL</span><span class="token punctuation">(</span>strSQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">7</span>     <span class="token punctuation">}</span>
<span class="token number">8</span>     
<span class="token number">9</span>     @<span class="token maybe-class-name">Override</span>
<span class="token number">0</span>     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onUpgrade</span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">SQLiteDatabase</span> arg0<span class="token punctuation">,</span> int arg1<span class="token punctuation">,</span> int arg2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">1</span> 
<span class="token number">2</span>     <span class="token punctuation">}</span>
<span class="token number">3</span> <span class="token punctuation">}</span> </pre></div></code-block></div><div id="fvpadqt5sR3YdKkoqLyoGF" class="wolai-block wolai-text"><div><span class="inline-wrap">正如上面所述，数据库第一次创建时<span class="jill"></span>onCreate<span class="jill"></span>方法会被调用，我们可以执行创建表的语句，当系统发现版本变化之后，会调用<span class="jill"></span>onUpgrade<span class="jill"></span>方法，我们可以执行修改表结构等语句。</span></div></div><div id="52mA9hRjrg3MGU7htDPijz" class="wolai-block wolai-text"><div><span class="inline-wrap">我们需要一个<span class="jill"></span>Dao，来封装我们所有的业务方法，代码如下：</span></div></div><code-block id="hBdAY9oQFDPSC87DoqG6LH" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token number">1</span> <span class="token keyword module">import</span> android<span class="token punctuation">.</span><span class="token property-access">content</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Context</span></span><span class="token punctuation">;</span>
 <span class="token number">2</span> <span class="token keyword module">import</span> android<span class="token punctuation">.</span><span class="token property-access">database</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Cursor</span></span><span class="token punctuation">;</span>
 <span class="token number">3</span> <span class="token keyword module">import</span> android<span class="token punctuation">.</span><span class="token property-access">database</span><span class="token punctuation">.</span><span class="token property-access">sqlite</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">SQLiteDatabase</span></span><span class="token punctuation">;</span>
 <span class="token number">4</span> 
 <span class="token number">5</span> <span class="token keyword module">import</span> com<span class="token punctuation">.</span><span class="token property-access">chinasoft</span><span class="token punctuation">.</span><span class="token property-access">dbhelper</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">SqliteDBHelper</span></span><span class="token punctuation">;</span>
 <span class="token number">6</span> 
 <span class="token number">7</span> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiaryDao</span> <span class="token punctuation">{</span>
 <span class="token number">8</span> 
 <span class="token number">9</span>     <span class="token keyword">private</span> <span class="token maybe-class-name">SqliteDBHelper</span> sqliteDBHelper<span class="token punctuation">;</span>
<span class="token number">10</span>     <span class="token keyword">private</span> <span class="token maybe-class-name">SQLiteDatabase</span> db<span class="token punctuation">;</span>
<span class="token number">11</span> 
<span class="token number">12</span>     
<span class="token number">13</span>     <span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">DiaryDao</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">Context</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">14</span>         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">sqliteDBHelper</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqliteDBHelper</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">15</span>         db <span class="token operator">=</span> sqliteDBHelper<span class="token punctuation">.</span><span class="token method function property-access">getWritableDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">16</span>     <span class="token punctuation">}</span>
<span class="token number">17</span> 
<span class="token number">18</span>     
<span class="token number">19</span>     <span class="token keyword">public</span> <span class="token known-class-name class-name">String</span> <span class="token function">execQuery</span><span class="token punctuation">(</span><span class="token parameter">final <span class="token known-class-name class-name">String</span> strSQL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">20</span>         <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token number">21</span>             <span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"strSQL>"</span> <span class="token operator">+</span> strSQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">22</span>             
<span class="token number">23</span>             <span class="token maybe-class-name">Cursor</span> cursor <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token method function property-access">rawQuery</span><span class="token punctuation">(</span>strSQL<span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">24</span>             
<span class="token number">25</span>             cursor<span class="token punctuation">.</span><span class="token method function property-access">moveToFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">26</span>             
<span class="token number">27</span>             <span class="token maybe-class-name">StringBuffer</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">28</span>             
<span class="token number">29</span>             <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>cursor<span class="token punctuation">.</span><span class="token method function property-access">isAfterLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">30</span>                 sb<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token method function property-access">getInt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> cursor<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span>
<span class="token number">31</span>                         <span class="token operator">+</span> cursor<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> cursor<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span>
<span class="token number">32</span>                         <span class="token operator">+</span> cursor<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"#"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">33</span>                 
<span class="token number">34</span>                 cursor<span class="token punctuation">.</span><span class="token method function property-access">moveToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">35</span>             <span class="token punctuation">}</span>
<span class="token number">36</span>             db<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">37</span>             <span class="token keyword control-flow">return</span> sb<span class="token punctuation">.</span><span class="token method function property-access">deleteCharAt</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token method function property-access">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">38</span>         <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">RuntimeException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">39</span>             e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">40</span>             <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token number">41</span>         <span class="token punctuation">}</span>
<span class="token number">42</span> 
<span class="token number">43</span>     <span class="token punctuation">}</span>
<span class="token number">44</span> 
<span class="token number">45</span>     
<span class="token number">46</span>     <span class="token keyword">public</span> boolean <span class="token function">execOther</span><span class="token punctuation">(</span><span class="token parameter">final <span class="token known-class-name class-name">String</span> strSQL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">47</span>         db<span class="token punctuation">.</span><span class="token method function property-access">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token number">48</span>         <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token number">49</span>             <span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"strSQL"</span> <span class="token operator">+</span> strSQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">50</span>             db<span class="token punctuation">.</span><span class="token method function property-access">execSQL</span><span class="token punctuation">(</span>strSQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">51</span>             db<span class="token punctuation">.</span><span class="token method function property-access">setTransactionSuccessful</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token number">52</span>             db<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">53</span>             <span class="token keyword control-flow">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token number">54</span>         <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">RuntimeException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">55</span>             e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">56</span>             <span class="token keyword control-flow">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token number">57</span>         <span class="token punctuation">}</span><span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>  
<span class="token number">58</span>             db<span class="token punctuation">.</span><span class="token method function property-access">endTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token number">59</span>         <span class="token punctuation">}</span>  
<span class="token number">60</span> 
<span class="token number">61</span>     <span class="token punctuation">}</span>
<span class="token number">62</span> <span class="token punctuation">}</span> </pre></div></code-block><div id="uhG4q49VQTfpjEz8aVkD2T" class="wolai-block wolai-text"><div><span class="inline-wrap">我们在<span class="jill"></span>Dao<span class="jill"></span>构造方法中实例化<span class="jill"></span>sqliteDBHelper<span class="jill"></span>并获取一个<span class="jill"></span>SQLiteDatabase<span class="jill"></span>对象，作为整个应用的数据库实例；在增删改信息时，我们采用了事务处理，确保数据完整性；最后要注意释放数据库资源<span class="jill"></span>db.close()，这一个步骤在我们整个应用关闭时执行，这个环节容易被忘记，所以朋友们要注意。</span></div></div><div id="8pCEXDU1jNsSeW5jW2dgow" class="wolai-block wolai-text"><div><span class="inline-wrap">我们获取数据库实例时使用了<span class="jill"></span>getWritableDatabase()方法，也许朋友们会有疑问，在<span class="jill"></span>getWritableDatabase()和<span class="jill"></span>getReadableDatabase()中，你为什么选择前者作为整个应用的数据库实例呢？在这里我想和大家着重分析一下这一点。</span></div></div><div id="sghLfDmMQUJCzu9mQkdAgm" class="wolai-block wolai-text"><div><span class="inline-wrap">我们来看一下<span class="jill"></span>SQLiteOpenHelper<span class="jill"></span>中的<span class="jill"></span>getReadableDatabase()方法：</span></div><code-block id="ufxiYSFnw3rPX137eN3jLz" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token number">1</span> <span class="token keyword">public</span> synchronized <span class="token maybe-class-name">SQLiteDatabase</span> <span class="token function">getReadableDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
<span class="token number">2</span>     <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>mDatabase <span class="token operator">!=</span> <span class="token keyword null nil">null</span> <span class="token operator">&amp;&amp;</span> mDatabase<span class="token punctuation">.</span><span class="token method function property-access">isOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
<span class="token number">3</span>         
<span class="token number">4</span>         <span class="token keyword control-flow">return</span> mDatabase<span class="token punctuation">;</span>  
<span class="token number">5</span>     <span class="token punctuation">}</span>  
<span class="token number">6</span>   
<span class="token number">7</span>     <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>mIsInitializing<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
<span class="token number">8</span>         
<span class="token number">9</span>         <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">"getReadableDatabase called recursively"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token number">0</span>     <span class="token punctuation">}</span>  
<span class="token number">1</span>   
<span class="token number">2</span>     
<span class="token number">3</span>   
<span class="token number">4</span>     <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>  
<span class="token number">5</span>         
<span class="token number">6</span>         <span class="token keyword control-flow">return</span> <span class="token function">getWritableDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token number">7</span>     <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">SQLiteException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
<span class="token number">8</span>         <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>mName <span class="token operator">==</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span>  
<span class="token number">9</span>             <span class="token keyword control-flow">throw</span> e<span class="token punctuation">;</span> 
<span class="token number">0</span>         <span class="token maybe-class-name">Log</span><span class="token punctuation">.</span><span class="token method function property-access">e</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">"Couldn't open "</span> <span class="token operator">+</span> mName <span class="token operator">+</span> <span class="token string">" for writing (will try read-only):"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token number">1</span>     <span class="token punctuation">}</span>  
<span class="token number">2</span>   
<span class="token number">3</span>     
<span class="token number">4</span>   
<span class="token number">5</span>     <span class="token maybe-class-name">SQLiteDatabase</span> db <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>  
<span class="token number">6</span>     <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>  
<span class="token number">7</span>         mIsInitializing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  
<span class="token number">8</span>         <span class="token known-class-name class-name">String</span> path <span class="token operator">=</span> mContext<span class="token punctuation">.</span><span class="token method function property-access">getDatabasePath</span><span class="token punctuation">(</span>mName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">9</span>         
<span class="token number">0</span>         db <span class="token operator">=</span> <span class="token maybe-class-name">SQLiteDatabase</span><span class="token punctuation">.</span><span class="token method function property-access">openDatabase</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> mFactory<span class="token punctuation">,</span> <span class="token maybe-class-name">SQLiteDatabase</span><span class="token punctuation">.</span><span class="token constant">OPEN_READONLY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token number">1</span>         <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>db<span class="token punctuation">.</span><span class="token method function property-access">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> mNewVersion<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
<span class="token number">2</span>             <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">SQLiteException</span><span class="token punctuation">(</span><span class="token string">"Can't upgrade read-only database from version "</span> <span class="token operator">+</span> db<span class="token punctuation">.</span><span class="token method function property-access">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" to "</span>  
<span class="token number">3</span>                     <span class="token operator">+</span> mNewVersion <span class="token operator">+</span> <span class="token string">": "</span> <span class="token operator">+</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token number">4</span>         <span class="token punctuation">}</span>  
<span class="token number">5</span>   
<span class="token number">6</span>         <span class="token function">onOpen</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token number">7</span>         <span class="token maybe-class-name">Log</span><span class="token punctuation">.</span><span class="token method function property-access">w</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">"Opened "</span> <span class="token operator">+</span> mName <span class="token operator">+</span> <span class="token string">" in read-only mode"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token number">8</span>         mDatabase <span class="token operator">=</span> db<span class="token punctuation">;</span>
<span class="token number">9</span>         <span class="token keyword control-flow">return</span> mDatabase<span class="token punctuation">;</span>
<span class="token number">0</span>     <span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>  
<span class="token number">1</span>         mIsInitializing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  
<span class="token number">2</span>         <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>db <span class="token operator">!=</span> <span class="token keyword null nil">null</span> <span class="token operator">&amp;&amp;</span> db <span class="token operator">!=</span> mDatabase<span class="token punctuation">)</span>  
<span class="token number">3</span>             db<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token number">4</span>     <span class="token punctuation">}</span>  
<span class="token number">5</span> <span class="token punctuation">}</span> </pre></div></code-block></div><div id="9GV1qtfXjHhaeMsdhr9aPz" class="wolai-block wolai-text"><div><span class="inline-wrap">在<span class="jill"></span>getReadableDatabase()方法中，首先判断是否已存在数据库实例并且是打开状态，如果是，则直接返回该实例，否则试图获取一个可读写模式的数据库实例，如果遇到磁盘空间已满等情况获取失败的话，再以只读模式打开数据库，获取数据库实例并返回，然后为<span class="jill"></span>mDatabase<span class="jill"></span>赋值为最新打开的数据库实例。既然有可能调用到<span class="jill"></span>getWritableDatabase()方法，我们就要看一下了：</span></div></div><code-block id="sRxwFzGXhQChkFrLLqp12p" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token keyword">public</span> synchronized <span class="token maybe-class-name">SQLiteDatabase</span> <span class="token function">getWritableDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>mDatabase <span class="token operator">!=</span> <span class="token keyword null nil">null</span> <span class="token operator">&amp;&amp;</span> mDatabase<span class="token punctuation">.</span><span class="token method function property-access">isOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>mDatabase<span class="token punctuation">.</span><span class="token method function property-access">isReadOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        
        <span class="token keyword control-flow">return</span> mDatabase<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>mIsInitializing<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">"getWritableDatabase called recursively"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  
    
    
    
    
    
  
    boolean success <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  
    <span class="token maybe-class-name">SQLiteDatabase</span> db <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>  
    
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>mDatabase <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span>  
        mDatabase<span class="token punctuation">.</span><span class="token method function property-access">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>  
        mIsInitializing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>mName <span class="token operator">==</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            db <span class="token operator">=</span> <span class="token maybe-class-name">SQLiteDatabase</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>  
            
            db <span class="token operator">=</span> mContext<span class="token punctuation">.</span><span class="token method function property-access">openOrCreateDatabase</span><span class="token punctuation">(</span>mName<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> mFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
        
        int version <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token method function property-access">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>version <span class="token operator">!=</span> mNewVersion<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            db<span class="token punctuation">.</span><span class="token method function property-access">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>  
                <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>version <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
                    
                    <span class="token function">onCreate</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span>  
                <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>  
                    
                    <span class="token function">onUpgrade</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> version<span class="token punctuation">,</span> mNewVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>  
                <span class="token punctuation">}</span>  
                db<span class="token punctuation">.</span><span class="token method function property-access">setVersion</span><span class="token punctuation">(</span>mNewVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>
                db<span class="token punctuation">.</span><span class="token method function property-access">setTransactionSuccessful</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>  
                db<span class="token punctuation">.</span><span class="token method function property-access">endTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>  
        <span class="token punctuation">}</span>  
  
        <span class="token function">onOpen</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        success <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  
        <span class="token keyword control-flow">return</span> db<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>  
        mIsInitializing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            
            <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>mDatabase <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
                
                <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>  
                    mDatabase<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
                <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
                <span class="token punctuation">}</span>  
                mDatabase<span class="token punctuation">.</span><span class="token method function property-access">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>  
            mDatabase <span class="token operator">=</span> db<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>  
            
            <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>mDatabase <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span>  
                mDatabase<span class="token punctuation">.</span><span class="token method function property-access">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>db <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span>  
                db<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span> </pre></div></code-block><div id="wrGUfnrqsc9F1aofjtjzch" class="wolai-block wolai-text"><div><span class="inline-wrap">大家可以看到，几个关键步骤是，首先判断<span class="jill"></span>mDatabase<span class="jill"></span>如果不为空已打开并不是只读模式则直接返回，否则如果<span class="jill"></span>mDatabase<span class="jill"></span>不为空则加锁，然后开始打开或创建数据库，比较版本，根据版本号来调用相应的方法，为数据库设置新版本号，最后释放旧的不为空的<span class="jill"></span>mDatabase<span class="jill"></span>并解锁，把新打开的数据库实例赋予<span class="jill"></span>mDatabase，并返回最新实例。</span></div></div><div id="wMQ2nDMs4NTp9mrcWw6odQ" class="wolai-block wolai-text"><div><span class="inline-wrap">看完上面的过程之后，大家或许就清楚了许多，如果不是在遇到磁盘空间已满等情况，getReadableDatabase()一般都会返回和<span class="jill"></span>getWritableDatabase()一样的数据库实例，所以我们在<span class="jill"></span>DBManager<span class="jill"></span>构造方法中使用<span class="jill"></span>getWritableDatabase()获取整个应用所使用的数据库实例是可行的。当然如果你真的担心这种情况会发生，那么你可以先用<span class="jill"></span>getWritableDatabase()获取数据实例，如果遇到异常，再试图用<span class="jill"></span>getReadableDatabase()获取实例，当然这个时候你获取的实例只能读不能写了</span></div></div><div id="8zPs2eMTwG11duj2FZ56fE" class="wolai-block wolai-text"><div><span class="inline-wrap">最后，让我们看一下如何使用这些数据操作方法来显示数据,界面核心逻辑代码:</span></div></div><code-block id="n49sRazFK1oRvAJbCEEnY2" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SQLiteActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token maybe-class-name">DiaryDao</span> diaryDao<span class="token punctuation">;</span>

    
    
    @<span class="token maybe-class-name">Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">Bundle</span> savedInstanceState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        diaryDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DiaryDao</span><span class="token punctuation">(</span><span class="token maybe-class-name">SQLiteActivity</span><span class="token punctuation">.</span><span class="token property-access">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">ViewOcl</span> <span class="token keyword">implements</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span> <span class="token punctuation">{</span>

        @<span class="token maybe-class-name">Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">View</span> v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token known-class-name class-name">String</span> strSQL<span class="token punctuation">;</span>
            boolean flag<span class="token punctuation">;</span>
            <span class="token known-class-name class-name">String</span> message<span class="token punctuation">;</span>
            <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token method function property-access">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token constant">R</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">.</span><span class="token property-access">btnAdd</span><span class="token operator">:</span>
                <span class="token known-class-name class-name">String</span> title <span class="token operator">=</span> txtTitle<span class="token punctuation">.</span><span class="token method function property-access">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token known-class-name class-name">String</span> weather <span class="token operator">=</span> txtWeather<span class="token punctuation">.</span><span class="token method function property-access">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token known-class-name class-name">String</span> context <span class="token operator">=</span> txtContext<span class="token punctuation">.</span><span class="token method function property-access">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token known-class-name class-name">String</span> publish <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token method function property-access">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                strSQL <span class="token operator">=</span> <span class="token string">"insert into diary values(null,'"</span> <span class="token operator">+</span> title <span class="token operator">+</span> <span class="token string">"','"</span>
                        <span class="token operator">+</span> weather <span class="token operator">+</span> <span class="token string">"','"</span> <span class="token operator">+</span> context <span class="token operator">+</span> <span class="token string">"','"</span> <span class="token operator">+</span> publish <span class="token operator">+</span> <span class="token string">"')"</span><span class="token punctuation">;</span>
                flag <span class="token operator">=</span> diaryDao<span class="token punctuation">.</span><span class="token method function property-access">execOther</span><span class="token punctuation">(</span>strSQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                message <span class="token operator">=</span> flag<span class="token operator">?</span><span class="token string">"添加成功"</span><span class="token operator">:</span><span class="token string">"添加失败"</span><span class="token punctuation">;</span>
                <span class="token maybe-class-name">Toast</span><span class="token punctuation">.</span><span class="token method function property-access">makeText</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> message<span class="token punctuation">,</span> <span class="token maybe-class-name">Toast</span><span class="token punctuation">.</span><span class="token constant">LENGTH_LONG</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">R</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">.</span><span class="token property-access">btnDelete</span><span class="token operator">:</span>
                strSQL <span class="token operator">=</span> <span class="token string">"delete from diary where tid = 1"</span><span class="token punctuation">;</span>
                flag <span class="token operator">=</span> diaryDao<span class="token punctuation">.</span><span class="token method function property-access">execOther</span><span class="token punctuation">(</span>strSQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                message <span class="token operator">=</span> flag<span class="token operator">?</span><span class="token string">"删除成功"</span><span class="token operator">:</span><span class="token string">"删除失败"</span><span class="token punctuation">;</span>
                <span class="token maybe-class-name">Toast</span><span class="token punctuation">.</span><span class="token method function property-access">makeText</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> message<span class="token punctuation">,</span> <span class="token maybe-class-name">Toast</span><span class="token punctuation">.</span><span class="token constant">LENGTH_LONG</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">R</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">.</span><span class="token property-access">btnQuery</span><span class="token operator">:</span>
                strSQL <span class="token operator">=</span> <span class="token string">"select * from diary order by publish desc"</span><span class="token punctuation">;</span>
                <span class="token known-class-name class-name">String</span> data <span class="token operator">=</span> diaryDao<span class="token punctuation">.</span><span class="token method function property-access">execQuery</span><span class="token punctuation">(</span>strSQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token maybe-class-name">Toast</span><span class="token punctuation">.</span><span class="token method function property-access">makeText</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token maybe-class-name">Toast</span><span class="token punctuation">.</span><span class="token constant">LENGTH_LONG</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">R</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">.</span><span class="token property-access">btnUpdate</span><span class="token operator">:</span>
                strSQL <span class="token operator">=</span> <span class="token string">"update diary set title = '测试标题1-1' where tid = 1"</span><span class="token punctuation">;</span>
                flag <span class="token operator">=</span> diaryDao<span class="token punctuation">.</span><span class="token method function property-access">execOther</span><span class="token punctuation">(</span>strSQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                message <span class="token operator">=</span> flag<span class="token operator">?</span><span class="token string">"更新成功"</span><span class="token operator">:</span><span class="token string">"更新失败"</span><span class="token punctuation">;</span>
                <span class="token maybe-class-name">Toast</span><span class="token punctuation">.</span><span class="token method function property-access">makeText</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> message<span class="token punctuation">,</span> <span class="token maybe-class-name">Toast</span><span class="token punctuation">.</span><span class="token constant">LENGTH_LONG</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token maybe-class-name">SqliteDBHelper</span> sqliteDBHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqliteDBHelper</span><span class="token punctuation">(</span><span class="token maybe-class-name">SQLiteActivity</span><span class="token punctuation">.</span><span class="token property-access">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sqliteDBHelper<span class="token punctuation">.</span><span class="token method function property-access">getWritableDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"数据库创建成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> </pre></div></code-block><div id="511f2VJHwVzjPbBBFj5pbP" class="wolai-block wolai-text"><div><span class="inline-wrap">Android sqlite3<span class="jill"></span>数据库管理工具</span></div></div><div id="d4uiK9673S9PV6FPkBLngD" class="wolai-block wolai-text"><div><span class="inline-wrap">Android SDK<span class="jill"></span>的<span class="jill"></span>tools<span class="jill"></span>目录下提供了一个<span class="jill"></span>sqlite3.exe<span class="jill"></span>工具，这是一个简单的<span class="jill"></span>sqlite<span class="jill"></span>数据库管理工具。开发者可以方便的使用其对<span class="jill"></span>sqlite<span class="jill"></span>数据库进行命令行的操作。</span></div></div><div id="8gP99svzCFa2Dj8cfGK9hH" class="wolai-block wolai-text"><div><span class="inline-wrap">程序运行生成的_.db<span class="jill"></span>文件一般位于&quot;/data/data/项目名(包括所处包名)/databases/_.db&quot;，因此要对数据库文件进行操作需要先找到数据库文件：</span></div></div><div id="sLjJqwxmT5JD2dQT7396KG" class="wolai-block wolai-text"><div><span class="inline-wrap">1、进入<span class="jill"></span>shell 命令</span></div></div><code-block id="wbg6YcoKWUyk76SVfGD7UZ" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">"font-family: "</span>courier <span class="token keyword">new</span><span class="token string">", courier; font-size: 14px;"</span><span class="token operator">></span>adb shell<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span> </pre></div></code-block><div id="cTgcJB9jDWeFhem8vpEtMC" class="wolai-block wolai-text"><div><span class="inline-wrap">2、找到数据库文件</span></div></div><code-block id="5FoKwAPV99gZYD5xXDkz57" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">"font-family: "</span>courier <span class="token keyword">new</span><span class="token string">", courier; font-size: 14px;"</span><span class="token operator">></span>#cd data<span class="token operator">/</span>data
#ls                <span class="token operator">--</span>列出所有项目
#cd project_name   <span class="token operator">--</span>进入所需项目名
#cd databases 
#ls                <span class="token operator">--</span>列出现寸的数据库文件<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span> </pre></div></code-block><div id="8rdmLe5aXU64HVPnK3swMR" class="wolai-block wolai-text"><div><span class="inline-wrap">3、进入数据库</span></div></div><code-block id="osw4vQs9okp7kYvr18EYaQ" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">"font-family: "</span>courier <span class="token keyword">new</span><span class="token string">", courier; font-size: 14px;"</span><span class="token operator">></span>#sqlite3 test_db   <span class="token operator">--</span>进入所需数据库<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span> </pre></div></code-block><div id="ba8ouVHi81GYgkkD9tVfrE" class="wolai-block wolai-text"><div><span class="inline-wrap">会出现类似如下字样：</span></div></div><code-block id="wmWzYGcaz3GWBFtuW9AzvR" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">"font-family: "</span>courier <span class="token keyword">new</span><span class="token string">", courier; font-size: 14px;"</span><span class="token operator">></span><span class="token maybe-class-name">SQLite</span> version <span class="token number">3.6</span><span class="token number">.22</span>
<span class="token maybe-class-name">Enter</span> <span class="token string">".help"</span> <span class="token keyword control-flow">for</span> instructions
<span class="token maybe-class-name">Enter</span> <span class="token constant">SQL</span> statements terminated <span class="token keyword">with</span> a <span class="token string">";"</span>
sqlite<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span> </pre></div></code-block><div id="4N1hggKnprnUACJdQM4X3w" class="wolai-block wolai-text"><div><span class="inline-wrap">至此，可对数据库进行<span class="jill"></span>sql<span class="jill"></span>操作。</span></div></div><div id="rPhuN2gWsQvfZNLEvB8drW" class="wolai-block wolai-text"><div><span class="inline-wrap">4、sqlite<span class="jill"></span>常用命令</span></div></div><code-block id="tmppVR7KqcEfkUh3UovXUt" class="wolai-block"><div class="wolai-pre"><div data-lang="" class="marker"></div><pre><span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">"font-family: "</span>courier <span class="token keyword">new</span><span class="token string">", courier; font-size: 14px;"</span><span class="token operator">>></span><span class="token punctuation">.</span><span class="token property-access">databases</span>        <span class="token operator">--</span>产看当前数据库
<span class="token operator">></span><span class="token punctuation">.</span><span class="token property-access">tables</span>           <span class="token operator">--</span>查看当前数据库中的表
<span class="token operator">></span><span class="token punctuation">.</span><span class="token property-access">help</span>             <span class="token operator">--</span>sqlite3帮助
<span class="token operator">></span><span class="token punctuation">.</span><span class="token property-access">schema</span>            <span class="token operator">--</span>各个表的生成语句<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span> </pre></div></code-block><div id="MhW8o1Mc3PmDTkMXhFPSC" class="wolai-block wolai-text"><div><span class="inline-wrap">更多精彩内容，就在简书<span class="jill"></span>APP</span></div></div><div id="45GpfwsN5kWL6EKpEVMFp1" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/images/js-qrc.png" style="width: 160.8px"/></figure></div><div id="2URCsXGzLDbsE9ck6ERMw7" class="wolai-block wolai-text"><div><span class="inline-wrap">&quot;关注<span class="jill"></span>Gy<span class="jill"></span>不迷路，Gy<span class="jill"></span>带你上高速&quot;</span></div></div><div id="aSKhAeH1gFexfTcbZVnz29" class="wolai-block wolai-text"><div><span class="inline-wrap">还没有人赞赏，支持一下</span></div></div><div id="f5xs2ZrqoCVj3MLbUggKw5" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div><div id="2veJTkMc3Nsr83dKQy9vea" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/users/upload_avatars/11881598/2dcc2078-8c04-4b9c-b42a-77274ee0aa6f.jpg?imageMogr2/auto-orient/strip%7CimageView2/1/w/100/h/100/format/webp" style="width: 662.4px"/></figure></div><div id="rag77xbdiLizMjKCT4kLMe" class="wolai-block wolai-text"><div><span class="inline-wrap">](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/d3ea85affa40"><span>https://www.jianshu.com/u/d3ea85affa40</span></a></span><span class="inline-wrap">)</span></div></div><div id="4b73wSGUQ1HggdtQn8KijS" class="wolai-block wolai-text"><div><span class="inline-wrap"><a href="https://www.jianshu.com/u/d3ea85affa40"><span>嘤嘤嘤<span class="jill"></span>999</span></a></span><span class="inline-wrap">知之者不如好之者，好之者不如乐之者
GitHub：
&lt;a href=&quot;https:...</span></div></div><div id="rdkydkw3MRmaS1E9Sp6VTx" class="wolai-block wolai-text"><div><span class="inline-wrap">总资产<span class="jill"></span>43<span class="jill"></span>共写了<span class="jill"></span>14.2W<span class="jill"></span>字获得<span class="jill"></span>1,230<span class="jill"></span>个赞共<span class="jill"></span>542<span class="jill"></span>个粉丝</span></div></div><ul class="wolai-block"><li id="uAbB5qQJv9e8PWEpDxXW9L"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">正文 梦。 满是杀戮的梦，血腥，悲惨。 她在这梦境中大汗淋漓地惊醒，久久不能自己，可却无可奈何，这是她每个夜晚都会...</span><div id="ciaA2PsSZ2vSPTc4YM2PGD" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div></li></ul><div id="ohWDGizgHfCbV5QqDRvZHw" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/users/upload_avatars/4790772/388e473c-fe2f-40e0-9301-e357ae8f1b41.jpeg" style="width: 192px"/></figure></div><ul class="wolai-block"><li id="6FwvhcPjS2bTqbbzn6b5ah"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">文/潘晓璐 我一进店门，熙熙楼的掌柜王于贵愁眉苦脸地迎上来，“玉大人，你说我怎么就摊上这事。” “怎么了？”我有些...</span></li><li id="Y59KiZseA8Q7JFW97iJLm"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">文/不坏的土叔 我叫张陵，是天一观的道长。 经常有香客问我，道长，这世上最难降的妖魔是什么？ 我笑而不...</span></li><li id="fYBXVhj7ruBJMabP3wgC1m"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">正文 飘荡这世间好些年，我已经不记得自己是谁了。 只因初入这座山时遍体鳞伤，旁人问我叫什么，怎么了，我也只是喃喃的...</span><div id="5FCNbTdrEKf58dsdsVruYK" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div></li></ul><div id="qFtJjftvWGat47vDStCCyx" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/users/upload_avatars/4790772/388e473c-fe2f-40e0-9301-e357ae8f1b41.jpeg" style="width: 192px"/></figure></div><ul class="wolai-block"><li id="aMvZFuCXVWXRU6s6MNz8dJ"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">正文 全力反抗校园霸凌！三年前我遇到霸凌不堪受辱，闺蜜加入了我的战队，她还真是帮了我个大忙！从初中就开始在霸凌的雷...</span><div id="vPe1ezHWf4ZX2sodaVKVpy" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div></li></ul><div id="ots6nQZKnzL5t4utZMSwtp" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/users/upload_avatars/4790772/388e473c-fe2f-40e0-9301-e357ae8f1b41.jpeg" style="width: 192px"/></figure></div><ul class="wolai-block"><li id="6qo5BKxqWm369kF4ERk2Ef"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">正文 为了忘掉前任，我火速办了婚礼，结果婚礼上，老公的妹妹穿的比我还像新娘。我一直安慰自己，他们只是感情好，可当我...</span><div id="4GyqdHhCboXeW5MASMVb13" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div></li></ul><div id="fBH4WShXTE3VMFgxHPrYuN" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/users/upload_avatars/4790772/388e473c-fe2f-40e0-9301-e357ae8f1b41.jpeg" style="width: 192px"/></figure></div><ul class="wolai-block"><li id="ahudwZYa5P3Wkyou7t9GL2"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">文/花漫 我一把揭开白布。 她就那样静静地躺着，像睡着了一般。 火红的嫁衣衬着肌肤如雪。 梳的纹丝不乱的头发上，一...</span></li><li id="aDid4ixBxW7TcXJ843QtgX"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">正文 全体准备，倒计时三分钟！郭远飞，请确认！” 收到！” 郭大年对着对讲机喊了一声之后，突然想起来，自己还没有按...</span><div id="eM9vdrrtef2cE3GkFj5eoK" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div></li></ul><div id="9fCzDcDAHn4B84fm7cMdMm" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/users/upload_avatars/4790772/388e473c-fe2f-40e0-9301-e357ae8f1b41.jpeg" style="width: 192px"/></figure></div><ul class="wolai-block"><li id="hsjycF19ZGCRkic5c7gCk7"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">文/苍兰香墨 我猛地睁开眼，长吁一口气：“原来是场噩梦啊……” “哼！你这毒妇竟也来了？” 一声冷哼从身侧响起，我...</span></li><li id="46VLhmwUMDmqYMYSdffaTQ"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">正文 阿凡打电话说她家里要么有鬼，要么有贼，到了晚上，卫生间一直有嘀嗒的水声，还听到有人跛着拖鞋在客厅里走来走去，...</span><div id="kGDeBCeBEivQvJFYQE46GD" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div></li></ul><div id="3aTeXbngR8qeLNKyvCCbTJ" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/users/upload_avatars/4790772/388e473c-fe2f-40e0-9301-e357ae8f1b41.jpeg" style="width: 192px"/></figure></div><ul class="wolai-block"><li id="iiwv62kCwYXJCh6ZT8A7b8"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">正文 独居荒郊野岭守林人离奇死亡，尸身上长有<span class="jill"></span>42<span class="jill"></span>处带血的脓包…… 初始之章<span class="jill"></span>·<span class="jill"></span>张勋 以下内容为张勋视角 年<span class="jill"></span>9<span class="jill"></span>月<span class="jill"></span>15<span class="jill"></span>日...</span><div id="vxNCepTgYfXLewnLZ5axws" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div></li></ul><div id="g6S8hdpvF97TSx6wE7ioma" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/users/upload_avatars/4790772/388e473c-fe2f-40e0-9301-e357ae8f1b41.jpeg" style="width: 192px"/></figure></div><ul class="wolai-block"><li id="kHJjJ4rLW6vFFucyFFRosw"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">正文 我和宋清朗相恋三年，在试婚纱的时候发现自己被绿了。 大学时的朋友给我发了我未婚夫和他白月光在一起吃饭的照片。...</span><div id="mWZvuWLQHN2yhVAkoSjuHw" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div></li></ul><div id="hjudc7cS3zJnM1aHQnqJKY" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/users/upload_avatars/4790772/388e473c-fe2f-40e0-9301-e357ae8f1b41.jpeg" style="width: 192px"/></figure></div><ul class="wolai-block"><li id="vfitB3mqbM9aCiucTJR8m6"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">正文 雪。 悄寂无声的夜，只有那窗外轻摇而落下的雪，园中梅花零零星星，在昏暗中，略显孤寂。 她无声地叹了口气，冰凉...</span><div id="sfsJC4k8qYCz4XEp5M3LY1" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div></li></ul><div id="mA7Yk5bmexaJdWyPHjqzew" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/users/upload_avatars/4790772/388e473c-fe2f-40e0-9301-e357ae8f1b41.jpeg" style="width: 192px"/></figure></div><ul class="wolai-block"><li id="u8neFmvPUNuiKNLT1LG8ot"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">正文 年<span class="jill"></span>R<span class="jill"></span>本政府宣布，位于<span class="jill"></span>F<span class="jill"></span>岛的核电站，受<span class="jill"></span>9<span class="jill"></span>级特大地震影响，放射性物质发生泄漏。R<span class="jill"></span>本人自食恶果不足惜，却给世界环境...</span><div id="nxNbCUz8B4EkuUwU4yZvWC" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div></li></ul><div id="8nzNyKApv6NxP7d4SUf2fp" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/users/upload_avatars/4790772/388e473c-fe2f-40e0-9301-e357ae8f1b41.jpeg" style="width: 192px"/></figure></div><ul class="wolai-block"><li id="sAXjSgBTg61wE9spycputn"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">正文 玩儿够了就从老子身上下去。」时峥说这话的时候，我正趴在他身上咬着他的耳朵。 他的女朋友孙雪漫站在他卧室门口看...</span><div id="xyX1oFsv5Z36h4xj7qk9Di" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div></li></ul><div id="3egMnrj5PFfB21xDmb8Mx3" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/users/upload_avatars/4790772/388e473c-fe2f-40e0-9301-e357ae8f1b41.jpeg" style="width: 192px"/></figure></div><ul class="wolai-block"><li id="vsbiuzJdtZBCkhXkT3uRXG"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">文/蒙蒙 一、第九天 我趴在偏房一处隐蔽的房顶上张望。 院中可真热闹，春花似锦、人声如沸。这庄子的主人今日做“春日...</span></li><li id="iBKbxZNntHH3cj3xKhGoS8"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">文/苍兰香墨 我抬头看了看天上的太阳。三九已至，却和暖如春，着一层夹袄步出监牢的瞬间，已是汗流浃背。 一阵脚步声响...</span></li><li id="kvC92eUBH2S86k29rtzvJX"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">文/米丘 我家的后院里埋着一具尸体，是被我官人打死的。这成了我俩的心病，时不时要去坟头那棵树下拜拜，祈祷着这棵树千...</span></li><li id="7EkpneSaHwaJXXbPJdsTgc"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">正文 我出身青楼，却偏偏与公主长得像，于是被迫代替她去往敌国和亲。 传闻我的和亲对象是个残疾皇子，可洞房花烛夜当晚...</span><div id="qWoyuXD1jEdvTBZL7SkMdH" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div></li></ul><div id="v8iQUfutUJPtkCoBxDd4VH" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://upload.jianshu.io/users/upload_avatars/4790772/388e473c-fe2f-40e0-9301-e357ae8f1b41.jpeg" style="width: 192px"/></figure></div><h3 id="95LwEKNZCNvk3n8pyyHVXz" class="wolai-block"><span class="inline-wrap">推荐阅读</span><span class="inline-wrap"><a href="https://www.jianshu.com/"><span>更多精彩内容</span></a></span></h3><ul class="wolai-block"><li id="q52wvdXUuNgSsVwtzehPx7"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">世界上有许多让我们为之感动的画面，不经意的某个瞬间总是让人记忆深刻。一幕幕的画面挥之不去，犹如动人的音符让耳朵流连...</span><div id="ffGB662rUjmMKFdEgu9egb" class="wolai-block wolai-text"><div><span class="inline-wrap">[</span></div></div></li></ul><div id="km4ESSBtx4HDqzRhPLkhZF" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://cdn2.jianshu.io/assets/default_avatar/1-04bbeead395d74921af6a4e8214b4f61.jpg" style="width: 480.8px"/></figure></div><div id="fu8bQKZhR6xyxyVtHfv85c" class="wolai-block wolai-text"><div><span class="inline-wrap">茶点故事](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/0f438ff0a55f"><span>https://www.jianshu.com/u/0f438ff0a55f</span></a></span><span class="inline-wrap">)阅读 3963<span class="jill"></span>评论 1<span class="jill"></span>赞 5</span></div></div><div id="vUqgDJsJLCau9zEEJMFnyC" class="wolai-block wolai-text"><div><span class="inline-wrap">茶点故事](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/0f438ff0a55f"><span>https://www.jianshu.com/u/0f438ff0a55f</span></a></span><span class="inline-wrap">)阅读 1968<span class="jill"></span>评论 0<span class="jill"></span>赞 2</span></div></div><div id="beAvVp8j4Ks6J5LaXrjf6B" class="wolai-block wolai-text"><div><span class="inline-wrap">茶点故事](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/0f438ff0a55f"><span>https://www.jianshu.com/u/0f438ff0a55f</span></a></span><span class="inline-wrap">)阅读 2082<span class="jill"></span>评论 0<span class="jill"></span>赞 3</span></div></div><div id="4g6STRbtFHYdhtksUBtQmF" class="wolai-block wolai-text"><div><span class="inline-wrap">茶点故事](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/0f438ff0a55f"><span>https://www.jianshu.com/u/0f438ff0a55f</span></a></span><span class="inline-wrap">)阅读 1698<span class="jill"></span>评论 0<span class="jill"></span>赞 1</span></div></div><div id="cGs8EWQEBBmpb6vYndGrRj" class="wolai-block wolai-text"><div><span class="inline-wrap">茶点故事](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/0f438ff0a55f"><span>https://www.jianshu.com/u/0f438ff0a55f</span></a></span><span class="inline-wrap">)阅读 1502<span class="jill"></span>评论 0<span class="jill"></span>赞 1</span></div></div><div id="cqpZw4dBauKfB7tqarkVZc" class="wolai-block wolai-text"><div><span class="inline-wrap">茶点故事](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/0f438ff0a55f"><span>https://www.jianshu.com/u/0f438ff0a55f</span></a></span><span class="inline-wrap">)阅读 1054<span class="jill"></span>评论 0<span class="jill"></span>赞 1</span></div></div><div id="bixb15i45a4UjkZ7sq8U49" class="wolai-block wolai-text"><div><span class="inline-wrap">茶点故事](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/0f438ff0a55f"><span>https://www.jianshu.com/u/0f438ff0a55f</span></a></span><span class="inline-wrap">)阅读 1116<span class="jill"></span>评论 0<span class="jill"></span>赞 0</span></div></div><div id="siRpRz8xxG9AWcVN2UEHjM" class="wolai-block wolai-text"><div><span class="inline-wrap">茶点故事](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/0f438ff0a55f"><span>https://www.jianshu.com/u/0f438ff0a55f</span></a></span><span class="inline-wrap">)阅读 1340<span class="jill"></span>评论 0<span class="jill"></span>赞 0</span></div></div><div id="e45nKenQKVnkXzyB8P1PAJ" class="wolai-block wolai-text"><div><span class="inline-wrap">茶点故事](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/0f438ff0a55f"><span>https://www.jianshu.com/u/0f438ff0a55f</span></a></span><span class="inline-wrap">)阅读 923<span class="jill"></span>评论 0<span class="jill"></span>赞 0</span></div></div><div id="hLavenYUkmPH7mzFdpeMD6" class="wolai-block wolai-text"><div><span class="inline-wrap">茶点故事](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/0f438ff0a55f"><span>https://www.jianshu.com/u/0f438ff0a55f</span></a></span><span class="inline-wrap">)阅读 1050<span class="jill"></span>评论 0<span class="jill"></span>赞 0</span></div></div><div id="aGx1bzk3QFnxbcojuqUi3V" class="wolai-block wolai-text"><div><span class="inline-wrap">茶点故事](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/0f438ff0a55f"><span>https://www.jianshu.com/u/0f438ff0a55f</span></a></span><span class="inline-wrap">)阅读 1639<span class="jill"></span>评论 0<span class="jill"></span>赞 0</span></div></div><div id="ptHQyLPRdijRbQDKtNdbUv" class="wolai-block wolai-text"><div><span class="inline-wrap">茶点故事](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/0f438ff0a55f"><span>https://www.jianshu.com/u/0f438ff0a55f</span></a></span><span class="inline-wrap">)阅读 1481<span class="jill"></span>评论 0<span class="jill"></span>赞 4</span></div></div><div id="nesTVNAgDsmJaXXxPkE46K" class="wolai-block wolai-text"><div><span class="inline-wrap">蓝色孤枫](</span><span class="inline-wrap"><a href="https://www.jianshu.com/u/67ecbe9cea61"><span>https://www.jianshu.com/u/67ecbe9cea61</span></a></span><span class="inline-wrap">)阅读 193<span class="jill"></span>评论 0<span class="jill"></span>赞 1</span></div></div></article><footer></footer></body></html>