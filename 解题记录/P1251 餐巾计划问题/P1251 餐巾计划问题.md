# P1251 餐巾计划问题

| OJ   | 洛谷          |
| ---- | ----------- |
| 解题报告 |             |
| 时间   |             |
| AC   | ☐           |
| 算法   | 最大流,最小费用最大流 |

<https://www.luogu.com.cn/problem/P1251>

<https://www.bilibili.com/video/BV1Wv4y1W74S>

# 餐巾计划问题

## 题目描述

一个餐厅在相继的 $N$ 天里,每天需用的餐巾数不尽相同。假设第 $i$ 天需要 $r_i$块餐巾( i=1,2,...,N)。餐厅可以购买新的餐巾,每块餐巾的费用为 $p$ 分;或者把旧餐巾送到快洗部,洗一块需 m 天,其费用为 f 分;或者送到慢洗部,洗一块需 $n$ 天($n>m$),其费用为 $s$ 分($s<f$)。

每天结束时,餐厅必须决定将多少块脏的餐巾送到快洗部,多少块餐巾送到慢洗部,以及多少块保存起来延期送洗。但是每天洗好的餐巾和购买的新餐巾数之和,要满足当天的需求量。

试设计一个算法为餐厅合理地安排好 $N$ 天中餐巾使用计划,使总的花费最小。编程找出一个最佳餐巾使用计划。

## 输入格式

由标准输入提供输入数据。文件第 1 行有 1 个正整数 $N$，代表要安排餐巾使用计划的天数。

接下来的一行是餐厅在相继的 $N$ 天里,每天需用的餐巾数。

最后一行包含5个正整数$p,m,f,n,s$。$p$ 是每块新餐巾的费用; $m$ 是快洗部洗一块餐巾需用天数; $f$ 是快洗部洗一块餐巾需要的费用; $n$ 是慢洗部洗一块餐巾需用天数; $s$ 是慢洗部洗一块餐巾需要的费用。

## 输出格式

将餐厅在相继的 N 天里使用餐巾的最小总花费输出

## 样例 #1

### 样例输入 #1

```c++
3
1 7 5 
11 2 2 3 1
```

### 样例输出 #1

```c++
134
```

## 提示

N<=2000

ri<=10000000

p,f,s<=10000

时限4s

```c++
int main()
{
  int x;
  scanf("%d",&n);
  st=0,ed=2*n+1;
  memset(last,-1,sizeof(last)); 
  for(int i=1;i<=n;i++)
  {
    scanf("%d",&x);
    ins(st,i,x,0);//每天晚上从起点获得x条脏餐巾 
    ins(i+n,ed,x,0);//每天白天,向汇点提供x条干净的餐巾,流满时表示第i天的餐巾够用 
  }
  scanf("%d %d %d %d %d",&m,&t1,&m1,&t2,&m2);
  for(int i=1;i<=n;i++)
  {
    if(i+1<=n) ins(i,i+1,INF,0);//每天晚上可以将脏餐巾留到第二天晚上 
    if(i+t1<=n) ins(i,i+n+t1,INF,m1);//每天晚上可以送去快洗部,在地i+t1天早上收到餐巾 
    if(i+t2<=n) ins(i,i+n+t2,INF,m2);//每天晚上可以送去慢洗部,在地i+t2天早上收到餐巾 
    ins(st,i+n,INF,m);//每天早上可以购买餐巾 
  }
  printf("%lld",flow());
}
```
