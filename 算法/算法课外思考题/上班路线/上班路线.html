<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>上班路线 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="上班路线" class="main-title"></div></div></header><article><h1 id="S1Sc3jQQaN4gUMyEpa8ST" class="wolai-block"><span class="inline-wrap">问题重述</span></h1><div id="cVaaz4Pr8rFSyMQn5TpR4e" class="wolai-block wolai-text"><div><span class="inline-wrap">W<span class="jill"></span>先生每天驾车去公司上班。W<span class="jill"></span>先生的住所位于<span class="jill"></span>A，公司位于<span class="jill"></span>F，图中的直线段代表公路，交叉点代表路口，直线段上的数字代表两路口之间的平均行驶时间。现在<span class="jill"></span>W<span class="jill"></span>先生的问题是要确定一条最省时的上班路线。</span></div></div><div id="fJnUcs17jXugNKSHK2ELZD" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/image.png" style="width: 688px"/></figure></div><h1 id="aHmYQ2N9AjGRpo23VAvPjX" class="wolai-block"><span class="inline-wrap">迪杰斯特拉 Dijkstr</span></h1><aside id="jxzkt8CAGCQrSQ8gDT31z" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap">最基础的，我们将其作为单源最短路径进行处理</span></aside><code-block id="x4sAy8mZQDTobX4k7j5C8R" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function"><span class="token maybe-class-name">Dijkstra</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">ALGragh</span> <span class="token constant">G</span><span class="token punctuation">,</span>int <span class="token constant">N</span><span class="token punctuation">,</span>int <span class="token constant">E</span><span class="token punctuation">,</span>int <span class="token constant">S</span></span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  int<span class="token operator">*</span> dis<span class="token punctuation">;</span>
  dis <span class="token operator">=</span> <span class="token punctuation">(</span>int<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token function">sizeof</span><span class="token punctuation">(</span>int<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">N</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    dis<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">INF</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  int<span class="token operator">*</span> visit<span class="token punctuation">;</span>
  visit <span class="token operator">=</span> <span class="token punctuation">(</span>int<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token function">sizeof</span><span class="token punctuation">(</span>int<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">N</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    visit<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  dis<span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  visit<span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token maybe-class-name">ALArcNode</span><span class="token operator">*</span> now<span class="token operator">=</span><span class="token constant">G</span><span class="token punctuation">.</span><span class="token property-access">vertices</span><span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">firstarc</span><span class="token punctuation">;</span>
  int k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  int <span class="token constant">MINN</span> <span class="token operator">=</span> <span class="token constant">INF</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>now<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    dis<span class="token punctuation">[</span>now<span class="token operator">-</span><span class="token operator">></span>adjvex<span class="token punctuation">]</span> <span class="token operator">=</span> now<span class="token operator">-</span><span class="token operator">></span>value<span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>now<span class="token operator">-</span><span class="token operator">></span>value <span class="token operator">&lt;</span> <span class="token constant">MINN</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token constant">MINN</span> <span class="token operator">=</span> now<span class="token operator">-</span><span class="token operator">></span>value<span class="token punctuation">;</span>
      k <span class="token operator">=</span> now<span class="token operator">-</span><span class="token operator">></span>adjvex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    now <span class="token operator">=</span> now<span class="token operator">-</span><span class="token operator">></span>nextarc<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token constant">MINN</span> <span class="token operator">=</span> <span class="token constant">INF</span><span class="token punctuation">;</span>
    visit<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    now <span class="token operator">=</span> <span class="token constant">G</span><span class="token punctuation">.</span><span class="token property-access">vertices</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">firstarc</span><span class="token punctuation">;</span>
    int <span class="token maybe-class-name">NextK</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>now<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>visit<span class="token punctuation">[</span>now<span class="token operator">-</span><span class="token operator">></span>adjvex<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        now <span class="token operator">=</span> now<span class="token operator">-</span><span class="token operator">></span>nextarc<span class="token punctuation">;</span>
        <span class="token keyword control-flow">continue</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      dis<span class="token punctuation">[</span>now<span class="token operator">-</span><span class="token operator">></span>adjvex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>now<span class="token operator">-</span><span class="token operator">></span>value <span class="token operator">+</span> dis<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> dis<span class="token punctuation">[</span>now<span class="token operator">-</span><span class="token operator">></span>adjvex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>dis<span class="token punctuation">[</span>now<span class="token operator">-</span><span class="token operator">></span>adjvex<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token constant">MINN</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token constant">MINN</span> <span class="token operator">=</span> dis<span class="token punctuation">[</span>now<span class="token operator">-</span><span class="token operator">></span>adjvex<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token maybe-class-name">NextK</span> <span class="token operator">=</span> now<span class="token operator">-</span><span class="token operator">></span>adjvex<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      now <span class="token operator">=</span> now<span class="token operator">-</span><span class="token operator">></span>nextarc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token constant">MINN</span> <span class="token operator">==</span> <span class="token constant">INF</span><span class="token punctuation">)</span> <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
    k <span class="token operator">=</span> <span class="token maybe-class-name">NextK</span><span class="token punctuation">;</span>    
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> dis<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>    
  <span class="token comment">//cout &lt;&lt; endl;</span>
  <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h1 id="w2DgQZPWD6zR1VLKmGicxk" class="wolai-block"><span class="inline-wrap">弗洛伊德 Floyed</span></h1><blockquote id="tXvonfPbQicL6oKq1693xK" class="wolai-block"><span class="inline-wrap">每一对顶点</span></blockquote><div id="xo3Es6WyEEAiRHXhZo5hUm" class="wolai-block wolai-text"><div><span class="inline-wrap">储存方式：矩阵</span></div></div><div id="fu9N3FXLdortoydJKdBig4" class="wolai-bookmark wolai-block"><a href="https://blog.csdn.net/weixin_38233103/article/details/109537314">floyd算法 弗洛伊德算法 多源最短路径算法_Anthony_4926的博客-CSDN博客</a><div class="info-box"><div class="text-pane"><div data-title="floyd算法 弗洛伊德算法 多源最短路径算法_Anthony_4926的博客-CSDN博客"></div><div data-desc="写在前边的话：写作不易，有帮助到你的话麻烦点赞加收藏呦。感激不尽！如有错误也请留言指正一、弗洛伊德算法注：表格中值得下标代表最短的路径在弗洛伊德算法中，需要通过迭代填写矩阵的思路计算最短路径。在填写过程中有一些规律，以D0到D1为例。D0到D1在D1中填写的时候，不加证明的给出以下规律。如果红色区域有无穷，那么无穷所对应的列和行都填入原来的值(黄色区域)。剩余的空白格，以（V2，V3）这个格为例，"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://g.csdnimg.cn/static/logo/favicon32.ico&quot;)"></div><div data-hostname="blog.csdn.net"></div></div></div><div class="preview-pane"></div></div></div><code-block id="rBpKeCzMAjaXfdky1qDE13" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function"><span class="token maybe-class-name">Floyd</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">MGragh</span> <span class="token constant">G</span></span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> k <span class="token operator">&lt;=</span> <span class="token constant">G</span><span class="token punctuation">.</span><span class="token property-access">vexnum</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token constant">G</span><span class="token punctuation">.</span><span class="token property-access">vexnum</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token constant">G</span><span class="token punctuation">.</span><span class="token property-access">vexnum</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token constant">G</span><span class="token punctuation">.</span><span class="token property-access">arcs</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">adj</span> <span class="token operator">></span> <span class="token constant">G</span><span class="token punctuation">.</span><span class="token property-access">arcs</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">adj</span> <span class="token operator">+</span> <span class="token constant">G</span><span class="token punctuation">.</span><span class="token property-access">arcs</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">adj</span><span class="token punctuation">)</span>
          <span class="token constant">G</span><span class="token punctuation">.</span><span class="token property-access">arcs</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">adj</span> <span class="token operator">=</span> <span class="token constant">G</span><span class="token punctuation">.</span><span class="token property-access">arcs</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">adj</span> <span class="token operator">+</span> <span class="token constant">G</span><span class="token punctuation">.</span><span class="token property-access">arcs</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">adj</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><div id="obRRvDEqpMhnrZQpdj7Dex" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/image_1.png" style="width: 100%"/></figure></div><div id="rKukACWMrSz1AxsV7CyWZg" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/image_2.png" style="width: 100%"/></figure></div><ul class="wolai-block"><li id="banDXEjbFC9Sgip6CWuJuZ"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="brown inline-wrap"><b>红色部分直接复制</b></span></li></ul><div id="fE1Y8ffnRVnuNWxoykEZjh" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/image_3.png" style="width: 100%"/></figure></div><ul class="wolai-block"><li id="wRpac7oM6EVfUrCUbXSR5i"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="brown inline-wrap"><b>如果红色区域有无穷，那么无穷所对应的列和行都填入原来的值</b></span><span class="brown inline-wrap">(蓝色部分，深色的是有重叠)。</span></li></ul><div id="jJBnX6Bto4o9zLynfDMeg3" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/image_4.png" style="width: 100%"/></figure></div><h3 id="hFXJpYg1rjYHo8Dj21obS5" class="wolai-block"><span class="inline-wrap"><b>剩余的空白格</b></span></h3><ol class="wolai-block"><li id="gUQ4235ZQ1gT9H35yUBPgy"><div class="marker"></div><span class="inline-wrap"><b>对角线直接填原来的</b></span></li><li id="73N24XCjtXQxxjjjnJAh5R"><div class="marker"></div><span class="inline-wrap"><b>非对角线，以（V2，V3）这个格为例，如果红色与浅绿色的交点处的值相加比草绿色处的值小，就将（V2，V3）的值替换为交点值得和。此处，2+3&lt;∞。
填入值后修改值的下标，下标为交点的下标连起来，重复的只写一个。下标的意义是从<span class="jill"></span>V2<span class="jill"></span>点到<span class="jill"></span>V3<span class="jill"></span>点当前最短路径是<span class="jill"></span>V2 -&gt; V1 -&gt; V3，路径长度为<span class="jill"></span>5</b></span></li></ol><div id="eCS2JYgBvVLDB5X7dEzQj6" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/image_5.png" style="width: 100%"/></figure></div><h2 id="uKSbtz1HKSptP3mwuU5tdG" class="wolai-block"><span class="inline-wrap">优点：</span></h2><ul class="wolai-block"><li id="cY2u6EmZYmjA1L7i9grci7"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">在稀疏图上时间复杂度比较优秀 最差退化成<span class="jill"></span>Bellman-Frd</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>k</mi><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(km)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">km</span><span class="mclose">)</span></span></span></span></span></li><li id="uCtv39BSEESHn9KyuKBtuB"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">可以处理负权边，但是无法处理负环（即最短路径一定存在）。</span></li></ul><h1 id="4CXNbEYz2YYTu4P47RiWma" class="wolai-block"><span class="inline-wrap">SPFA</span></h1><h2 id="ipSkozMNdd44ZAsM4q81Hs" class="wolai-block"><span class="inline-wrap">数据结构：</span></h2><h4 id="vhd1FmSQPcZVbcccP5XVF7" class="wolai-block"><span class="bg-blond inline-wrap"><b>链式前向星：</b></span></h4><div id="mSvE54PMqnMMdKXeZRbAjg" class="wolai-block wolai-text"><div><span class="inline-wrap">储存图（对于稀疏图比较高效，所以一般搭配链式前向星。</span></div></div><h4 id="iP4R2WKtwzN62eXzNqzxUC" class="wolai-block"><span class="bg-blond inline-wrap">OR </span><span class="bg-blond inline-wrap"><b>邻接矩阵</b></span></h4><h4 id="cryE47e5NoLvMwRm9vtRJL" class="wolai-block"><span class="bg-blond"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>t</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">visit[n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord mathnormal">n</span><span class="mclose">]</span></span></span></span></span><span class="bg-blond inline-wrap">：</span><div id="7nMcazVW3fbmDi7bAw63sh" class="wolai-block wolai-text"><div><span class="inline-wrap">记录该点是否在队列中</span></div></div></h4><h4 id="v9DBHq3HXZ1QKcWf77AxyB" class="wolai-block"><span class="bg-blond"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">sum[n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mopen">[</span><span class="mord mathnormal">n</span><span class="mclose">]</span></span></span></span></span><span class="bg-blond inline-wrap">：</span><div id="hc7BU9sPcu7KEoV1hqmpFS" class="wolai-block wolai-text"><div><span class="inline-wrap">用于判断负环，如果</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mtext>＞</mtext><mi>n</mi></mrow><annotation encoding="application/x-tex">sum[i]＞n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mord cjk_fallback">＞</span><span class="mord mathnormal">n</span></span></span></span></span><span class="inline-wrap">则一定存在负环。</span></div></div></h4><h4 id="6yZ1ntyVXbW1BsLJKMu7JM" class="bg-default wolai-block"><span class="bg-blond"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mi>u</mi><mi>e</mi><mi>u</mi><mi>e</mi><mo>&lt;</mo><mi>i</mi><mi>n</mi><mi>t</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">queue &lt;int&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6986em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span></span></span></span></span><span class="bg-blond inline-wrap">:</span><div id="p1EHvU2d8vSVGE33vE1j4y" class="wolai-block wolai-text"><div><span class="inline-wrap">一个队列，用于储存待处理的点</span></div></div></h4><h2 id="s7uAr1EzpLLTpvUr11u11r" class="wolai-block"><span class="inline-wrap">优化：</span></h2><h4 id="35jHiMs2bkUcwRJW3FLUsr" class="wolai-block"><span class="inline-wrap">SLF（Smart Label First）：</span><div id="uJXs8zciiTduDg2J2oR7cH" class="wolai-block wolai-text"><div><span class="inline-wrap">设待入队的节点为</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="inline-wrap">，现在的队首元素为</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span class="inline-wrap">，那么：</span></div></div><div id="tYcWZqrfSxXpHVbxmwPQ7Z" class="wolai-block wolai-text"><div><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>f</mi><mo stretchy="false">(</mo><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>&lt;</mo><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">if(dist[j]&lt;dist[i])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">])</span></span></span></span></span></div><div id="cza9tEXLFQ62tP8b1rYHPb" class="wolai-block wolai-text"><div><span class="inline-wrap">把</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="inline-wrap">插入队首</span></div></div></div><div id="arS8arv9Yw3kbD6wRymjoK" class="wolai-block wolai-text"><div><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>l</mi><mi>s</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">else
 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">se</span></span></span></span></span></div><div id="r92kJJg5s3StaCGSZCgKQu" class="wolai-block wolai-text"><div><span class="inline-wrap">把</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span class="inline-wrap">插入队尾</span></div></div></div></h4><aside id="38sX9T7dMmGjN11hz58QiP" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap">需要使用双端队列，让松弛效果更好 </span></aside><h4 id="eHiU4Qs54pYKq6h2cjyBLK" class="wolai-block"><span class="inline-wrap">LLL（Large Label Last):</span><div id="bTzmpPfDKnutCbNvc6rnjh" class="wolai-block wolai-text"><div><span class="inline-wrap">设队首元素为节点</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span class="inline-wrap">，队列中所有的</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">[</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dist[]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mclose">]</span></span></span></span></span><span class="inline-wrap">的平均值为</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span class="inline-wrap">:</span></div></div><div id="4oFfv1nsuBAwbddTYFiU2A" class="wolai-block wolai-text"><div><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>f</mi></mrow><annotation encoding="application/x-tex">if </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>&gt;</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">dist[i]&gt;x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span></div><div id="jYYMBKEJsHpjNPAWXuHm33" class="wolai-block wolai-text"><div><span class="inline-wrap">将节点</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span class="inline-wrap">插入队尾</span></div></div></div><div id="aDsq3V4dbu14WEaMi6WeKQ" class="wolai-block wolai-text"><div><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>l</mi><mi>s</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">else</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">se</span></span></span></span></span><span class="inline-wrap"> </span></div><div id="az8HfbRU6vDSVMhQ83RTRt" class="wolai-block wolai-text"><div><span class="inline-wrap">将节点</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span class="inline-wrap">出队，进行松弛操作</span></div></div></div></h4><aside id="7buvL13k5v4w4Boz4nc3oE" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap">以上两个 在负权图上的最坏情况会达到指数复杂度</span></aside><h4 id="wnxq5v4S6kFH9iuZDaCZcr" class="wolai-block"><span class="inline-wrap">优先队列</span></h4><h2 id="N8UicaJksGz1FY2ucyKgN" class="wolai-block"><span class="inline-wrap">应用</span><h4 id="atcwZMhx8H6gqdNcoBvu63" class="wolai-block"><span class="inline-wrap">SPFA<span class="jill"></span>还可以用来判断负环</span></h4><code-block id="o6QrrWXNyy2PngGEUrCMMf" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>int <span class="token maybe-class-name">MaxFlow</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">spfa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token comment">//这里捞了前两天写的最小费用最大流的代码</span>
  priority_queue <span class="token operator">&lt;</span>int<span class="token operator">></span> <span class="token constant">Q</span><span class="token punctuation">;</span><span class="token comment">//优先队列优化</span>
  <span class="token comment">/*初始化*/</span>
  int visit<span class="token punctuation">[</span><span class="token constant">N</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dist<span class="token punctuation">[</span><span class="token constant">N</span><span class="token punctuation">]</span><span class="token punctuation">,</span> flow<span class="token punctuation">[</span><span class="token constant">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    visit<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    dist<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">INF</span><span class="token punctuation">;</span>
    flow<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">INF</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/*塞入s*/</span>
  dist<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  visit<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token constant">Q</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/*队列松弛*/</span>
  <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">Q</span><span class="token punctuation">.</span><span class="token method function property-access">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//在cap图存在边的情况下，对应选择费用图上的边作为新图 寻找s到t的单源最短路径（完全基于费用图）</span>
  <span class="token punctuation">{</span>
    int now<span class="token punctuation">;</span>
    now <span class="token operator">=</span> <span class="token constant">Q</span><span class="token punctuation">.</span><span class="token method function property-access">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">Q</span><span class="token punctuation">.</span><span class="token method function property-access">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    visit<span class="token punctuation">[</span>now<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//回归0使其可以再次入队</span>
    <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span><span class="token constant">G</span><span class="token punctuation">[</span>now<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">cap</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword control-flow">continue</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span><span class="token constant">G</span><span class="token punctuation">[</span>now<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">cost</span> <span class="token operator">!=</span> <span class="token constant">INF</span> <span class="token operator">&amp;&amp;</span> dist<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> dist<span class="token punctuation">[</span>now<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span><span class="token constant">G</span><span class="token punctuation">[</span>now<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">cost</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        dist<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dist<span class="token punctuation">[</span>now<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span><span class="token constant">G</span><span class="token punctuation">[</span>now<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">cost</span><span class="token punctuation">;</span>
        <span class="token comment">/*做关于流的处理*/</span>
        flow<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>flow<span class="token punctuation">[</span>now<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span><span class="token constant">G</span><span class="token punctuation">[</span>now<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">cap</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>pre<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> now<span class="token punctuation">;</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>visit<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
          visit<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
          <span class="token constant">Q</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>        
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>dist<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>t<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token constant">INF</span><span class="token punctuation">)</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">else</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>cost <span class="token operator">+=</span> dist<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>t<span class="token punctuation">]</span> <span class="token operator">*</span> flow<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> flow<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span></pre></div></code-block></h2><h2 id="3bQvF5N6YdSpC9PLxUnyNn" class="wolai-block"><span class="inline-wrap">Reference</span><div id="5jDaLR1u3CnXe12FU8sM16" class="wolai-bookmark wolai-block"><a href="https://blog.csdn.net/weixin_30443747/article/details/97676390?spm=1001.2101.3001.6650.2&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-2.nonecase&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-2.nonecase">SPFA 最短路_weixin_30443747的博客-CSDN博客</a><div class="info-box"><div class="text-pane"><div data-title="SPFA 最短路_weixin_30443747的博客-CSDN博客"></div><div data-desc="求单源最短路的SPFA算法的全称是：Shortest Path Faster Algorithm。SPFA算法是西南交通大学段凡丁于1994年发表的。从名字我们就可以看出，这种算法在效率上一定有过人之处。很多时候，给定的图存在负权边，这时类似Dijkstra等算法便没有了用武之地，而Bellman-Ford算法的复杂度又过高，SPFA算法便派上用场了。有人称sp..."></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://g.csdnimg.cn/static/logo/favicon32.ico&quot;)"></div><div data-hostname="blog.csdn.net"></div></div></div><div class="preview-pane"></div></div></div></h2></article><footer></footer></body></html>