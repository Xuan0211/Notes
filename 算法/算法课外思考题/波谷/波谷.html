<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>波谷 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="full-width"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="波谷" class="main-title"></div></div></header><article><h1 id="bGktr6w3jH2CMJdhdGv4Hn" class="wolai-block"><span class="inline-wrap">问题重述</span></h1><div id="vPs2cKGJtrpn4AsA9EFzN2" class="wolai-block wolai-text"><div><span class="inline-wrap">对于一个由<span class="jill"></span>n<span class="jill"></span>个数形成的序列，我们说其中<span class="jill"></span>l-序列（长度为<span class="jill"></span>l<span class="jill"></span>的子序列）的最小值为波谷，请给出策略求序列中的<span class="jill"></span>l-序列的波谷的最大值，即最大波谷，并进行分析。</span></div></div><h1 id="jVTrcMDjqDZELThTQLvdbS" class="wolai-block"><span class="inline-wrap">利用<span class="jill"></span>ST<span class="jill"></span>算法解决<span class="jill"></span>RMQ（Range Minimum/Maximum Query）</span></h1><aside id="mwGR5xto5gGvjxtmBmamBb" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap">这玩意儿感觉上像<span class="jill"></span>DP<span class="jill"></span>和树状数组的混合版</span><blockquote id="uKrD7D2A7WjUCqzRwXNfoi" class="wolai-block"><span class="inline-wrap">ST 算法的全名是 </span><span class="inline-wrap"><b>Sparse Table Algorithm</b></span><span class="inline-wrap">，中文一般管 Sparse Table 称作</span><span class="inline-wrap"><b>稀疏表</b></span><span class="inline-wrap">。原理是基于二进制的倍增、动态规划思想的。笔者感觉还是有一定难度的。</span></blockquote></aside><aside id="oXSH36PpTJ4tS1bv5rwLjw" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap">对于这个算法，我画了一个动画并做了一个视频，我会附在作业里，强烈建议去看看！如果<span class="jill"></span>PDF<span class="jill"></span>阅读器允许的话，可以点击：</span><div id="JBod1nJKWBr8MZAuxLuB4" class="wolai-bookmark wolai-block"><a href="https://www.bilibili.com/video/BV1RG4y1n7qx">利用ST解决RMQ问题_哔哩哔哩_bilibili</a><div class="info-box"><div class="text-pane"><div data-title="利用ST解决RMQ问题_哔哩哔哩_bilibili"></div><div data-desc="建议先看看我的博客：https://www.wolai.com/mawxuan/mAiGS4ppZcQKUVpSeREXjW, 视频播放量 1、弹幕量 0、点赞数 0、投硬币枚数 0、收藏人数 0、转发人数 0, 视频作者 一一Xuan一一, 作者简介 ，相关视频：【自用】高数  梯度，10月考研关键时期，各省人均GDP实力对比，70年江河湖海11省GDP对比，看看带“水”的省建国后发展如何？，亚"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;http://i0.hdslb.com/bfs/archive/c8a7738e38ceaf27b71d0bcce52b0640c54fdc9b.jpg@57w_57h_1c.png&quot;)"></div><div data-hostname="www.bilibili.com"></div></div></div><div class="preview-pane" style="background-image: url(http://i0.hdslb.com/bfs/archive/c8a7738e38ceaf27b71d0bcce52b0640c54fdc9b.jpg)"></div></div></div></aside><h2 id="bBP5qZwiMZ187zjnGFp1vF" class="wolai-block"><span class="inline-wrap">转移方程</span></h2><div id="6KLXg5siubPiL2tE4QStH6" class="wolai-block wolai-text"><div><span class="inline-wrap">我们用</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">F[i,j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span></span><span class="inline-wrap">表示从第</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span class="inline-wrap">个数起连续</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>j</mi></msup></mrow><annotation encoding="application/x-tex">2^j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8247em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8247em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span></span></span></span></span></span></span></span><span class="inline-wrap">个数中的最小值</span></div></div><div id="kvTH27wHjhejpv5ozD8TGU" class="wolai-block wolai-text"><div><span class="inline-wrap">于是不加证明的给出转移方程</span></div></div><div id="tBVpjnTTDFyDGvK9m93Ns" class="wolai-block wolai-text"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">]</mo><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">{</mo><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">[</mo><mi>i</mi><mo>+</mo><msup><mn>2</mn><mrow><mi>j</mi><mo>−</mo><mn>1</mn></mrow></msup><mo separator="true">,</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">F[i,j]=min\{ F[i,j-1],F[i+2^{j-1},j-1]\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">min</span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0691em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8747em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]}</span></span></span></span></span></div><h2 id="5SKWGT8rfHRevVnPvoGzNz" class="wolai-block"><span class="inline-wrap">预处理</span></h2><code-block id="mBY5aA8iEkn83qKXr6SpRe" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">int <span class="token keyword">in</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>int len</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">in</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span><span class="token function">int</span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>len<span class="token operator">-</span><span class="token number">2</span><span class="token operator">&lt;&lt;</span>j<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">2</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> 
 <span class="token punctuation">}</span></pre></div></code-block><div id="j9fiZgePjca2koziARHK4f" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/image.png" style="width: 664.2778812609001px"/></figure></div><h2 id="s9xPJu7LttZAMngmBU3Wz6" class="wolai-block"><span class="inline-wrap">查询</span></h2><div id="jA6ReEU5crfaUbHYLaRYJ8" class="wolai-block wolai-text"><div><span class="inline-wrap">对于待查区间</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>l</mi><mi mathvariant="normal">.</mi><mi>r</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[l.r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span></span><span class="inline-wrap">,我们不加证明的给出查询函数：</span></div></div><div id="gHnouLkCrVhiJJA81SrwW4" class="wolai-block wolai-text"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mi>M</mi><mi>Q</mi><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>l</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>k</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>r</mi><mo>−</mo><mn>2</mn><mo>&lt;</mo><mo>&lt;</mo><mi>k</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>k</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">RMQ=min(dp[l][k],dp[r-2&lt;&lt;k+1][k])
 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">RMQ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">min</span><span class="mopen">(</span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">])</span></span></span></span></span></div><div id="hDj1mhv9s1gsCJ5HkWvinz" class="wolai-block wolai-text"><div><span class="inline-wrap">其中</span></div></div><div id="8B4jARP5nZyXxqLGLpxJZs" class="wolai-block wolai-text"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>k</mi><mo>=</mo><mo stretchy="false">⌊</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>r</mi><mo>−</mo><mi>l</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">⌋</mo></mrow><annotation encoding="application/x-tex">k=⌊log(r-l+1)⌋</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌊</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)⌋</span></span></span></span></span></div><h3 id="sr1xHL8LtSxYC3gUXGCCD" class="wolai-block"><span class="inline-wrap">举个栗子：</span></h3><div id="9DmifwqBFPYEEK6xuKBCcF" class="wolai-block wolai-text"><div><span class="inline-wrap">对于带查询区间【2,7】，我们可以找到：</span></div></div><div id="dvYAtsbXJA3zwSx3kmVpXz" class="wolai-row"><div id="jQszHjUTfPyx2XTf4ufyEq" class="wolai-col" style="flex-grow: 0.5"><div id="wsZ2cP28DEW865jdtUUEgx" class="wolai-block"><figure class="wolai-left" style="width: 100%"><img src="media/image_1.png" style="width: 664.2778812609001px"/></figure></div></div><div id="8ErB7CXBDtHXTUV8q19NoT" class="wolai-col" style="flex-grow: 0.5"><div id="3XBcrq1MwzAwq2L8cRD994" class="wolai-block"><figure class="wolai-left" style="width: 100%"><img src="media/image_2.png" style="width: 664.2778812609001px"/></figure></div></div></div><div id="d4TD52C15dQWunsbBTUumh" class="wolai-block wolai-text"><div><span class="inline-wrap">所以：</span></div></div><div id="5CQ5awqn2mF2gJRnzSgV3e" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/image_3.png" style="width: 664.2778812609001px"/></figure></div><h3 id="6MSwiTWH5v2kNsx2hPxPGT" class="wolai-block"><span class="inline-wrap">查询代码</span></h3><code-block id="wwQF8k2PxjyzdemDH9doVS" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>int <span class="token function">query</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span>int r</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  int k<span class="token operator">=</span><span class="token function">int</span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token operator">-</span>l<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>r<span class="token operator">-</span><span class="token number">2</span><span class="token operator">&lt;&lt;</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h1 id="n34i9ikvfv84u9zdUgsRce" class="wolai-block"><span class="inline-wrap">滑动窗口</span></h1><aside id="bozQS2yVVTD9i8x87NWFuE" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap">RMQ<span class="jill"></span>好像可以实现<span class="jill"></span>O（1）时间查询？但是我没看懂大佬的思路，所以我还是再用了一次滑动窗口</span></aside><div id="axvQEHkLBkPHT5dwrEi2Jv" class="wolai-block wolai-text"><div><span class="inline-wrap">想象一下我们以长度为</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="inline-wrap">建立滑动窗口，每次查询子区间</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>i</mi><mo separator="true">,</mo><mi>i</mi><mo>+</mo><mi>l</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[i,i+l]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mclose">]</span></span></span></span></span><span class="inline-wrap">中的最小值，最后在这些最小值中求得最大值</span></div></div><blockquote id="kehDJ2M1K5jNkjLyrpPL8y" class="wolai-block"><span class="inline-wrap">在这里我引用一个动图</span><div id="qbuiXSopaGisahSXyDSXZV" class="wolai-block"><figure class="wolai-left" style="width: 100%"><img src="media/a9571d70767a49b49419161e42353037.gif" style="width: 841.3018021246228px"/></figure></div></blockquote><code-block id="n6cMn5nc26C8Ma5DNkcfTz" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>int <span class="token function"><span class="token maybe-class-name">MinQuery</span></span><span class="token punctuation">(</span><span class="token parameter">int <span class="token keyword">in</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>int l<span class="token punctuation">,</span>int len</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  int minn<span class="token operator">=</span><span class="token constant">INF</span><span class="token punctuation">;</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">foe</span><span class="token punctuation">(</span><span class="token parameter">int i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token operator">-</span>r<span class="token punctuation">;</span>i<span class="token operator">++</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    minn<span class="token operator">=</span><span class="token function">min</span><span class="token punctuation">(</span>minn<span class="token punctuation">,</span><span class="token function">query</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>i<span class="token operator">+</span>l<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  cout<span class="token operator">&lt;&lt;</span>minn<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h1 id="nuFGQiN8TXi76nYPivUm9n" class="wolai-block"><span class="inline-wrap">性能分析</span></h1><div id="fNxymLBeUVp1vUGLzstAqZ" class="wolai-block wolai-text"><div><span class="inline-wrap">预处理需要</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">nlog(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></div></div><div id="4RUHmkF6WfscqpnKHr4CMV" class="wolai-block wolai-text"><div><span class="inline-wrap">每次<span class="jill"></span>RMQ<span class="jill"></span>查询的时间复杂度为</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mtext>（</mtext><mn>1</mn><mtext>）</mtext></mrow><annotation encoding="application/x-tex">O（1）</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord cjk_fallback">（</span><span class="mord">1</span><span class="mord cjk_fallback">）</span></span></span></span></span></div></div><div id="dTEpJjPwJ3qcryaqUjn7Z9" class="wolai-block wolai-text"><div><span class="inline-wrap">整个算法时间复杂度为</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n)=O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></div></div><h1 id="eUvvmh36ca8vBPr58NktpS" class="wolai-block"><span class="inline-wrap">SEE ALSO</span></h1><div id="5xDR7ydmQvbzdkx8JafDFX" class="wolai-bookmark wolai-block"><a href="https://blog.csdn.net/weixin_61612736/article/details/123759889">基于时间复杂度为O（n）的最大波谷求法_*子曦.星辰的博客-CSDN博客</a><div class="info-box"><div class="text-pane"><div data-title="基于时间复杂度为O（n）的最大波谷求法_*子曦.星辰的博客-CSDN博客"></div><div data-desc="问题描述：假设𝑋[1:𝑛] 是实数数组，𝑙 是一个固定的正整数 ≤ 𝑛。 𝑋的𝑙子数组是数组𝑋的𝑙连续元素的任意序列。 𝑙-子数组的波谷是该𝑙-子数组中的最小值。 给出一个分治算法，输入一个数组𝑋[1:𝑛] 和一个正整数𝑙 ≤ 𝑛，并返回具有最大波谷的𝑙子数组的起始位置，并 根据 𝑛 和 𝑙 分析算法的时间复杂度。目录问题分析	方法一：分治法	方法二：滑动窗口法	"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://g.csdnimg.cn/static/logo/favicon32.ico&quot;)"></div><div data-hostname="blog.csdn.net"></div></div></div><div class="preview-pane"></div></div></div><div id="qwjgCANprXzknpwCfv8Xuc" class="wolai-bookmark wolai-block"><a href="https://blog.csdn.net/hqh131360239/article/details/80762901?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-80762901-blog-107191842.pc_relevant_aa&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-80762901-blog-107191842.pc_relevant_aa&amp;utm_relevant_index=1">RMQ、树状数组、线段树_清晨~的博客-CSDN博客</a><div class="info-box"><div class="text-pane"><div data-title="RMQ、树状数组、线段树_清晨~的博客-CSDN博客"></div><div data-desc="1、线段树(区间求和、区间最大值、区间最小值)2、树状数组3、RMQ（区间最大值、区间最小值）"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://g.csdnimg.cn/static/logo/favicon32.ico&quot;)"></div><div data-hostname="blog.csdn.net"></div></div></div><div class="preview-pane"></div></div></div><div id="mbEeXbAD9iW6VuGK59cL55" class="wolai-bookmark wolai-block"><a href="https://www.desgard.com/algo/docs/part2/ch03/1-range-max-query/">RMQ（Range Maximum Query) 问题</a><div class="info-box"><div class="text-pane"><div data-title="RMQ（Range Maximum Query) 问题"></div><div data-desc="今天的算法可能有点难，但是如果我们只需要会使用 RMQ 问题的 ST 算法模板，这种程度就已经可以了！因为 RMQ 问题除了最优解的 ST 算法，剩下的都是高级数据结构的应用，例如：线段树、树状数组、Splay、Treap 甚至是主席树（额，我什么都没有暗示，业界就是这个名字）。好了今天我们从两个角度来解决这个问题。ST 算法和线段树。当然如果你对高级数据结构感兴趣，我也会在以后的文章中更新这个系"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://www.desgard.com/algo/favicon.png&quot;)"></div><div data-hostname="www.desgard.com"></div></div></div><div class="preview-pane"></div></div></div><div id="7CU3pxkSsu2nC5XYQ5ShpM" class="wolai-file-block wolai-block"><div class="file-icon" style="background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; width=&apos;24&apos; height=&apos;24&apos; viewBox=&apos;0 0 24 24&apos;%3E%3Cdefs%3E%3ClinearGradient x1=&apos;17.357%25&apos; y1=&apos;-6.509%25&apos; x2=&apos;82.643%25&apos; y2=&apos;106.509%25&apos; id=&apos;file-ppt_svg__a&apos;%3E%3Cstop stop-color=&apos;%23FFF&apos; stop-opacity=&apos;0.5&apos; offset=&apos;0%25&apos;%3E%3C/stop%3E%3Cstop stop-opacity=&apos;0.7&apos; offset=&apos;100%25&apos;%3E%3C/stop%3E%3C/linearGradient%3E%3C/defs%3E%3Cg fill=&apos;none&apos; fill-rule=&apos;evenodd&apos;%3E%3Cpath stroke=&apos;%23FFF&apos; stroke-linecap=&apos;round&apos; d=&apos;M9 19h6&apos;%3E%3C/path%3E%3Cg transform=&apos;translate(1 2)&apos;%3E%3Crect fill=&apos;%23D35230&apos; fill-rule=&apos;nonzero&apos; x=&apos;2.55&apos; y=&apos;0.99&apos; width=&apos;18.03&apos; height=&apos;18.03&apos; rx=&apos;9.01&apos;%3E%3C/rect%3E%3Cpath d=&apos;M11.56 1a9 9 0 00-9 9h9V1z&apos; fill=&apos;%23ED6C47&apos; fill-rule=&apos;nonzero&apos;%3E%3C/path%3E%3Cpath d=&apos;M11.56 1a9 9 0 019 9h-9V1z&apos; fill=&apos;%23FF8F6B&apos; fill-rule=&apos;nonzero&apos;%3E%3C/path%3E%3Cpath d=&apos;M20.17 7.33a9.71 9.71 0 00-.68-1.62 9.37 9.37 0 00-1-1.44 9 9 0 00-7-3.28 9 9 0 00-9 9 9 9 0 1017.62-2.67l.06.01z&apos; opacity=&apos;0.5&apos; style=&apos;mix-blend-mode: overlay;&apos;%3E%3C/path%3E%3Crect fill=&apos;%23C43E1C&apos; fill-rule=&apos;nonzero&apos; x=&apos;0.86&apos; y=&apos;4.93&apos; width=&apos;10.14&apos; height=&apos;10.14&apos; rx=&apos;0.85&apos;%3E%3C/rect%3E%3Crect x=&apos;0.86&apos; y=&apos;0.93&apos; width=&apos;10.14&apos; height=&apos;10.14&apos; rx=&apos;0.85&apos; opacity=&apos;0.5&apos; transform=&apos;translate(0 4)&apos; fill=&apos;url(%23file-ppt_svg__a)&apos; fill-rule=&apos;nonzero&apos;%3E%3C/rect%3E%3Cpath d=&apos;M6 7.25a2.29 2.29 0 011.5.44c.362.335.547.82.5 1.31a1.68 1.68 0 01-1 1.6 2.41 2.41 0 01-1.1.23h-1v1.95H3.83v-5.5L6 7.25zM4.9 10h.92c.292.019.58-.07.81-.25a.91.91 0 00.28-.71c0-.6-.36-.91-1.06-.91H4.9V10z&apos; fill=&apos;%23FFF&apos; fill-rule=&apos;nonzero&apos;%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/svg%3E&quot;);"></div><a href="media/%E8%AF%BE%E5%A4%96%E6%80%9D%E8%80%83%E9%A2%980930(%E9%99%88%E8%B4%A4).pptx"><span>课外思考题0930(陈贤).pptx</span><span data-size="9.23 MB" class="file-size"></span></a></div><div id="bZCXJuXyWhyviUCGM4ZCCL" class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>