<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>电路布线问题 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="电路布线问题" class="main-title"></div></div></header><article><h1 id="rP2xm9k85QWMD4r9jXVNSU" class="wolai-block"><span class="inline-wrap">问题重述</span></h1><div id="2rNYxvmWfjjfeVu6Byy4Bq" class="wolai-block wolai-text"><div><span class="inline-wrap">在芯片设计中，经常要考虑输入与输出端之间的连接关系，假设输入与输出端分别有若干端口，并且用一组数字进行标注（可能有重复），当且仅当输入端与输出端数字相等并且不与其他连接线相交的情况下，可以建立输入与输出之间的连接。设计算法策略，计算可能得到的最大连接数。</span></div></div><h1 id="nMwiqL8AgpPcAAW8fEpf4j" class="wolai-block"><span class="inline-wrap">来自课本：DP</span></h1><aside id="hxXQ7SzWeprsCDXey63k1t" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap">这是一道非常经典的动态规划题</span></aside><div id="qbseXxvLcYBHKCHS8FJDv9" class="wolai-bookmark wolai-block"><a href="https://www.cnblogs.com/wkfvawl/p/11660698.html">算法设计与分析——电路布线（动态规划） - 王陸 - 博客园</a><div class="info-box"><div class="text-pane"><div data-title="算法设计与分析——电路布线（动态规划） - 王陸 - 博客园"></div><div data-desc="一、问题描述 在一块电路板的上下两端分别有n个接线柱。根据电路设计，要求用导线 (i，π(i))，将上端接线柱 i 与下端接线柱 π(i) 相连，如图，其中 π(i)，1&amp;lt;=i&amp;lt;=n，是("></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://common.cnblogs.com/favicon.svg&quot;)"></div><div data-hostname="www.cnblogs.com"></div></div></div><div class="preview-pane"></div></div></div><h2 id="wegKVG9xPr3BZW7NXV1AgL" class="wolai-block"><span class="inline-wrap">最优子结构证明</span></h2><div id="gbfML6qV7oYANpuYhsjcF3" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/1358881-20191012114911767-483335384.png" style="width: 200px"/></figure></div><div id="6U1f1QNL4B17STqzVtAUqe" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/1358881-20191012124755515-1554665926.png" style="width: 100%"/></figure></div><div id="4GEcjjeq34P56yNgLUZbqq" class="wolai-block wolai-text"><div><span class="inline-wrap">N(i,j)表示上面节点<span class="jill"></span>i<span class="jill"></span>与下面节点<span class="jill"></span>j<span class="jill"></span>连线的</span><span class="inline-wrap"><b>左侧</b></span><span class="inline-wrap">区域内（包括<span class="jill"></span>i j<span class="jill"></span>连线）的连线集合，MNS(i,j)表示连线左侧区域内最大不相交连线子集，Size(i,j)表示<span class="jill"></span>MNS(i,j)集合中连线的个数。</span></div></div><div id="THkJjhXceKC1jeY71pX5c" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/1358881-20191012125509094-1865186385.png" style="width: 100%"/></figure></div><div id="jVRfggYLn9gJfQXA7j8syY" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/1358881-20191012125534086-1509244873.png" style="width: 100%"/></figure></div><h2 id="jZuQjhFH88NeRibrmN3kaA" class="wolai-block"><span class="inline-wrap">状态定义</span></h2><div id="evb7SAUTNNHB9WGHVXxAfM" class="wolai-block wolai-text"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>=</mo><mi mathvariant="normal">size</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi mathvariant="normal">MNS</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d p[i][j]=\operatorname{size}(\operatorname{MNS}(N(i, j)))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm">size</span></span><span class="mopen">(</span><span class="mop"><span class="mord mathrm">MNS</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)))</span></span></span></span></span></div><h2 id="qZydVG545bt81Xtzh5MRvb" class="wolai-block"><span class="inline-wrap">转移方程</span></h2><div id="wEwHyN2LooAtHTcVydiDrt" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/1358881-20191012130252321-1502493880.png" style="width: 100%"/></figure></div><h1 id="3SdYLpXpSVECNTReuuWRee" class="wolai-block"><span class="inline-wrap">来自<span class="jill"></span>WWZ：LIS<span class="jill"></span>转化</span></h1><div id="dVKHZnaTQ8ANkrcBYfTS1r" class="wolai-file-block wolai-block"><div class="file-icon" style="background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; width=&apos;24&apos; height=&apos;24&apos; viewBox=&apos;0 0 24 24&apos;%3E%3Cdefs%3E%3ClinearGradient x1=&apos;17.357%25&apos; y1=&apos;-6.509%25&apos; x2=&apos;82.643%25&apos; y2=&apos;106.509%25&apos; id=&apos;file-ppt_svg__a&apos;%3E%3Cstop stop-color=&apos;%23FFF&apos; stop-opacity=&apos;0.5&apos; offset=&apos;0%25&apos;%3E%3C/stop%3E%3Cstop stop-opacity=&apos;0.7&apos; offset=&apos;100%25&apos;%3E%3C/stop%3E%3C/linearGradient%3E%3C/defs%3E%3Cg fill=&apos;none&apos; fill-rule=&apos;evenodd&apos;%3E%3Cpath stroke=&apos;%23FFF&apos; stroke-linecap=&apos;round&apos; d=&apos;M9 19h6&apos;%3E%3C/path%3E%3Cg transform=&apos;translate(1 2)&apos;%3E%3Crect fill=&apos;%23D35230&apos; fill-rule=&apos;nonzero&apos; x=&apos;2.55&apos; y=&apos;0.99&apos; width=&apos;18.03&apos; height=&apos;18.03&apos; rx=&apos;9.01&apos;%3E%3C/rect%3E%3Cpath d=&apos;M11.56 1a9 9 0 00-9 9h9V1z&apos; fill=&apos;%23ED6C47&apos; fill-rule=&apos;nonzero&apos;%3E%3C/path%3E%3Cpath d=&apos;M11.56 1a9 9 0 019 9h-9V1z&apos; fill=&apos;%23FF8F6B&apos; fill-rule=&apos;nonzero&apos;%3E%3C/path%3E%3Cpath d=&apos;M20.17 7.33a9.71 9.71 0 00-.68-1.62 9.37 9.37 0 00-1-1.44 9 9 0 00-7-3.28 9 9 0 00-9 9 9 9 0 1017.62-2.67l.06.01z&apos; opacity=&apos;0.5&apos; style=&apos;mix-blend-mode: overlay;&apos;%3E%3C/path%3E%3Crect fill=&apos;%23C43E1C&apos; fill-rule=&apos;nonzero&apos; x=&apos;0.86&apos; y=&apos;4.93&apos; width=&apos;10.14&apos; height=&apos;10.14&apos; rx=&apos;0.85&apos;%3E%3C/rect%3E%3Crect x=&apos;0.86&apos; y=&apos;0.93&apos; width=&apos;10.14&apos; height=&apos;10.14&apos; rx=&apos;0.85&apos; opacity=&apos;0.5&apos; transform=&apos;translate(0 4)&apos; fill=&apos;url(%23file-ppt_svg__a)&apos; fill-rule=&apos;nonzero&apos;%3E%3C/rect%3E%3Cpath d=&apos;M6 7.25a2.29 2.29 0 011.5.44c.362.335.547.82.5 1.31a1.68 1.68 0 01-1 1.6 2.41 2.41 0 01-1.1.23h-1v1.95H3.83v-5.5L6 7.25zM4.9 10h.92c.292.019.58-.07.81-.25a.91.91 0 00.28-.71c0-.6-.36-.91-1.06-.91H4.9V10z&apos; fill=&apos;%23FFF&apos; fill-rule=&apos;nonzero&apos;%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/svg%3E&quot;);"></div><a href="media/%E8%AF%BE%E5%A4%96%E6%80%9D%E8%80%83%E9%A2%981019%E5%88%86%E4%BA%AB-wwz%20(1).pptx"><span>课外思考题1019分享-wwz (1).pptx</span><span data-size="6.49 MB" class="file-size"></span></a></div><div id="rymQDyhvLjGE4KKQaWgSRg" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/image.png" style="width: 628px"/></figure></div><h2 id="s2nawAVRg8mecMSnX27zqu" class="wolai-block"><span class="inline-wrap">代码</span></h2><code-block id="omyi1dihC3CdjsUe5k65kq" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    int <span class="token function">lengthOfLIS</span><span class="token punctuation">(</span><span class="token parameter">vector<span class="token operator">&lt;</span>int<span class="token operator">></span><span class="token operator">&amp;</span> nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    int dp<span class="token punctuation">[</span><span class="token number">2550</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">2500</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  int ans<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">&lt;</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    ans<span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//cout&lt;&lt;dp[i]&lt;&lt;endl;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> ans<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre></div></code-block><h2 id="dXaNUWXhek2xD4ma3YCy8v" class="wolai-block"><span class="inline-wrap">测试结果</span></h2><div id="5zi8ncuzMAEBLvznMD6Hg9" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/image_1.png" style="width: 232.8px"/></figure></div><h1 id="9ofLfYe3e1QdDk7eP94zCh" class="wolai-block"><span class="inline-wrap">优化与改进：Patience sorting （nlogn<span class="jill"></span>的<span class="jill"></span>LIS<span class="jill"></span>算法）</span></h1><div id="eDx9wie8zpquMBY8VES3Xw" class="wolai-bookmark wolai-block"><a href="https://en.wikipedia.org/wiki/Patience_sorting">https://en.wikipedia.org/wiki/Patience_sorting</a><div class="info-box"><div class="text-pane"><div data-title="en.wikipedia.org"></div><div class="icon-host"><div data-hostname="en.wikipedia.org"></div></div></div><div class="preview-pane"></div></div></div><blockquote id="gTvFu3iphfTUZhgwyhZHMo" class="wolai-block"><span class="inline-wrap">In </span><span class="inline-wrap"><a href="https://en.wikipedia.org/wiki/Computer_science"><span>computer science</span></a></span><span class="inline-wrap">, </span><span class="inline-wrap"><b>patience sorting</b></span><span class="inline-wrap"> is a </span><span class="inline-wrap"><a href="https://en.wikipedia.org/wiki/Sorting_algorithm"><span>sorting algorithm</span></a></span><span class="inline-wrap"> inspired by, and named after, the card game </span><span class="inline-wrap"><a href="https://en.wikipedia.org/wiki/Patience_(game)"><span>patience</span></a></span><span class="inline-wrap">. A variant of the algorithm efficiently computes the length of a </span><span class="inline-wrap"><a href="https://en.wikipedia.org/wiki/Longest_increasing_subsequence"><span>longest increasing subsequence</span></a></span><span class="inline-wrap"> in a given </span><span class="inline-wrap"><a href="https://en.wikipedia.org/wiki/Array_data_structure"><span>array</span></a></span><span class="inline-wrap">.</span><div id="atzt7MEAkhQ6NaHbg2zLJT" class="wolai-block wolai-text"><div><span class="inline-wrap">Patience sorting was named by C. L. Mallows, who attributed its invention to A.S.C. Ross in the early 1960s.</span><span class="inline-wrap"><a href="https://en.wikipedia.org/wiki/Patience_sorting#cite_note-Chandramouli-1"><span>[1]</span></a></span><span class="inline-wrap"> According to Aldous and Diaconis,</span><span class="inline-wrap"><a href="https://en.wikipedia.org/wiki/Patience_sorting#cite_note-Aldous-4"><span>[4]</span></a></span><span class="inline-wrap"> patience sorting was first recognized as an algorithm to compute the longest increasing subsequence length by Hammersley.</span><span class="inline-wrap"><a href="https://en.wikipedia.org/wiki/Patience_sorting#cite_note-5"><span>[5]</span></a></span><span class="inline-wrap"> A.S.C. Ross and independently </span><span class="inline-wrap"><a href="https://en.wikipedia.org/wiki/Robert_W._Floyd"><span>Robert W. Floyd</span></a></span><span class="inline-wrap"> recognized it as a sorting algorithm. Initial analysis was done by Mallows.</span><span class="inline-wrap"><a href="https://en.wikipedia.org/wiki/Patience_sorting#cite_note-6"><span>[6]</span></a></span><span class="inline-wrap"> Floyd&#39;s game was developed by Floyd in correspondence with </span><span class="inline-wrap"><a href="https://en.wikipedia.org/wiki/Donald_Knuth"><span>Donald Knuth</span></a></span><span class="inline-wrap">.</span><span class="inline-wrap"><a href="https://en.wikipedia.org/wiki/Patience_sorting#cite_note-Burstein-2"><span>[2]</span></a></span></div></div></blockquote><aside id="ss7gowf1CmtJ1QiBoPMW8g" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap">关于这个应该是有一篇论文的，可惜学校没有买。（所以理直气壮的摆烂）</span><div id="ph6VPv7auFvzZwpqMVwpJg" class="wolai-block"><figure class="wolai-left" style="width: 100%"><img src="media/image_2.png" style="width: 210px"/></figure></div><div id="xr4sddMvemm2SEi3Wkp7SC" class="wolai-bookmark wolai-block"><a href="https://www.webofscience.com/wos/alldb/full-record/WOS:000454714600072">Web of Science</a><div class="info-box"><div class="text-pane"><div data-title="Web of Science"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://www.webofscience.com/wos/static/favicon.png&quot;)"></div><div data-hostname="www.webofscience.com"></div></div></div><div class="preview-pane"></div></div></div><blockquote id="sZ5pMgip3cXV38CBaTTNon" class="wolai-block"><span class="inline-wrap"><b>我们重新审视了在主存储器中排序和合并数据的问题，并展示了一种被称为耐心排序的长期被遗忘的技术，经过一些关键的修改，可以与当今最好的基于比较的随机和几乎排序数据的排序技术竞争。耐心排序包括两个阶段：排序运行的创建和这些运行的合并。通过算法和架构创新的结合，我们显着改进了随机和几乎有序数据的耐心排序。特别感兴趣的是一种称为乒乓合并的新技术，用于合并主内存中的排序运行。一起，这些创新产生了一种极快的排序技术，我们称之为 P3 排序（Ping-Pong Patience+ Sort），它与当今最快的基于比较的排序技术的流行实现具有竞争力或更好。</b></span><span class="inline-wrap">例如，</span><span class="inline-wrap"><b>我们的 P3 排序实现在随机数据上比 GNU Quicksort 快 20% 左右，在几乎排序的数据上比 Timsort 快 20% 到 4 倍。</b></span></blockquote></aside><aside id="8ynXUyDmEo9sYE6kFfZAbU" class="wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap">GOOD NEWS</span><h2 id="975xHViYYCh5bLTgYRZijG" class="wolai-block"><span class="inline-wrap">我们有一篇很好的博文</span></h2><div id="eY496riwTvCFU4fSXBadd5" class="wolai-bookmark wolai-block"><a href="https://www.geeksforgeeks.org/longest-monotonically-increasing-subsequence-size-n-log-n/">Longest Increasing Subsequence Size (N log N) - GeeksforGeeks</a><div class="info-box"><div class="text-pane"><div data-title="Longest Increasing Subsequence Size (N log N) - GeeksforGeeks"></div><div data-desc="A Computer Science portal for geeks. It contains well written, well thought and well explained computer science and programming articles, quizzes and practice/competitive programming/company interview"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://www.geeksforgeeks.org/wp-content/uploads/gfg_200X200.png&quot;)"></div><div data-hostname="www.geeksforgeeks.org"></div></div></div><div class="preview-pane" style="background-image: url(https://media.geeksforgeeks.org/wp-content/cdn-uploads/20220616153649/CIP5.png)"></div></div></div></aside><h2 id="oBiLtSDR5xeXAyTCMKvYGf" class="wolai-block"><span class="inline-wrap">算法思想</span></h2><ul class="wolai-block"><li id="sSBZ43HyrRqgzzuUJaVS39"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>我们有一组数列：</mtext><mi>A</mi><mo stretchy="false">[</mo><mo stretchy="false">]</mo><mo>=</mo><mrow><mn>0</mn><mo separator="true">,</mo><mn>8</mn><mo separator="true">,</mo><mn>4</mn><mo separator="true">,</mo><mn>12</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>10</mn><mo separator="true">,</mo><mn>6</mn><mo separator="true">,</mo><mn>14</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>9</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mn>13</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>11</mn><mo separator="true">,</mo><mn>7</mn><mo separator="true">,</mo><mn>15</mn></mrow></mrow><annotation encoding="application/x-tex">我们有一组数列：A[]={0, 8, 4, 12, 2, 10, 6, 14, 1, 9, 5, 13, 3, 11, 7, 15}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">我们有一组数列：</span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">12</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">10</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">14</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">9</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">13</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">11</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">15</span></span></span></span></span></span></li><li id="5frr9KTewhZWAxXM8QWq4o"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>我们的算法将会维护一组</mtext></mrow><annotation encoding="application/x-tex">我们的算法将会维护一组 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">我们的算法将会维护一组</span></span></span></span></span><span class="inline-wrap"><code>动态列表<span class="jill"></span>active lists</code></span><span class="inline-wrap"> </span></li></ul><div id="chyhXfR6yPGhh2BFx4a7MH" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div id="hUciamwopfbyempA6H3pzt" class="wolai-block wolai-text"><div><span class="inline-wrap"><b>ATTENTION</b></span><span class="inline-wrap">为了方便展示算法，把<span class="jill"></span>list<span class="jill"></span>每一行的最后一个元素单独开了一列数组</span><span class="inline-wrap"><b><code>end</code></b></span><span class="inline-wrap">，也就是是其实这一列和上一列的</span><span class="inline-wrap"><code>active lists</code></span><span class="inline-wrap">共同组成完整的一列</span></div></div><div id="9bGD6YtGgZ619errHpVTDX" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><ul class="wolai-block"><li id="t3M5YWnbmSYkYew42Kd3AY"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>维护方式</mtext></mrow><annotation encoding="application/x-tex">维护方式</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">维护方式</span></span></span></span></span><span class="inline-wrap">：</span><ul class="wolai-block"><li id="nohcBxesMGeRibkaoGqfU"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>o</mi><mi>r</mi><mtext> </mtext><mi>i</mi><mtext> </mtext><mi>f</mi><mi>o</mi><mi>r</mi><mi>m</mi><mtext> </mtext><mn>1</mn><mtext> </mtext><mi>t</mi><mi>o</mi><mtext> </mtext><mi>l</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">for \ i \ form\ 1\ to \ length(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mspace"> </span><span class="mord mathnormal">i</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mord mathnormal">m</span><span class="mspace"> </span><span class="mord">1</span><span class="mspace"> </span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mclose">)</span></span></span></span></span><ol class="wolai-block"><li id="q9m5vDwfYTHJggMQBnxUyS"><div class="marker"></div><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>f</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mtext> </mtext><mi>i</mi><mi>s</mi><mtext> </mtext><mi>l</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><mi>s</mi><mi>t</mi><mtext> </mtext><mi>a</mi><mi>m</mi><mi>o</mi><mi>n</mi><mi>g</mi><mtext> </mtext></mrow><annotation encoding="application/x-tex">if(A[i] \ is\ largest\ among\ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace"> </span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">es</span><span class="mord mathnormal">t</span><span class="mspace"> </span><span class="mord mathnormal">am</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace"> </span></span></span></span></span><span class="inline-wrap"><code>all </code></span><span class="inline-wrap"><b><code>end</code></b></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>f</mi><mtext> </mtext></mrow><annotation encoding="application/x-tex">of \ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace"> </span></span></span></span></span><span class="inline-wrap"><code>active lists</code></span><span class="inline-wrap">）</span><div id="6LexcvMsKq6HMd9V995yiM" class="wolai-block wolai-text"><div><span class="inline-wrap"><b><code>end</code></b></span><span class="inline-wrap">[length ++] = A[i]</span></div></div></li><li id="nhED94MPSh7zcAsrho5J3g"><div class="marker"></div><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>f</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mtext> </mtext><mi>i</mi><mi>s</mi><mtext> </mtext><mi>s</mi><mi>m</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><mi>s</mi><mi>t</mi><mtext> </mtext><mi>a</mi><mi>m</mi><mi>o</mi><mi>n</mi><mi>g</mi><mtext> </mtext></mrow><annotation encoding="application/x-tex">if(A[i] \ is\ smallest\ among\ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace"> </span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mspace"> </span><span class="mord mathnormal">s</span><span class="mord mathnormal">ma</span><span class="mord mathnormal" style="margin-right:0.01968em;">ll</span><span class="mord mathnormal">es</span><span class="mord mathnormal">t</span><span class="mspace"> </span><span class="mord mathnormal">am</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace"> </span></span></span></span></span><span class="inline-wrap"><code>all </code></span><span class="inline-wrap"><b><code>end</code></b></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>f</mi><mtext> </mtext></mrow><annotation encoding="application/x-tex">of \ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace"> </span></span></span></span></span><span class="inline-wrap"><code>active lists</code></span><span class="inline-wrap">）</span><div id="tPb1h68G6v9srCmQyVDMkP" class="wolai-block wolai-text"><div><span class="inline-wrap"><b><code>end</code></b></span><span class="inline-wrap">[1] = A[i]</span></div></div></li><li id="sX7nD6J2jpzZB6xtpa2dPD"><div class="marker"></div><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>f</mi><mtext> </mtext><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>&lt;</mo><mo>=</mo><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mi mathvariant="normal">&amp;</mi><mi mathvariant="normal">&amp;</mi><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>&gt;</mo><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy="false">[</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">if\ (A[i]&lt;=end[j]\&amp;\&amp;A[i]&gt;end[j-1])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mord">&amp;&amp;</span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">])</span></span></span></span></span><div id="exHbzXMN8ZtzcUKPj5S8qj" class="wolai-block wolai-text"><div><span class="inline-wrap"><b><code>end</code></b></span><span class="inline-wrap">[j]=A[i]</span></div></div></li></ol></li></ul></li></ul><div id="rM2v6pBgQjits1wEdNxZnV" class="wolai-block wolai-text"><div><span class="inline-wrap">A[]={0, 8, 4, 12, 2, 10, 6, 14, 1, 9, 5, 13, 3, 11, 7, 15}</span></div></div><div id="9GxN49XYKqCgw8YUnKk5j4" class="wolai-row"><div id="7hNHZhHxi8RHLKqozVqCcq" class="wolai-col" style="flex-grow: 0.5"><h4 id="v8qFQcQpW5yqE4LevJzZyF" class="wolai-block"><span class="inline-wrap">LOOP1</span></h4><div id="4nH4Fjt9mTJnepLJyJmdC7" class="wolai-block wolai-simple-table"><table><tbody><tr><td style="width: 100px"><span class="inline-wrap">A[0]</span></td><td style="width: 159px"><span class="inline-wrap">0</span></td><td style="width: 88px"><span class="inline-wrap">case 2</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">长度</span></td><td style="width: 159px"><span class="inline-wrap"><code>active lists</code></span></td><td style="width: 88px"><span class="inline-wrap"><b><code>end</code></b></span></td></tr><tr><td class="bg-blond" style="width: 100px"><span class="inline-wrap">1</span></td><td class="bg-blond" style="width: 159px"><span class="inline-wrap">/</span></td><td class="bg-blond" style="width: 88px"><span class="inline-wrap">0</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">2</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">3</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">4</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">5</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">6</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">……</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr><tr><td style="width: 100px"><span class="inline-wrap">lenth(A)</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr></tbody></table></div></div><div id="6Q4zsTib7xsCuBTPzkqq26" class="wolai-col" style="flex-grow: 0.5"><h4 id="5kAoLUFJrp2fX2J1eKbj92" class="wolai-block"><span class="inline-wrap">LOOP2</span></h4><div id="bMn7B7sdvP1HpBRBPoJbhh" class="wolai-block wolai-simple-table"><table><tbody><tr><td style="width: 100px"><span class="inline-wrap">A[1]</span></td><td style="width: 159px"><span class="inline-wrap">8</span></td><td style="width: 88px"><span class="inline-wrap">case 1</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">长度</span></td><td style="width: 159px"><span class="inline-wrap"><code>active lists</code></span></td><td style="width: 88px"><span class="inline-wrap"><b><code>end</code></b></span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">1</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">0</span></td></tr><tr><td class="bg-blond" style="width: 100px"><span class="inline-wrap">2</span></td><td class="bg-blond" style="width: 159px"><span class="inline-wrap">0</span></td><td class="bg-blond" style="width: 88px"><span class="inline-wrap">8</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">3</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">4</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">5</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">6</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">……</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr><tr><td style="width: 100px"><span class="inline-wrap">lenth(A)</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr></tbody></table></div></div></div><div id="qT2Gubbi5HJ7GvTG6CbNrT" class="wolai-row"><div id="aFqJ2BGoRxRDQ44Q45sg29" class="wolai-col" style="flex-grow: 0.5"><h4 id="nYkMmG3oJvidMx8xi8hHRG" class="wolai-block"><span class="inline-wrap">LOOP3</span></h4><div id="u7sbJUJ1spBuo7D3ZhQ1cW" class="wolai-block wolai-simple-table"><table><tbody><tr><td style="width: 100px"><span class="inline-wrap">A[2]</span></td><td style="width: 159px"><span class="inline-wrap">4</span></td><td style="width: 88px"><span class="inline-wrap">case 3</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">长度</span></td><td style="width: 159px"><span class="inline-wrap"><code>active lists</code></span></td><td style="width: 88px"><span class="inline-wrap"><b><code>end</code></b></span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">1</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">0</span></td></tr><tr><td class="bg-blond" style="width: 100px"><span class="inline-wrap">2</span></td><td class="bg-blond" style="width: 159px"><span class="inline-wrap">0</span></td><td class="bg-blond" style="width: 88px"><span class="inline-wrap">4</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">3</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">4</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">5</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">6</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">……</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr><tr><td style="width: 100px"><span class="inline-wrap">lenth(A)</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr></tbody></table></div></div><div id="wYrVNXVUfdrf7PHYytwBLX" class="wolai-col" style="flex-grow: 0.5"><h4 id="ihaxQNj2qUX13B4ZCvg38B" class="wolai-block"><span class="inline-wrap">LOOP4</span></h4><div id="wk8KmmrLAcQh1NFMBJYfT3" class="wolai-block wolai-simple-table"><table><tbody><tr><td style="width: 100px"><span class="inline-wrap">A[3]</span></td><td style="width: 159px"><span class="inline-wrap">12</span></td><td style="width: 88px"><span class="inline-wrap">case 1</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">长度</span></td><td style="width: 159px"><span class="inline-wrap"><code>active lists</code></span></td><td style="width: 88px"><span class="inline-wrap"><b><code>end</code></b></span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">1</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">0</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">2</span></td><td style="width: 159px"><span class="inline-wrap">0</span></td><td style="width: 88px"><span class="inline-wrap">4</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">3</span></td><td class="bg-blond" style="width: 159px"><span class="inline-wrap">0,4</span></td><td class="bg-blond" style="width: 88px"><span class="inline-wrap">12</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">4</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">5</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">6</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">……</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr><tr><td style="width: 100px"><span class="inline-wrap">lenth(A)</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr></tbody></table></div></div></div><div id="c7uowUeWSVr6rLqcANT4TU" class="wolai-row"><div id="mSLtQocarrasTaCkyzY4ri" class="wolai-col" style="flex-grow: 0.5"><h4 id="cepxVLXneCcqvxPXVqcKxC" class="wolai-block"><span class="inline-wrap">LOOP5</span></h4><div id="stMdE8noFUzGPFUgL6hVbF" class="wolai-block wolai-simple-table"><table><tbody><tr><td style="width: 100px"><span class="inline-wrap">A[4]</span></td><td style="width: 159px"><span class="inline-wrap">2</span></td><td style="width: 88px"><span class="inline-wrap">case 3</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">长度</span></td><td style="width: 159px"><span class="inline-wrap"><code>active lists</code></span></td><td style="width: 88px"><span class="inline-wrap"><b><code>end</code></b></span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">1</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">0</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">2</span></td><td class="bg-blond" style="width: 159px"><span class="inline-wrap">0</span></td><td class="bg-blond" style="width: 88px"><span class="inline-wrap">2</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">3</span></td><td style="width: 159px"><span class="inline-wrap">0,4</span></td><td style="width: 88px"><span class="inline-wrap">12</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">4</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">5</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">6</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">……</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr><tr><td style="width: 100px"><span class="inline-wrap">lenth(A)</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr></tbody></table></div></div><div id="mfSC1UukFfJ2kkd9iMiPAX" class="wolai-col" style="flex-grow: 0.5"><h4 id="9fDGoNMP3G56RfR6rhb8BB" class="wolai-block"><span class="inline-wrap">LOOP6</span></h4><div id="97SYchi47UnN2jtC9ctK5K" class="wolai-block wolai-simple-table"><table><tbody><tr><td style="width: 100px"><span class="inline-wrap">A[5]</span></td><td style="width: 159px"><span class="inline-wrap">10</span></td><td style="width: 88px"><span class="inline-wrap">case 3</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">长度</span></td><td style="width: 159px"><span class="inline-wrap"><code>active lists</code></span></td><td style="width: 88px"><span class="inline-wrap"><b><code>end</code></b></span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">1</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">0</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">2</span></td><td style="width: 159px"><span class="inline-wrap">0</span></td><td style="width: 88px"><span class="inline-wrap">2</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">3</span></td><td class="bg-blond" style="width: 159px"><span class="inline-wrap">0,4</span></td><td class="bg-blond" style="width: 88px"><span class="inline-wrap">10</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">4</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">5</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">6</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">……</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr><tr><td style="width: 100px"><span class="inline-wrap">lenth(A)</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr></tbody></table></div></div></div><div id="fXXRs49aL8g4bPR8btGZN9" class="wolai-block wolai-text"><div><span class="inline-wrap">……</span></div></div><div id="mLuwCqs9DW5uh41vBmXFMe" class="wolai-row"><div id="5YS9RP1yDprF6njfHbRgSd" class="wolai-col" style="flex-grow: 0.5"><h4 id="2yhK25q2hBjQGfHku3adwj" class="wolai-block"><span class="inline-wrap">LOOP14</span></h4><div id="kUchE3GHqtMYFmyi8vDS6s" class="wolai-block wolai-simple-table"><table><tbody><tr><td style="width: 100px"><span class="inline-wrap">A[14]</span></td><td style="width: 159px"><span class="inline-wrap">7</span></td><td style="width: 88px"><span class="inline-wrap">case 3</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">长度</span></td><td style="width: 159px"><span class="inline-wrap"><code>active lists</code></span></td><td style="width: 88px"><span class="inline-wrap"><b><code>end</code></b></span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">1</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">0</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">2</span></td><td style="width: 159px"><span class="inline-wrap">0</span></td><td style="width: 88px"><span class="inline-wrap">1</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">3</span></td><td style="width: 159px"><span class="inline-wrap">0,1</span></td><td style="width: 88px"><span class="inline-wrap">3</span></td></tr><tr><td class="bg-blond" style="width: 100px"><span class="inline-wrap">4</span></td><td class="bg-blond" style="width: 159px"><span class="inline-wrap">0,1,3</span></td><td class="bg-blond" style="width: 88px"><span class="inline-wrap">7</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">5</span></td><td style="width: 159px"><span class="inline-wrap">0,2,6,9</span></td><td style="width: 88px"><span class="inline-wrap">11</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">6</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td style="width: 88px"><span class="inline-wrap">/</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">……</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr><tr><td style="width: 100px"><span class="inline-wrap">lenth(A)</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr></tbody></table></div></div><div id="n4vd26k9uihXZu7a7iENUd" class="wolai-col" style="flex-grow: 0.5"><h4 id="kD1b4vnyMgMBn4gBM6D3Cb" class="wolai-block"><span class="inline-wrap">LOOP15</span></h4><div id="ns6xz56ZLrgjUUW7i2J1Xt" class="wolai-block wolai-simple-table"><table><tbody><tr><td style="width: 100px"><span class="inline-wrap">A[15]</span></td><td style="width: 159px"><span class="inline-wrap">15</span></td><td style="width: 88px"><span class="inline-wrap">case 3</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">长度</span></td><td style="width: 159px"><span class="inline-wrap"><code>active lists</code></span></td><td style="width: 88px"><span class="inline-wrap"><b><code>end</code></b></span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">1</span></td><td style="width: 159px"><span class="inline-wrap">/</span></td><td class="bg-fluorescent_blue" style="width: 88px"><span class="inline-wrap">0</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">2</span></td><td style="width: 159px"><span class="inline-wrap">0</span></td><td class="bg-fluorescent_blue" style="width: 88px"><span class="inline-wrap">1</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">3</span></td><td style="width: 159px"><span class="inline-wrap">0,1</span></td><td class="bg-fluorescent_blue" style="width: 88px"><span class="inline-wrap">3</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">4</span></td><td style="width: 159px"><span class="inline-wrap">0,1,3</span></td><td class="bg-fluorescent_blue" style="width: 88px"><span class="inline-wrap">7</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">5</span></td><td style="width: 159px"><span class="inline-wrap">0,2,6,9</span></td><td class="bg-fluorescent_blue" style="width: 88px"><span class="inline-wrap">11</span></td></tr><tr><td class="bg-fluorescent_blue" style="width: 100px"><span class="inline-wrap">6</span></td><td class="bg-fluorescent_blue" style="width: 159px"><span class="inline-wrap">0,2,6,9,11</span></td><td class="bg-fluorescent_blue" style="width: 88px"><span class="inline-wrap">15</span></td></tr><tr><td style="width: 100px"><span class="inline-wrap">……</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr><tr><td style="width: 100px"><span class="inline-wrap">lenth(A)</span></td><td style="width: 159px"><span class="inline-wrap"></span><br/></td><td style="width: 88px"><span class="inline-wrap"></span><br/></td></tr></tbody></table></div><div id="kPpGeoZ3v5MQrKLpodTAJg" class="wolai-block wolai-text"><div></div></div></div></div><h2 id="2fp9T8KorHwUCx9bB2m6yF" class="wolai-block"><span class="inline-wrap">优化的优化：只留下</span><span class="inline-wrap"><code>end</code></span></h2><aside id="j7saHJyxExSA1h28NEcXfv" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap">由于一些我不配知道的原因</span></aside><div id="tgfyxH9KaQQhmF8nVWMxHD" class="wolai-block wolai-text"><div><span class="inline-wrap">我们观察这个算法可以发现，我们真正判断和修改的只有最后一位，也就是我们</span><span class="inline-wrap"><code>end</code></span><span class="inline-wrap">的那一列</span></div></div><div id="cnEVgkYzhsMS9mWT3qsfBQ" class="wolai-block wolai-text"><div><span class="inline-wrap">前面的</span><span class="inline-wrap"><code>active lists</code></span><span class="inline-wrap">中真正有用的数据只有最后一组中记录的答案：一个最长上升子序列！但是很显然这个最长上升子序列并不唯一，我们会发现当我们读取</span><span class="inline-wrap"><code>end</code></span><span class="inline-wrap">数组时，这里面也记录了一个最长上升子序列</span></div></div><div id="vpRZb3819fvJxiQhXGTuhx" class="wolai-block wolai-text"><div><span class="inline-wrap">也就是说，如果我们只需要得到</span><span class="inline-wrap"><code>LIS</code></span><span class="inline-wrap">的数量的话，或者只需要得到一组</span><span class="inline-wrap"><code>LIS</code></span><span class="inline-wrap">的话，我们只需要</span><span class="inline-wrap"><code>end</code></span><span class="inline-wrap">这个数组就够了！</span></div></div><h2 id="8rBqT1WWGvzJ8oxmvS7mG9" class="wolai-block"><span class="inline-wrap">优化的优化的优化：二分查找</span></h2><div id="ieXrFCZ2c2wt7uk3JRzcMN" class="wolai-block wolai-text"><div><span class="inline-wrap">当我们在讨论我们的</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>a</mi><mi>s</mi><mi>e</mi><mtext> </mtext><mn>3</mn></mrow><annotation encoding="application/x-tex">case \ 3
 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">a</span><span class="mord mathnormal">se</span><span class="mspace"> </span><span class="mord">3</span></span></span></span></span><span class="inline-wrap">时，</span></div></div><ul class="wolai-block"><li id="kaxF8cqC7hBmsfCYLxNTb9"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>f</mi><mtext> </mtext><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>&lt;</mo><mo>=</mo><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mi mathvariant="normal">&amp;</mi><mi mathvariant="normal">&amp;</mi><mi>A</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>&gt;</mo><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy="false">[</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">if\ (A[i]&lt;=end[j]\&amp;\&amp;A[i]&gt;end[j-1])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mord">&amp;&amp;</span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">])</span></span></span></span></span><div id="ja6GZSZh5ziWWBahq5evuv" class="wolai-block wolai-text"><div><span class="inline-wrap"><b><code>end</code></b></span><span class="inline-wrap">[j]=A[i]</span></div></div></li></ul><div id="pv2aZgAogmQPKRPZQSK8Fi" class="wolai-block wolai-text"><div><span class="inline-wrap">我们实际上在寻找一个<span class="jill"></span>end[]中的第一个比这个数字大的数的位置，并且用<span class="jill"></span>A[i]去替换掉他，我们的</span><span class="inline-wrap"><code>二分查找</code></span><span class="inline-wrap">在找到或者找不到目标数的时候恰好可以做到这个能力！</span></div></div><aside id="vEUgyDNjgpjJFGpnr7ARSc" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap">但是这里希望读者可以注意到，二分查找同时具备找下界和找上界的能力，需要处理好这个细节！</span><div id="ng7rEmfcd8t4KcF8SuNckQ" class="wolai-block wolai-text"><div><span class="inline-wrap">这种写法确保了<span class="jill"></span>nums[l]&lt;k,而<span class="jill"></span>nums[r]≥k  </span></div></div><div id="uhHLpCtBbAKuPcQSkYd5Q6" class="wolai-block wolai-text"><div><span class="inline-wrap">[     小     ][       同        ][    大     ]</span></div></div><div id="nFEYmpeKokavEv9ZuTKPvt" class="wolai-block wolai-text"><div><span class="inline-wrap">              l r</span></div></div><div id="kn1kkyW6oXYBRi4R545GRd" class="wolai-block wolai-text"><div><span class="inline-wrap">而如果写成了<span class="jill"></span>v[m]&gt;key(也就是<span class="jill"></span>l<span class="jill"></span>的条件换成了<span class="jill"></span>v[m]≤key</span></div></div><div id="5m6qhN8ZWvkSmwKUEPMH1d" class="wolai-block wolai-text"><div><span class="inline-wrap">那么 nums[l]≤k nums[r]&gt;k</span></div></div><div id="spsK9pgLrrgKHKcdorrZeM" class="wolai-block wolai-text"><div><span class="inline-wrap">[     小     ][       同        ][    大     ]</span></div></div><div id="bRT1UxdVRCEQiUsmzx87E3" class="wolai-block wolai-text"><div><span class="inline-wrap">                                  l r</span></div></div><div id="phoZgSH6ND57ZhzBBTe59r" class="wolai-block wolai-text"><div><span class="inline-wrap">就变成找右边界了</span></div></div><div id="wmkcjRmzaag4y4J8iAUonR" class="wolai-block wolai-text"><div><span class="inline-wrap">其中<span class="jill"></span>r-l&gt;1<span class="jill"></span>很重要 确保了可以退出</span></div></div></aside><code-block id="aJXtWJyDW5HCuzvvbfMmnf" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>int <span class="token function"><span class="token maybe-class-name">CeilIndex</span></span><span class="token punctuation">(</span><span class="token parameter">std<span class="token operator">:</span><span class="token operator">:</span>vector<span class="token operator">&lt;</span>int<span class="token operator">></span><span class="token operator">&amp;</span> v<span class="token punctuation">,</span> int l<span class="token punctuation">,</span> int r<span class="token punctuation">,</span> int key</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> 
  <span class="token punctuation">{</span>
    int m <span class="token operator">=</span> <span class="token punctuation">(</span>l<span class="token operator">+</span>r<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">>=</span> key<span class="token punctuation">)</span>
      r <span class="token operator">=</span> m<span class="token punctuation">;</span>
    <span class="token keyword control-flow">else</span>
      l <span class="token operator">=</span> m<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> r<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="tvCDzb6PXZPgNLPDUqauwd" class="wolai-block"><span class="inline-wrap">代码</span></h2><code-block id="8Q81PvvzBW7Dc5UxSx1q4" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>int <span class="token function">lengthOfLIS</span><span class="token punctuation">(</span><span class="token parameter">vector<span class="token operator">&lt;</span>int<span class="token operator">></span><span class="token operator">&amp;</span> nums</span><span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword control-flow">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        std<span class="token operator">:</span><span class="token operator">:</span>vector<span class="token operator">&lt;</span>int<span class="token operator">></span> <span class="token function">end</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        int length <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
        end<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
            <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> end<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
              end<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> end<span class="token punctuation">[</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
              end<span class="token punctuation">[</span>length<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword control-flow">else</span>
              end<span class="token punctuation">[</span><span class="token function"><span class="token maybe-class-name">CeilIndex</span></span><span class="token punctuation">(</span>end<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword control-flow">return</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</pre></div></code-block><aside id="84vDmyMiJ2TuuDrJESoxMh" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap"><b>这里还有一个问题：为什么要从-1<span class="jill"></span>开始查？</b></span><div id="g5HjQ6ju8yYaBq6EyjzL7n" class="wolai-block wolai-text"><div><span class="inline-wrap">不是-1<span class="jill"></span>会找不到第一个数</span></div></div><div id="54Ax2vXKhbhVH5vEPXQGws" class="wolai-block wolai-text"><div><span class="inline-wrap">比如只有两个数</span></div></div><div id="8cjgnecH5ZvDzBwcev6nSk" class="wolai-block wolai-text"><div><span class="inline-wrap">0  1</span></div></div><div id="9LwxM3VeiZABUM4W8MKUR8" class="wolai-block wolai-text"><div><span class="inline-wrap"><b>1  2</b></span></div></div><div id="b7gXNR6mYhRxEWSZW4syDC" class="wolai-block wolai-text"><div><span class="inline-wrap">l    r</span></div></div><div id="hqWfVWD4TGvHcdrCkbd4Y8" class="wolai-block wolai-text"><div><span class="inline-wrap">此时我们要寻找的数如果是<span class="jill"></span>1 那么循环直接退出了</span></div></div><div id="fmD8fTZQQEQV7bSfdtuHku" class="wolai-block wolai-text"><div><span class="inline-wrap">也就找不到<span class="jill"></span>r=1<span class="jill"></span>了</span></div></div></aside><aside id="m1XCYPVuyfs83ySwd6efcs" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap"><b>这里还还还有一个问题</b></span><div id="7kFK1VtSbbTn8Y2dKmX5po" class="wolai-block wolai-text"><div><span class="inline-wrap">end<span class="jill"></span>数组是从<span class="jill"></span>0<span class="jill"></span>存到<span class="jill"></span>c-1</span></div></div><div id="2XSnMDdcCqpiELRdseaqhc" class="wolai-block wolai-text"><div><span class="inline-wrap">长度是<span class="jill"></span>c</span></div></div></aside><aside id="j6farNQFn6YGZAuvy1NFFq" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap">不是吧我这写的是什么百转千回的代码啊</span><div id="nmF55HnyReAqK7rKGc7Ldx" class="wolai-block wolai-text"><div><span class="inline-wrap">拯救了一下我自己，虽然<span class="jill"></span>leetcodes<span class="jill"></span>默认从<span class="jill"></span>0<span class="jill"></span>开始存，但是我让我的<span class="jill"></span>end<span class="jill"></span>从<span class="jill"></span>1<span class="jill"></span>开始存了</span></div></div><div id="oRPphvp4bsPtC3WWVUQJgj" class="wolai-block wolai-text"><div><span class="inline-wrap">（这样才能和我画的图对上阿喂）</span></div></div><code-block id="54QoTU7ExvUrCWyFB1y8Fb" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>   int <span class="token function">lengthOfLIS</span><span class="token punctuation">(</span><span class="token parameter">vector<span class="token operator">&lt;</span>int<span class="token operator">></span><span class="token operator">&amp;</span> nums</span><span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword control-flow">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        std<span class="token operator">:</span><span class="token operator">:</span>vector<span class="token operator">&lt;</span>int<span class="token operator">></span> <span class="token function">end</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        int length <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
        end<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
            <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> end<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            end<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> end<span class="token punctuation">[</span>length<span class="token punctuation">]</span><span class="token punctuation">)</span>
                end<span class="token punctuation">[</span><span class="token operator">++</span>length<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword control-flow">else</span>
            end<span class="token punctuation">[</span><span class="token function"><span class="token maybe-class-name">CeilIndex</span></span><span class="token punctuation">(</span>end<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> length<span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword control-flow">return</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span></pre></div></code-block></aside><h2 id="3Yn5bAN4gsM87PA7NaSK8b" class="wolai-block"><span class="inline-wrap">结果</span></h2><div id="pFVvgrEFgX5BmsBfpGfx7v" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/image_3.png" style="width: 463.2px"/></figure></div><div id="rhxdUioX8odS1PYT1ynyGJ" class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>