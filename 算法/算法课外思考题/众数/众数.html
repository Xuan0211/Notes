<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>众数 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="众数" class="main-title"></div></div></header><article><h2 id="2Fnq6twucoxgiM8q7Nqx2E" class="wolai-block"><span class="inline-wrap">Reference</span></h2><div id="oakez89anMHBafDNWqouRc" class="wolai-block wolai-text"><div><span class="inline-wrap"><a href="https://leetcode.cn/problems/majority-element/solution/duo-shu-yuan-su-by-leetcode-solution/"><span>多数元素 - 多数元素 - 力扣（LeetCode）</span></a></span></div></div><h2 id="oWT6sqPeChEsXAE6Dj2Km3" class="wolai-block"><span class="inline-wrap">问题重述</span></h2><div id="eMcy5aeTKEdMDL6BfjgtMR" class="wolai-block wolai-text"><div><span class="inline-wrap">给出策略返回一系列数中的众数（majority number：出现次数不小于总数的一半），并进行性能分析。</span></div></div><h3 id="qe8cPSbzeWPGfnMitrV9yS" class="wolai-block"><span class="inline-wrap">另外一种对于众数的定义：</span></h3><div class="block-ref"><div class="decorator"></div><div id="b1t2GvCE14sTrhW8gpb92m" class="wolai-sub-page wolai-block"><div class="page-icon"></div><a href="https://www.wolai.com/b1t2GvCE14sTrhW8gpb92m"><span>22-数组-2-众数问题</span></a></div></div><h2 id="e3KspFagd6GQ2XAdfm5Pec" class="wolai-block"><span class="inline-wrap">算法分析</span></h2><h3 id="hdYE84yYbKsH9gbAhe6jhz" class="wolai-block"><span class="inline-wrap">算法一：暴力</span></h3><div id="nTBbSNsDJwY43jcbYSCHno" class="wolai-block wolai-text"><div><span class="inline-wrap">枚举数组中的每个元素，再遍历一遍数组统计其出现次数。该方法的时间复杂度是 </span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div></div><h3 id="vn1x5J1gR3h1PA8s1Ygveu" class="wolai-block"><span class="inline-wrap">算法二：Hash</span></h3><h4 id="4yuUFAEEyzxM54jZ9pFLDV" class="wolai-block"><span class="inline-wrap">基本思路</span></h4><div id="eZe3yctHvWbak9przsNukn" class="wolai-block wolai-text"><div><span class="inline-wrap">我们使用哈希映射（HashMap）来存储每个元素以及出现的次数。对于哈希映射中的每个键值对，键表示一个元素，值表示该元素出现的次数。</span></div></div><h4 id="iRAHKYLToandw7ww12DLUg" class="wolai-block"><span class="inline-wrap">在存储的同时，同时保存出现次数最大的那个数</span></h4><h4 id="v7gb3vWRqvHAM3WicKcuhD" class="wolai-block"><span class="inline-wrap">代码</span></h4><code-block id="5gDSdrVx8NsLirMHxhGKGk" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>int <span class="token function">majorityElement</span><span class="token punctuation">(</span><span class="token parameter">vector<span class="token operator">&lt;</span>int<span class="token operator">></span><span class="token operator">&amp;</span> nums</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
  int counts<span class="token punctuation">[</span>nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  int majority <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> maxx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> 
  <span class="token punctuation">{</span>
    <span class="token operator">++</span>counts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>counts<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> maxx<span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>
      majority <span class="token operator">=</span> i<span class="token punctuation">;</span>
      maxx <span class="token operator">=</span> counts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>maxx<span class="token operator">>=</span><span class="token punctuation">(</span>nums<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword control-flow">return</span> majority<span class="token punctuation">;</span>
  <span class="token keyword control-flow">else</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div></code-block><h4 id="trVVc4o8ZptuBN9okJcM9t" class="wolai-block"><span class="inline-wrap">性能分析</span></h4><div id="3gW8rPYSetQcxfJvKgvdEe" class="wolai-block wolai-text"><div><span class="inline-wrap">时间复杂度：</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></div></div><div id="tdqz7c2nzUsZuM4qkLoaBM" class="wolai-block wolai-text"><div><span class="inline-wrap">空间复杂度：</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">
O(n) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span><span class="inline-wrap"> </span></div></div><div id="f3xCS6m9DoPPUmPVHVmjN7" class="wolai-block wolai-text"><div><span class="inline-wrap">当众数存在时，哈希表最多包含</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>−</mo><mo stretchy="false">⌊</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>n</mi><mn>2</mn></mfrac></mstyle><mo stretchy="false">⌋</mo></mrow><annotation encoding="application/x-tex"> n - \lfloor \dfrac{n}{2} \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mopen">⌊</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.225em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.05em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">⌋</span></span></span></span></span><span class="inline-wrap">个数字</span></div></div><h3 id="6NdkfSgHMp3PmBnAnMWxym" class="wolai-block"><span class="inline-wrap">算法三：排序</span></h3><h4 id="6tkiVsktDQ98TPoqxxUDuq" class="wolai-block"><span class="inline-wrap">基本思路</span></h4><div id="be9Q2A6gnSonVNKaPwQkF2" class="wolai-block wolai-text"><div><span class="inline-wrap">如果将数组 nums 中的所有元素按照单调递增或单调递减的顺序排序，那么下标为 </span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">⌊</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>n</mi><mn>2</mn></mfrac></mstyle><mo stretchy="false">⌋</mo></mrow><annotation encoding="application/x-tex">\lfloor \dfrac{n}{2} \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mopen">⌊</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.225em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.05em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">⌋</span></span></span></span></span><span class="inline-wrap">的元素（下标从 0 开始）一定是众数。</span></div></div><div id="o2dRsP3BMHnsBqJergQGZD" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="https://pic.leetcode-cn.com/a70cb9316157ecd7eeffe7900d3ca83849079824964e8a0aaefbcffd4040f175-image.png" style="width: 533.6px"/></figure></div><h4 id="rUbXJ4c6cxtVUJ4tAQq2T9" class="wolai-block"><span class="inline-wrap">代码</span></h4><code-block id="te83ARFeSQhFYPs5VZywNK" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>int <span class="token function">majorityElement</span><span class="token punctuation">(</span><span class="token parameter">vector<span class="token operator">&lt;</span>int<span class="token operator">></span><span class="token operator">&amp;</span> nums</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
  <span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token method function property-access">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token method function property-access">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> nums<span class="token punctuation">[</span>nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="c6RQ9QBaBmctHqhhg4yFaH" class="wolai-block"><span class="inline-wrap">性能分析</span></h4><div id="n4kktuaWQMh3Tdf6N99EPe" class="wolai-block wolai-text"><div><span class="inline-wrap">时间复杂度：</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></div></div><div id="kTg7wyYWtPVYkS4NbuUZy2" class="wolai-block wolai-text"><div><span class="inline-wrap">空间复杂度：</span></div><div id="sm89jiMaE7S22MoHMp5rUK" class="wolai-block wolai-text"><div><span class="inline-wrap">如果用<span class="jill"></span>STL</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></div></div><div id="n8eL4ygWTAFM1vNGchNxjW" class="wolai-block wolai-text"><div><span class="inline-wrap">编写堆排序</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></div></div></div><h3 id="fWDfRprivwTAKqiy98auaV" class="wolai-block"><span class="inline-wrap">算法四：随机验证</span></h3><h4 id="qFrqnesHo2LGepnZDMu7LM" class="wolai-block"><span class="inline-wrap">基本思路</span></h4><div id="ieEfTEDxXsLG4DLMRwsr1" class="wolai-block wolai-text"><div><span class="inline-wrap">因为超过 </span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">⌊</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>n</mi><mn>2</mn></mfrac></mstyle><mo stretchy="false">⌋</mo></mrow><annotation encoding="application/x-tex">\lfloor \dfrac{n}{2} \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mopen">⌊</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.225em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.05em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">⌋</span></span></span></span></span><span class="inline-wrap">的数组下标被众数占据了，这样我们随机挑选一个下标对应的元素并验证，如果出现的次数大于</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>n</mi><mn>2</mn></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\dfrac{n}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.225em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.05em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span class="inline-wrap">则为众数</span></div></div><h4 id="ekfQxRXUfjxfvN5iNNujZs" class="wolai-block"><span class="inline-wrap">代码</span></h4><code-block id="vdoQhi6XCukbimjHhzsp5S" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>   int <span class="token function">majorityElement</span><span class="token punctuation">(</span><span class="token parameter">vector<span class="token operator">&lt;</span>int<span class="token operator">></span><span class="token operator">&amp;</span> nums</span><span class="token punctuation">)</span> 
   <span class="token punctuation">{</span>
        <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
            int candidate <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            int count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> candidate<span class="token punctuation">)</span>
                    <span class="token operator">++</span>count<span class="token punctuation">;</span>
            <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
                <span class="token keyword control-flow">return</span> candidate<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword control-flow">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></pre></div></code-block><h4 id="3paruqfGrWVicPrkJ1XkiJ" class="wolai-block"><span class="inline-wrap">性能分析</span></h4><div id="7gTJCiBHtSMXdv4E5mSyxR" class="wolai-block wolai-text"><div><span class="inline-wrap">时间复杂度</span><span class="inline-wrap"> </span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></div><div id="x96QVyNoWyHXVGLaQ6d3AF" class="wolai-block wolai-text"><div><span class="inline-wrap">理论上最坏情况</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi mathvariant="normal">∞</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\infty)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">∞</span><span class="mclose">)</span></span></span></span></span></div></div><div id="eyPtqYTZQbpY6ARG9jm9aC" class="wolai-block wolai-text"><div><span class="inline-wrap">计算随机的期望次数（下标为 prob 为原问题，mod 为众数恰好占据数组一半数目的问题）：</span></div><div id="ik3VvehxA1p7BQoEgiQ7ge" class="wolai-block wolai-text"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left right left" columnspacing="0em 1em 0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>E</mi><mo stretchy="false">(</mo><mtext mathvariant="italic">iters</mtext><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>b</mi></mrow><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≤</mo><mi>E</mi><mo stretchy="false">(</mo><mtext mathvariant="italic">iters</mtext><mrow><mi>m</mi><mi>o</mi><mi>d</mi></mrow><mo stretchy="false">)</mo><mtext> </mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>=</mo><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>n</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow></munder><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>i</mi><mo>⋅</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>i</mi></msup></mfrac><mtext> </mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>2</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} E(\textit{iters}{prob}) &amp;\leq E(\textit{iters}{mod}) \ &amp;= \lim_{n\to\infty} \sum_{i=1}^{n} i \cdot \frac{1}{2^i} \ &amp;= 2 \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.2291em;vertical-align:-1.3645em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8645em;"><span style="top:-3.8645em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord text"><span class="mord textit">iters</span></span><span class="mord"><span class="mord mathnormal">p</span><span class="mord mathnormal">ro</span><span class="mord mathnormal">b</span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3645em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8645em;"><span style="top:-3.8645em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord text"><span class="mord textit">iters</span></span><span class="mord"><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span></span><span class="mclose">)</span><span class="mspace"> </span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3645em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8645em;"><span style="top:-3.8645em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-2.4em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">→</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">lim</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7507em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.225em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.05em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace"> </span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3645em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8645em;"><span style="top:-3.8645em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3645em;"><span></span></span></span></span></span></span></span></span></span></span></span></div><div id="e1jbiVHRScU1jHWPGBx9KV" class="wolai-block wolai-text"><div><span class="inline-wrap">计算方法为：当众数恰好占据数组的一半时，第一次随机我们有 </span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{2} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.225em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.05em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span class="inline-wrap">的概率找到众数，如果没有找到，则第二次随机时，包含上一次我们有 </span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>4</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{4} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.225em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.05em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span class="inline-wrap">的概率找到众数，以此类推。因此期望的次数为 </span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>i</mi><mo>⋅</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>i</mi></msup></mfrac></mrow><annotation encoding="application/x-tex">\sum_{i=1}^{n} i \cdot \frac{1}{2^i} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2001em;vertical-align:-0.355em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.645em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7571em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.225em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.05em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.355em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></div></div><div id="ncFj77iaBtCh9rUJPtMMpn" class="wolai-block wolai-text"><div><span class="inline-wrap">每一次随机后，我们需要</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span><span class="inline-wrap">的时间判断这个数是否为众数</span></div></div></div><div id="cJutJvX1ERPE3LLH65xYjL" class="wolai-block wolai-text"><div><span class="inline-wrap">空间复杂度：O(1)</span></div></div><h3 id="rnzoTayAvD3ENs34X8288g" class="wolai-block"><span class="inline-wrap">算法五：分治</span></h3><h4 id="8vEUdfMdHsSzMQveYbqXxE" class="wolai-block"><span class="inline-wrap">基本思路</span></h4><div id="2QTsRJmckXUxhNGGgudutu" class="wolai-block wolai-text"><div><span class="inline-wrap">如果数 a 是数组 nums 的众数，如果我们将 nums 分成两部分，那么 a 必定是至少一部分的众数。</span></div></div><h4 id="b9TXRTpdRQ8NZWDZtWBivt" class="wolai-block"><span class="inline-wrap">证明</span></h4><div id="4kxPUYW1TkY9Txjv4Wttgw" class="wolai-block wolai-text"><div><span class="inline-wrap">反证法：</span></div><ol class="wolai-block"><li id="6qazG9LwADEWdN8iQwQLkQ"><div class="marker"></div><span class="inline-wrap">假设 a 既不是左半部分的众数，也不是右半部分的众数，那么 a 出现的次数少于 l / 2 + r / 2 次，其中 l 和 r 分别是左半部分和右半部分的长度。</span></li><li id="95sCe7qFjYtbHyqGLytqwZ"><div class="marker"></div><span class="inline-wrap">由于 l / 2 + r / 2 &lt;= (l + r) / 2，说明 a 也不是数组 nums 的众数</span></li><li id="rdp8oYniatibhmDF14dyDv"><div class="marker"></div><span class="inline-wrap">矛盾</span></li></ol></div><h4 id="2JEyso5dLxiE9TQFzJrYAp" class="wolai-block"><span class="inline-wrap">代码</span></h4><code-block id="q4x1Kd8pyEsw5yETbEiLzG" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Majority_Element</span>
<span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
  vector <span class="token operator">&lt;</span>int<span class="token operator">></span> mynums<span class="token punctuation">;</span>
  int <span class="token function">mycount</span><span class="token punctuation">(</span><span class="token parameter">int left<span class="token punctuation">,</span> int right<span class="token punctuation">,</span> int num</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    int ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> left<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> right<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>mynums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> num<span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        ans<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> ans<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  int <span class="token function">search</span><span class="token punctuation">(</span><span class="token parameter">int left<span class="token punctuation">,</span> int right<span class="token punctuation">,</span> int<span class="token operator">&amp;</span> count</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">//出口</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>left <span class="token operator">==</span> right<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>mynums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//分</span>
    int majl<span class="token punctuation">,</span> majr<span class="token punctuation">;</span>
    int countl<span class="token punctuation">,</span> countr<span class="token punctuation">;</span>
    majl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">search</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> <span class="token punctuation">(</span>right <span class="token operator">+</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> countl<span class="token punctuation">)</span><span class="token punctuation">;</span>
    majr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">(</span>right <span class="token operator">+</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">,</span> countr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//合</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>majl <span class="token operator">==</span> majr<span class="token punctuation">)</span><span class="token comment">//如果左右区间返回的众数是一样的</span>
    <span class="token punctuation">{</span>
      count <span class="token operator">=</span> countl <span class="token operator">+</span> countr<span class="token punctuation">;</span>
      <span class="token keyword control-flow">return</span> majl<span class="token punctuation">;</span><span class="token comment">//直接返回</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">else</span><span class="token comment">//如果不一样，则返回比较大的那一个</span>
    <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>countl <span class="token operator">></span> countr<span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        count <span class="token operator">=</span> countl <span class="token operator">+</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">mycount</span><span class="token punctuation">(</span><span class="token punctuation">(</span>right <span class="token operator">+</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">,</span> majl<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//注意要在另一侧区间对没记上的数重新计数</span>
        <span class="token keyword control-flow">return</span> majl<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword control-flow">else</span>
      <span class="token punctuation">{</span>
        count <span class="token operator">=</span> countr <span class="token operator">+</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">mycount</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> <span class="token punctuation">(</span>right <span class="token operator">+</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> majr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">return</span> majr<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token keyword">public</span><span class="token operator">:</span>
  int <span class="token function">majorityElement</span><span class="token punctuation">(</span><span class="token parameter">vector<span class="token operator">&lt;</span>int<span class="token operator">></span><span class="token operator">&amp;</span> nums</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    mynums <span class="token operator">=</span> nums<span class="token punctuation">;</span><span class="token comment">//直接深拷贝vector</span>
    int count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> mynums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre></div></code-block><h4 id="fFKoRHWRqqqVoXyJ45FXuQ" class="wolai-block"><span class="inline-wrap">测试与验证</span></h4><div id="2w4u1bpKwuzasBJtbbxJFD" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/image.png" style="width: 422.4px"/></figure></div><h4 id="8KNJY9WrHmw8uJZiLN2Rwx" class="wolai-block"><span class="inline-wrap">复杂度分析</span></h4><div id="9FSqqCbZnGRS7HBuzYqEcJ" class="wolai-block wolai-text"><div><span class="inline-wrap">时间复杂度：</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span><span class="inline-wrap"> </span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mn>2</mn><mi>T</mi><mo stretchy="false">(</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn><mi>n</mi></mrow><annotation encoding="application/x-tex">T(n) = 2T(\frac{n}{2}) + 2n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.095em;vertical-align:-0.345em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.225em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.05em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mord mathnormal">n</span></span></span></span></span></div></div><div id="fSJpoESNxp3NtAQwGDdbZJ" class="wolai-block wolai-text"><div><span class="inline-wrap">空间复杂度：</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span><span class="inline-wrap">在递归的过程中使用了额外的栈空间</span></div></div><h3 id="pDdV9BwSJai7FWqpY9bzQg" class="wolai-block"><span class="bg-blond inline-wrap">算法六：Boyer-Moore 投票算法</span></h3><aside id="qK5T4FADx3bUxtgkR1fLvq" class="bg-cultured wolai-block"><div data-symbol="✒️" class="icon"></div><span class="inline-wrap">终于写到这里了！！！！！！！！！！！上面的全都不是重点！！！！！！！！！！！！ </span></aside><h4 id="evxGmwFk8bqhDV6izVKBEW" class="wolai-block"><span class="inline-wrap">基本思路</span></h4><ul class="wolai-block"><li id="bp6FdyJmYbTXhf4o61KrcN"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">我们维护一个候选众数 </span><span class="inline-wrap"><code>candidate</code></span><span class="inline-wrap"> 和它出现的次数 </span><span class="inline-wrap"><code>count</code></span><span class="inline-wrap">。初始时 </span><span class="inline-wrap"><code>candidate</code></span><span class="inline-wrap"> 可以为任意值，</span><span class="inline-wrap"><code>count</code></span><span class="inline-wrap"> 为 0；</span></li><li id="os1deW3CvJH65vPmc7gHgN"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">我们遍历数组 </span><span class="inline-wrap"><code>nums</code></span><span class="inline-wrap"> 中的所有元素，对于每个元素 </span><span class="inline-wrap"><code>x</code></span><span class="inline-wrap">，在判断 </span><span class="inline-wrap"><code>x</code></span><span class="inline-wrap"> 之前，如果 </span><span class="inline-wrap"><code>count</code></span><span class="inline-wrap"> == 0，我们先将 </span><span class="inline-wrap"><code>x</code></span><span class="inline-wrap"> 的值赋予 </span><span class="inline-wrap"><code>candidate</code></span><span class="inline-wrap">，随后我们判断 x：</span><ul class="wolai-block"><li id="iDN9eWcU4fCBzPUoBhZzr9"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">如果 </span><span class="inline-wrap"><code>x </code></span><span class="inline-wrap">与 </span><span class="inline-wrap"><code>candidate </code></span><span class="inline-wrap">相等，那么计数器 </span><span class="inline-wrap"><code>count</code></span><span class="inline-wrap"> 的值增加 1；</span></li><li id="fTLgB3phvcq4fDhUs6yAJS"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">如果</span><span class="inline-wrap"><code> x </code></span><span class="inline-wrap">与 </span><span class="inline-wrap"><code>candidate</code></span><span class="inline-wrap"> 不等，那么计数器 </span><span class="inline-wrap"><code>count</code></span><span class="inline-wrap"> 的值减少 1。</span></li></ul></li><li id="tan8dsMGpYwzMLdyiJg3om"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">在遍历完成后，</span><span class="inline-wrap"><code>candidate</code></span><span class="inline-wrap"> 即为整个数组的众数。</span></li></ul><details id="vwopTjeRTj384veWfrCpQe" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">证明</span></summary><div id="p1am4QSJPEBRcqd6KARC7e" class="wolai-block wolai-text"><div><span class="inline-wrap">Boyer-Moore 算法的正确性较难证明，这里给出一种较为详细的用例子辅助证明的思路，供读者参考：</span></div></div><div id="moF3XDNhdmkDa7PMpRHdkG" class="wolai-block wolai-text"><div><span class="inline-wrap">首先我们根据算法步骤中对 count 的定义，可以发现：在对整个数组进行遍历的过程中，count 的值一定非负。这是因为如果 count 的值为 0，那么在这一轮遍历的开始时刻，我们会将 x 的值赋予 candidate 并在接下来的一步中将 count 的值增加 1。因此 count 的值在遍历的过程中一直保持非负。</span></div></div><div id="qLFNgoE7h42iSFWR6ZP5nP" class="wolai-block wolai-text"><div><span class="inline-wrap">那么 count 本身除了计数器之外，还有什么更深层次的意义呢？我们还是以数组</span></div></div><div id="t5tShrs4yrfhdCNrikJJ8K" class="wolai-block wolai-text"><div><span class="inline-wrap">[7, 7, 5, 7, 5, 1 | 5, 7 | 5, 5, 7, 7 | 7, 7, 7, 7]
作为例子，首先写下它在每一步遍历时 candidate 和 count 的值：</span></div></div><div id="6VMa9aAagTDkk3VTzgbCd2" class="wolai-block wolai-text"><div><span class="inline-wrap">nums:      [7, 7, 5, 7, 5, 1 | 5, 7 | 5, 5, 7, 7 | 7, 7, 7, 7]
candidate:  7  7  7  7  7  7   5  5   5  5  5  5   7  7  7  7
count:      1  2  1  2  1  0   1  0   1  2  1  0   1  2  3  4
我们再定义一个变量 value，它和真正的众数 maj 绑定。在每一步遍历时，如果当前的数 x 和 maj 相等，那么 value 的值加 1，否则减 1。value 的实际意义即为：到当前的这一步遍历为止，众数出现的次数比非众数多出了多少次。我们将 value 的值也写在下方：</span></div></div><div id="7YexHMBmTULNNxFQZWtNyv" class="wolai-block wolai-text"><div><span class="inline-wrap">nums:      [7, 7, 5, 7, 5, 1 | 5, 7 | 5, 5, 7, 7 | 7, 7, 7, 7]
value:      1  2  1  2  1  0  -1  0  -1 -2 -1  0   1  2  3  4
有没有发现什么？我们将 count 和 value 放在一起：</span></div></div><div id="x7RVYX7WhKiKCA4NhHbtpw" class="wolai-block wolai-text"><div><span class="inline-wrap">nums:      [7, 7, 5, 7, 5, 1 | 5, 7 | 5, 5, 7, 7 | 7, 7, 7, 7]
count:      1  2  1  2  1  0   1  0   1  2  1  0   1  2  3  4
value:      1  2  1  2  1  0  -1  0  -1 -2 -1  0   1  2  3  4
发现在每一步遍历中，count 和 value 要么相等，要么互为相反数！并且在候选众数 candidate 就是 maj 时，它们相等，candidate 是其它的数时，它们互为相反数！</span></div></div><div id="4k47wFBMaMjRDPWrXc1PHP" class="wolai-block wolai-text"><div><span class="inline-wrap">为什么会有这么奇妙的性质呢？这并不难证明：我们将候选众数 candidate 保持不变的连续的遍历称为「一段」。在同一段中，count 的值是根据 candidate == x 的判断进行加减的。那么如果 candidate 恰好为 maj，那么在这一段中，count 和 value 的变化是同步的；如果 candidate 不为 maj，那么在这一段中 count 和 value 的变化是相反的。因此就有了这样一个奇妙的性质。</span></div></div><div id="a3ATe6We7c2Q2hn7uHS3pc" class="wolai-block wolai-text"><div><span class="inline-wrap">这样以来，由于：</span></div></div><div id="oNzVcjYdkboGLhW8wvAZby" class="wolai-block wolai-text"><div><span class="inline-wrap">我们证明了 count 的值一直为非负，在最后一步遍历结束后也是如此；</span></div></div><div id="qawdha1jRiKByQJvVnHkZJ" class="wolai-block wolai-text"><div><span class="inline-wrap">由于 value 的值与真正的众数 maj 绑定，并且它表示「众数出现的次数比非众数多出了多少次」，那么在最后一步遍历结束后，value 的值为正数；</span></div></div><div id="eH4HcRCFBNZwcRGaFbhpko" class="wolai-block wolai-text"><div><span class="inline-wrap">在最后一步遍历结束后，count 非负，value 为正数，所以它们不可能互为相反数，只可能相等，即 count == value。因此在最后「一段」中，count 的 value 的变化是同步的，也就是说，candidate 中存储的候选众数就是真正的众数 maj。</span></div></div></details><div id="cgCU2PjvbWXB6gyRkKCMe7" class="wolai-block wolai-text"><div><span class="inline-wrap">投票法是遇到相同的则票数 + 1，遇到不同的则票数 - 1。
且“多数元素”的个数&gt; ⌊ n/2 ⌋，其余元素的个数总和&lt;= ⌊ n/2 ⌋。
因此“多数元素”的个数 - 其余元素的个数总和 的结果 肯定 &gt;= 1。
这就相当于每个“多数元素”和其他元素 两两相互抵消，抵消到最后肯定还剩余至少<span class="jill"></span>1<span class="jill"></span>个“多数元素”。</span></div></div><h4 id="mBSa1YVy2soxmzq136iZhA" class="wolai-block"><span class="inline-wrap">代码</span></h4><code-block id="rQ9uFpu6gcqCEpDAVEmVbN" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>  int <span class="token function">majorityElement</span><span class="token punctuation">(</span><span class="token parameter">vector<span class="token operator">&lt;</span>int<span class="token operator">></span><span class="token operator">&amp;</span> nums</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    int count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    int maj <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        maj <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>maj <span class="token operator">!=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        count<span class="token operator">--</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">else</span>
        count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> maj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span></pre></div></code-block><h4 id="f5Qb3eYnxSC4Y2jgUX8YB3" class="wolai-block"><span class="inline-wrap">测试与验证</span></h4><div id="2AFQcgTHfCn4N3BAzr3UKY" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="media/image_1.png" style="width: 422.4px"/></figure></div><h4 id="oQRaFWXsPPDA4MN1ibGQhg" class="wolai-block"><span class="inline-wrap">性能分析</span></h4><div id="ozKsh9aFR4i54YqwNsQMzD" class="wolai-block wolai-text"><div><span class="inline-wrap">时间复杂度：</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></div></div><div id="d4yWqNh8G3n8eKMtqYjGtJ" class="wolai-block wolai-text"><div><span class="inline-wrap">空间复杂度：</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></div></div><div id="c2KvHFh4N8MrUV2PUqrYb1" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div></article><footer></footer></body></html>