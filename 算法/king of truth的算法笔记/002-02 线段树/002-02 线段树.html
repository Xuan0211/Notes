<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>002-02 线段树 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="002-02 线段树" class="main-title"></div></div></header><article><h2 id="q8MfoqyjR4XW77fH5mt1vF" class="wolai-block"><span class="inline-wrap">基本结构</span></h2><div id="iKAyVxRXPtSqmtFGWayECW" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="D:%5CTypora-images%5Ctypora-user-images%5Cimage-20220905205902710.png" alt="image-20220905205902710"/><figcaption>image-20220905205902710</figcaption></figure></div><div id="cmsgZL2qbRCvCFDuRnEK1D" class="wolai-block wolai-text"><div><span class="inline-wrap"><b>==高速查询某段区间的信息和==</b></span></div></div><h2 id="qFg7P5P136cNgMkwUN7umH" class="wolai-block"><span class="inline-wrap">建树</span></h2><code-block id="5xeTAnT5rjgXgfuRLGzeMZ" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">int s<span class="token punctuation">,</span>int t<span class="token punctuation">,</span>int p</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//对[s,t]区间建立线段树，当前根的编号为p</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>s<span class="token operator">==</span>t<span class="token punctuation">)</span><span class="token punctuation">{</span>
        d<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    int m<span class="token operator">=</span>s<span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t<span class="token operator">-</span>s<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">build</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>m<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">build</span><span class="token punctuation">(</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    d<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">=</span>d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">]</span><span class="token operator">+</span>d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="oHETYPnKtQ3nn9VKgN2QBT" class="wolai-block"><span class="inline-wrap">区间查询</span></h2><code-block id="1JcFdduASwsu9pHSitqH9x" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>int <span class="token function">getsum</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span>int r<span class="token punctuation">,</span>int s<span class="token punctuation">,</span>int t<span class="token punctuation">,</span>int p</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//[l,r]为查询区间，[s,t]为当前节点所包含的区间，p为当前节点编号</span>
    int sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>s<span class="token operator">&amp;&amp;</span>t<span class="token operator">&lt;=</span>r<span class="token punctuation">)</span><span class="token comment">//如果查询区间包含当前区间</span>
        <span class="token keyword control-flow">return</span> d<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//这里是return！</span>
    int m<span class="token operator">=</span>s<span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t<span class="token operator">-</span>s<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>m<span class="token punctuation">)</span> sum<span class="token operator">+=</span><span class="token function">getsum</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>s<span class="token punctuation">,</span>m<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果当前区间的左儿子与询问区间有交集</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>r<span class="token operator">></span>m<span class="token punctuation">)</span> sum<span class="token operator">+=</span><span class="token function">getsum</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果当前区间的右儿子与询问区间有交集</span>
    <span class="token keyword control-flow">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="fDd5sgKWM3j5n4YiDP2q7r" class="wolai-block"><span class="inline-wrap">lazy tag</span></h2><div id="8heKHSP9exSzavpNrd4czp" class="wolai-block wolai-text"><div><span class="inline-wrap">修改区间--&gt;找到可覆盖范围最大的区间--&gt;修改，打标签；不修改子节点</span></div></div><div id="iHetLcc7XtsKgcmTzsF4nU" class="wolai-block wolai-text"><div><span class="inline-wrap">查询--&gt;非目标区间且带有标签--&gt;标签下放--&gt;标签清零</span></div></div><h4 id="7Y3hm6LtMd3jrQ9rah6evZ" class="wolai-block"><span class="inline-wrap">区间修改</span></h4><code-block id="jmMqRXtXxSxwRKrJ6684v7" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>int d<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token comment">//d[]为区间和，t[]为标签</span>
<span class="token keyword">void</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span>int r<span class="token punctuation">,</span>int c<span class="token punctuation">,</span>int s<span class="token punctuation">,</span>int t<span class="token punctuation">,</span>int p</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//[l,r]为修改区间，c为修改值，[s,t]为当前节点对应区间，p为当前节点</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>s<span class="token operator">&amp;&amp;</span>t<span class="token operator">&lt;=</span>r<span class="token punctuation">)</span><span class="token punctuation">{</span>
        d<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">+=</span><span class="token punctuation">(</span>t<span class="token operator">-</span>s<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>c<span class="token punctuation">;</span><span class="token comment">//注意区间包含的节点个数</span>
        t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">+=</span>c<span class="token punctuation">;</span>
        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span><span class="token comment">//记得return</span>
    <span class="token punctuation">}</span>
    int m<span class="token operator">=</span>s<span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t<span class="token operator">-</span>s<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">!=</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span>s<span class="token operator">!=</span>t<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//子节点的标签是不需要下放的</span>
        d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">]</span><span class="token operator">+=</span><span class="token punctuation">(</span>m<span class="token operator">-</span>s<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>b<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span><span class="token punctuation">(</span>t<span class="token operator">-</span>m<span class="token punctuation">)</span><span class="token operator">*</span>b<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//修改子节点</span>
        <span class="token comment">//这里我出错了，一定要记得修改的值是b[p]而不是c</span>
        t<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">]</span><span class="token operator">+=</span>c<span class="token punctuation">,</span> t<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span>c<span class="token punctuation">;</span><span class="token comment">//修改标签</span>
        b<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//记得清零！！！</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>m<span class="token punctuation">)</span> <span class="token function">upload</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>c<span class="token punctuation">,</span>s<span class="token punctuation">,</span>m<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>r<span class="token operator">></span>m<span class="token punctuation">)</span> <span class="token function">upload</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>c<span class="token punctuation">,</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    d<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">=</span>d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">]</span><span class="token operator">+</span>d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//最后更新根节点</span>
<span class="token punctuation">}</span></pre></div></code-block><div id="ofvowJ2uGZmKCgiLEtAoxG" class="wolai-block wolai-text"><div><span class="inline-wrap">注意：</span></div></div><ol class="wolai-block"><li id="n8MEfYR9D6qcjLyamHRhYD"><div class="marker"></div><span class="inline-wrap">下放标签，下放<span class="jill"></span>b[p]，不是<span class="jill"></span>c</span></li><li id="3K6McXNJBpndS1GdzvZzCp"><div class="marker"></div><span class="inline-wrap">b[p]清零</span></li></ol><div id="cgudCVr4UL9uP5HozvdCnu" class="wolai-block wolai-text"><div><span class="inline-wrap">存疑：为什么要用儿子节点更新当前节点</span></div></div><div id="bKGdvnXMUdQXTXTRY7YjbF" class="wolai-block wolai-text"><div><span class="inline-wrap">最后一行代码。我是根据根节点的标签修改子节点，且修改子节点前父节点已更新信息，为什么还要用子节点更新根节点呢。信息是向下传递的。</span></div></div><div id="ioWRKyYKEnKrUrNANxzmzq" class="wolai-block wolai-text"><div><span class="inline-wrap"><b>因为父节点的父节点没有更新也没有标签</b></span></div></div><h4 id="2Np2CPth5wu1KTdmtyfTRZ" class="wolai-block"><span class="inline-wrap">区间求和</span></h4><code-block id="wNT8GR2LZLMrm4t1zLnChX" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>int <span class="token function">getsum</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span>int r<span class="token punctuation">,</span>int s<span class="token punctuation">,</span>int t<span class="token punctuation">,</span>int p</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token comment">//[l,r]为修改区间，c为修改值，[s,t]为当前节点对应区间，p为当前节点</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>s<span class="token operator">&amp;&amp;</span>t<span class="token operator">&lt;=</span>r<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> d<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    int m<span class="token operator">=</span>s<span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t<span class="token operator">-</span>s<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">!=</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span>s<span class="token operator">!=</span>t<span class="token punctuation">)</span><span class="token punctuation">{</span>
        d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">]</span><span class="token operator">+=</span><span class="token punctuation">(</span>m<span class="token operator">-</span>s<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>c<span class="token punctuation">,</span> d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span><span class="token punctuation">(</span>t<span class="token operator">-</span>m<span class="token punctuation">)</span><span class="token operator">*</span>c<span class="token punctuation">;</span><span class="token comment">//修改子节点</span>
        t<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">]</span><span class="token operator">+=</span>c<span class="token punctuation">,</span> t<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span>c<span class="token punctuation">;</span><span class="token comment">//修改标签</span>
    <span class="token punctuation">}</span>
    int sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>m<span class="token punctuation">)</span> sum<span class="token operator">+=</span><span class="token function">getsum</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>c<span class="token punctuation">,</span>s<span class="token punctuation">,</span>m<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>r<span class="token operator">></span>m<span class="token punctuation">)</span> sum<span class="token operator">+=</span><span class="token function">getsum</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>c<span class="token punctuation">,</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><div id="onvGUM3knnxnk5zFruES9n" class="wolai-block wolai-text"><div><span class="inline-wrap">如果要实现区间修改为某一个值而不是加上某一个值，则令维护<span class="jill"></span>v[p]={0,1}，b[p]中直接存储修改为的值。</span></div></div><code-block id="ij3DpV7qY3eAJDAtS54XA4" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span>int r<span class="token punctuation">,</span>int c<span class="token punctuation">,</span>int s<span class="token punctuation">,</span>int t<span class="token punctuation">,</span>int p</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>s<span class="token operator">&amp;&amp;</span>t<span class="token operator">&lt;=</span>r<span class="token punctuation">)</span><span class="token punctuation">{</span>
        d<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>t<span class="token operator">-</span>s<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>c<span class="token punctuation">;</span>b<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">=</span>c<span class="token punctuation">;</span>
        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span><span class="token comment">//为什么这里不用把v[p]变成1呢</span>
    <span class="token punctuation">}</span>
    int m<span class="token operator">=</span>s<span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t<span class="token operator">-</span>s<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>m<span class="token operator">-</span>s<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>t<span class="token operator">-</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
        b<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
        v<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">]</span><span class="token operator">=</span>v<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        v<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>m<span class="token punctuation">)</span> <span class="token function">upload</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>c<span class="token punctuation">,</span>s<span class="token punctuation">,</span>m<span class="token punctuation">,</span>p<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>r<span class="token operator">></span>m<span class="token punctuation">)</span> <span class="token function">upload</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>c<span class="token punctuation">,</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    d<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">=</span>d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">]</span><span class="token operator">+</span>d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

int <span class="token function">getsum</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span>int r<span class="token punctuation">,</span>int s<span class="token punctuation">,</span>int t<span class="token punctuation">,</span>int p</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>s<span class="token operator">&amp;&amp;</span>t<span class="token operator">&lt;=</span>r<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> d<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    int m<span class="token operator">=</span>s<span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t<span class="token operator">-</span>s<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>m<span class="token operator">-</span>s<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>t<span class="token operator">-</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
        b<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
        v<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">]</span><span class="token operator">=</span>v<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        v<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    int sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>m<span class="token punctuation">)</span> sum<span class="token operator">+=</span><span class="token function">getsum</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>s<span class="token punctuation">,</span>m<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>r<span class="token operator">></span>m<span class="token punctuation">)</span> sun<span class="token operator">+=</span><span class="token function">getsum</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><div id="hbMuuvFmkwe4Bm5e4QHw8H" class="wolai-block wolai-text"><div><span class="inline-wrap">修改值与增加值不同，增加值可以累加增加值最后增加，但修改值只以最后一次为主。</span></div></div><div id="gvL9n34XezHsUxs2v6v7pM" class="wolai-block wolai-text"><div><span class="inline-wrap">疑问：v[p]==1<span class="jill"></span>的时候才会执行<span class="jill"></span>if<span class="jill"></span>语句，但<span class="jill"></span>v[p]没有在前面的操作中修改为<span class="jill"></span>1，是原数组赋值的问题吗？</span></div></div><h2 id="nFXzHzQsk7HnQyDZQzsD36" class="wolai-block"><span class="inline-wrap">c++<span class="jill"></span>模板</span></h2><h3 id="owJxTn1fKJ1d18uRt8ckxL" class="wolai-block"><span class="inline-wrap">区间加、求和</span></h3><code-block id="2ssbRSCaDWtFXjvXxu89KV" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>#include <span class="token operator">&lt;</span>bits<span class="token operator">/</span>stdc<span class="token operator">++</span><span class="token punctuation">.</span><span class="token property-access">h</span><span class="token operator">></span>
using namespace std<span class="token punctuation">;</span>

template <span class="token operator">&lt;</span>typename <span class="token constant">T</span><span class="token operator">></span>
<span class="token keyword">class</span> <span class="token class-name">SegTreeLazyRangeAdd</span> <span class="token punctuation">{</span>
  vector<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> tree<span class="token punctuation">,</span> lazy<span class="token punctuation">;</span>
  vector<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">*</span>arr<span class="token punctuation">;</span>
  int n<span class="token punctuation">,</span> root<span class="token punctuation">,</span> n4<span class="token punctuation">,</span> end<span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">maintain</span><span class="token punctuation">(</span><span class="token parameter">int cl<span class="token punctuation">,</span> int cr<span class="token punctuation">,</span> int p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    int cm <span class="token operator">=</span> cl <span class="token operator">+</span> <span class="token punctuation">(</span>cr <span class="token operator">-</span> cl<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>cl <span class="token operator">!=</span> cr <span class="token operator">&amp;&amp;</span> lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lazy<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+=</span> lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
      lazy<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
      tree<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+=</span> lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>cm <span class="token operator">-</span> cl <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      tree<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>cr <span class="token operator">-</span> cm<span class="token punctuation">)</span><span class="token punctuation">;</span>
      lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token constant">T</span> <span class="token function">range_sum</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span> int r<span class="token punctuation">,</span> int cl<span class="token punctuation">,</span> int cr<span class="token punctuation">,</span> int p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;=</span> cl <span class="token operator">&amp;&amp;</span> cr <span class="token operator">&lt;=</span> r<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
    int m <span class="token operator">=</span> cl <span class="token operator">+</span> <span class="token punctuation">(</span>cr <span class="token operator">-</span> cl<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token constant">T</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">maintain</span><span class="token punctuation">(</span>cl<span class="token punctuation">,</span> cr<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;=</span> m<span class="token punctuation">)</span> sum <span class="token operator">+=</span> <span class="token function">range_sum</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> cl<span class="token punctuation">,</span> m<span class="token punctuation">,</span> p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>r <span class="token operator">></span> m<span class="token punctuation">)</span> sum <span class="token operator">+=</span> <span class="token function">range_sum</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> cr<span class="token punctuation">,</span> p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> sum<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">void</span> <span class="token function">range_add</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span> int r<span class="token punctuation">,</span> <span class="token constant">T</span> val<span class="token punctuation">,</span> int cl<span class="token punctuation">,</span> int cr<span class="token punctuation">,</span> int p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;=</span> cl <span class="token operator">&amp;&amp;</span> cr <span class="token operator">&lt;=</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">+=</span> val<span class="token punctuation">;</span>
      tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token punctuation">(</span>cr <span class="token operator">-</span> cl <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> val<span class="token punctuation">;</span>
      <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    int m <span class="token operator">=</span> cl <span class="token operator">+</span> <span class="token punctuation">(</span>cr <span class="token operator">-</span> cl<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token function">maintain</span><span class="token punctuation">(</span>cl<span class="token punctuation">,</span> cr<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;=</span> m<span class="token punctuation">)</span> <span class="token function">range_add</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> val<span class="token punctuation">,</span> cl<span class="token punctuation">,</span> m<span class="token punctuation">,</span> p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>r <span class="token operator">></span> m<span class="token punctuation">)</span> <span class="token function">range_add</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> val<span class="token punctuation">,</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> cr<span class="token punctuation">,</span> p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> tree<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> tree<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">int s<span class="token punctuation">,</span> int t<span class="token punctuation">,</span> int p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>s <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    int m <span class="token operator">=</span> s <span class="token operator">+</span> <span class="token punctuation">(</span>t <span class="token operator">-</span> s<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token function">build</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> m<span class="token punctuation">,</span> p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">build</span><span class="token punctuation">(</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> tree<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> tree<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

 <span class="token keyword">public</span><span class="token operator">:</span>
  explicit <span class="token maybe-class-name">SegTreeLazyRangeAdd</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    n <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    n4 <span class="token operator">=</span> n <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
    tree <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>n4<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lazy <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>n4<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    arr <span class="token operator">=</span> <span class="token operator">&amp;</span>v<span class="token punctuation">;</span>
    end <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    root <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">build</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> end<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    arr <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">int p<span class="token punctuation">,</span> int depth <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>p <span class="token operator">></span> n4 <span class="token operator">||</span> tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> depth<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token function">putchar</span><span class="token punctuation">(</span><span class="token string">'\t'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d:%d\n"</span><span class="token punctuation">,</span> tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">,</span> lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token constant">T</span> <span class="token function">range_sum</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span> int r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> <span class="token function">range_sum</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> end<span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

  <span class="token keyword">void</span> <span class="token function">range_add</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span> int r<span class="token punctuation">,</span> int val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">range_add</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> val<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> end<span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre></div></code-block><h3 id="wUagsRt8HM9tZ7rc3D9fyL" class="wolai-block"><span class="inline-wrap">区间修改、求和</span></h3><code-block id="iPLhoCXxadg7FXd1WWkSme" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>#include <span class="token operator">&lt;</span>bits<span class="token operator">/</span>stdc<span class="token operator">++</span><span class="token punctuation">.</span><span class="token property-access">h</span><span class="token operator">></span>
using namespace std<span class="token punctuation">;</span>

template <span class="token operator">&lt;</span>typename <span class="token constant">T</span><span class="token operator">></span>
<span class="token keyword">class</span> <span class="token class-name">SegTreeLazyRangeSet</span> <span class="token punctuation">{</span>
  vector<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> tree<span class="token punctuation">,</span> lazy<span class="token punctuation">;</span>
  vector<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">*</span>arr<span class="token punctuation">;</span>
  int n<span class="token punctuation">,</span> root<span class="token punctuation">,</span> n4<span class="token punctuation">,</span> end<span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">maintain</span><span class="token punctuation">(</span><span class="token parameter">int cl<span class="token punctuation">,</span> int cr<span class="token punctuation">,</span> int p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    int cm <span class="token operator">=</span> cl <span class="token operator">+</span> <span class="token punctuation">(</span>cr <span class="token operator">-</span> cl<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>cl <span class="token operator">!=</span> cr <span class="token operator">&amp;&amp;</span> lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lazy<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
      lazy<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
      tree<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>cm <span class="token operator">-</span> cl <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      tree<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>cr <span class="token operator">-</span> cm<span class="token punctuation">)</span><span class="token punctuation">;</span>
      lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token constant">T</span> <span class="token function">range_sum</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span> int r<span class="token punctuation">,</span> int cl<span class="token punctuation">,</span> int cr<span class="token punctuation">,</span> int p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;=</span> cl <span class="token operator">&amp;&amp;</span> cr <span class="token operator">&lt;=</span> r<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
    int m <span class="token operator">=</span> cl <span class="token operator">+</span> <span class="token punctuation">(</span>cr <span class="token operator">-</span> cl<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token constant">T</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">maintain</span><span class="token punctuation">(</span>cl<span class="token punctuation">,</span> cr<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;=</span> m<span class="token punctuation">)</span> sum <span class="token operator">+=</span> <span class="token function">range_sum</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> cl<span class="token punctuation">,</span> m<span class="token punctuation">,</span> p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>r <span class="token operator">></span> m<span class="token punctuation">)</span> sum <span class="token operator">+=</span> <span class="token function">range_sum</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> cr<span class="token punctuation">,</span> p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> sum<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">void</span> <span class="token function">range_set</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span> int r<span class="token punctuation">,</span> <span class="token constant">T</span> val<span class="token punctuation">,</span> int cl<span class="token punctuation">,</span> int cr<span class="token punctuation">,</span> int p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;=</span> cl <span class="token operator">&amp;&amp;</span> cr <span class="token operator">&lt;=</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
      tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>cr <span class="token operator">-</span> cl <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> val<span class="token punctuation">;</span>
      <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    int m <span class="token operator">=</span> cl <span class="token operator">+</span> <span class="token punctuation">(</span>cr <span class="token operator">-</span> cl<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token function">maintain</span><span class="token punctuation">(</span>cl<span class="token punctuation">,</span> cr<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;=</span> m<span class="token punctuation">)</span> <span class="token function">range_set</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> val<span class="token punctuation">,</span> cl<span class="token punctuation">,</span> m<span class="token punctuation">,</span> p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>r <span class="token operator">></span> m<span class="token punctuation">)</span> <span class="token function">range_set</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> val<span class="token punctuation">,</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> cr<span class="token punctuation">,</span> p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> tree<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> tree<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">int s<span class="token punctuation">,</span> int t<span class="token punctuation">,</span> int p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>s <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    int m <span class="token operator">=</span> s <span class="token operator">+</span> <span class="token punctuation">(</span>t <span class="token operator">-</span> s<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token function">build</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> m<span class="token punctuation">,</span> p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">build</span><span class="token punctuation">(</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> tree<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> tree<span class="token punctuation">[</span>p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

 <span class="token keyword">public</span><span class="token operator">:</span>
  explicit <span class="token maybe-class-name">SegTreeLazyRangeSet</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    n <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    n4 <span class="token operator">=</span> n <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
    tree <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>n4<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lazy <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>n4<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    arr <span class="token operator">=</span> <span class="token operator">&amp;</span>v<span class="token punctuation">;</span>
    end <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    root <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">build</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> end<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    arr <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">int p<span class="token punctuation">,</span> int depth <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>p <span class="token operator">></span> n4 <span class="token operator">||</span> tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>p <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> depth<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token function">putchar</span><span class="token punctuation">(</span><span class="token string">'\t'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d:%d\n"</span><span class="token punctuation">,</span> tree<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">,</span> lazy<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>p <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token constant">T</span> <span class="token function">range_sum</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span> int r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> <span class="token function">range_sum</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> end<span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

  <span class="token keyword">void</span> <span class="token function">range_set</span><span class="token punctuation">(</span><span class="token parameter">int l<span class="token punctuation">,</span> int r<span class="token punctuation">,</span> int val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">range_set</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> val<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> end<span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre></div></code-block><h2 id="4bApaBwhu5zAfKH7vLirkD" class="wolai-block"><span class="inline-wrap">例题</span></h2><h3 id="icsquvnqqbd6Tg3dbQFe4z" class="wolai-block"><span class="inline-wrap">买票</span></h3><div id="qhQZD5FEuCTXnaRr9qxwEN" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="D:/Typora-images/typora-user-images/image-20220910223047133.png"/></figure></div><div id="cpLTNdQVphseW2DtTWuL7v" class="wolai-block"><figure class="wolai-center" style="width: 100%"><img src="D:/Typora-images/typora-user-images/image-20220910223058438.png"/></figure></div><div id="thTgKgrcTyRaVKb9nCp9rG" class="wolai-block wolai-text"><div><span class="inline-wrap">我的代码：</span></div></div><div id="dDcp1Cf9gBAb5FhyMiF39y" class="wolai-block wolai-text"><div><span class="inline-wrap">不知道对不对反正样例是过了,应该是不对的</span></div></div><code-block id="mCTXEWewuUTyHA5Uf7SYK3" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>#define _CRT_SECURE_NO_WARNINGS
#include<span class="token operator">&lt;</span>cstdio<span class="token operator">></span>
#include<span class="token operator">&lt;</span>cstdlib<span class="token operator">></span>
#include<span class="token operator">&lt;</span>iostream<span class="token operator">></span>
using namespace std<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">int<span class="token operator">*</span> d<span class="token punctuation">,</span>int s<span class="token punctuation">,</span>int t<span class="token punctuation">,</span>int p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>s <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    d<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  int m <span class="token operator">=</span> s <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">-</span> s<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">init</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> s<span class="token punctuation">,</span> m<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">init</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  d<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> p<span class="token punctuation">]</span> <span class="token operator">+</span> d<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  
  <span class="token comment">//OR</span>
  <span class="token comment">/*d[p] = t - s + 1;
  init(d, s, m, 2 * p);
  init(d, m + 1, t, 2 * p + 1);*/</span>
<span class="token punctuation">}</span>

<span class="token comment">//这两个可以合二为一</span>
int <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">int<span class="token operator">*</span> d<span class="token punctuation">,</span> int emp<span class="token punctuation">,</span> int s<span class="token punctuation">,</span> int t<span class="token punctuation">,</span>int p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>s <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> s<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  int loc <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  int m <span class="token operator">=</span> s <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">-</span> s<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>emp <span class="token operator">&lt;=</span> d<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> p<span class="token punctuation">]</span><span class="token punctuation">)</span>
    loc <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> emp<span class="token punctuation">,</span> s<span class="token punctuation">,</span> m<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">else</span>
    loc <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> emp <span class="token operator">-</span> d<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> p<span class="token punctuation">]</span><span class="token punctuation">,</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> loc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">modify</span><span class="token punctuation">(</span><span class="token parameter">int<span class="token operator">*</span> d<span class="token punctuation">,</span> int loc<span class="token punctuation">,</span> int s<span class="token punctuation">,</span> int t<span class="token punctuation">,</span> int p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>s<span class="token operator">==</span>loc<span class="token operator">&amp;&amp;</span>loc<span class="token operator">==</span>t<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    d<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  int m <span class="token operator">=</span> s <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">-</span> s<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>loc<span class="token operator">&lt;=</span>m<span class="token punctuation">)</span>
    <span class="token function">modify</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> loc<span class="token punctuation">,</span> s<span class="token punctuation">,</span> m<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">else</span>
    <span class="token function">modify</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> loc<span class="token punctuation">,</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  d<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> p<span class="token punctuation">]</span> <span class="token operator">+</span> d<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>



int <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">void</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  int n<span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token number">1005</span><span class="token punctuation">]</span><span class="token punctuation">,</span> vali<span class="token punctuation">[</span><span class="token number">1005</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ans<span class="token punctuation">[</span><span class="token number">1005</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span><span class="token number">10005</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  cin <span class="token operator">>></span> n<span class="token punctuation">;</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cin <span class="token operator">>></span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>></span> vali<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">init</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/*for (int i = 0; i &lt;= n; i++)
    printf("%d ", d[i]);*/</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    int emp <span class="token operator">=</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
    int loc <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>emp<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ans<span class="token punctuation">[</span>loc<span class="token punctuation">]</span> <span class="token operator">=</span> vali<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">/*for (int i = 0; i &lt; n; i++)
      printf("%d ", ans[i]);*/</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token function">modify</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> loc<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><div id="n64aY9ytXybhFPgGCuv3i9" class="wolai-block wolai-text"><div><span class="inline-wrap">正解代码：</span></div></div><code-block id="mHyyrLHhn4rPWJcxUZmMp6" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>#include<span class="token operator">&lt;</span>iostream<span class="token operator">></span>
#include<span class="token operator">&lt;</span>fstream<span class="token operator">></span>
#include<span class="token operator">&lt;</span>string<span class="token operator">></span>
#define <span class="token maybe-class-name">Lchild</span> rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token constant">L</span><span class="token punctuation">,</span>m
#define <span class="token maybe-class-name">Rchild</span> rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">,</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token constant">R</span>
using namespace std<span class="token punctuation">;</span>
#define maxn <span class="token number">222222</span>
int tree<span class="token punctuation">[</span>maxn<span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
int <span class="token constant">N</span><span class="token punctuation">;</span>
int ans<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>
int t<span class="token punctuation">;</span>
struct node
<span class="token punctuation">{</span>
  int val<span class="token punctuation">;</span>
  int pos<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
node num<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">int rt <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> int <span class="token constant">L</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> int <span class="token constant">R</span> <span class="token operator">=</span> <span class="token constant">N</span></span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  tree<span class="token punctuation">[</span>rt<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">R</span> <span class="token operator">-</span> <span class="token constant">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token constant">L</span> <span class="token operator">==</span> <span class="token constant">R</span><span class="token punctuation">)</span>
    <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
  int m <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">L</span> <span class="token operator">+</span> <span class="token constant">R</span><span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token maybe-class-name">Lchild</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token maybe-class-name">Rchild</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">int val<span class="token punctuation">,</span>int pos<span class="token punctuation">,</span> int rt <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> int <span class="token constant">L</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> int <span class="token constant">R</span> <span class="token operator">=</span> <span class="token constant">N</span></span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  tree<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token constant">L</span> <span class="token operator">==</span> <span class="token constant">R</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    ans<span class="token punctuation">[</span><span class="token constant">L</span><span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  int m <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">L</span> <span class="token operator">+</span> <span class="token constant">R</span><span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>tree<span class="token punctuation">[</span>rt <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> pos<span class="token punctuation">)</span>
    <span class="token function">update</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> <span class="token maybe-class-name">Lchild</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">else</span>
  <span class="token punctuation">{</span>
    pos <span class="token operator">-=</span> tree<span class="token punctuation">[</span>rt <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">update</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> <span class="token maybe-class-name">Rchild</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
int <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token function">scanf_s</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token constant">N</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token constant">EOF</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    t <span class="token operator">=</span> <span class="token constant">N</span><span class="token punctuation">;</span>
    <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    int pos<span class="token punctuation">,</span> val<span class="token punctuation">;</span>
    <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token constant">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token function">scanf_s</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>pos<span class="token punctuation">,</span> <span class="token operator">&amp;</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
      pos<span class="token operator">++</span><span class="token punctuation">;</span>
      num<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">pos</span> <span class="token operator">=</span> pos<span class="token punctuation">;</span>
      num<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">val</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token constant">N</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token function">update</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">val</span><span class="token punctuation">,</span> num<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">pos</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> ans<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span><span class="token constant">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">" %d"</span><span class="token punctuation">,</span> ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h3 id="oWie7p24WotYxFSh8P7sQD" class="wolai-block"><span class="inline-wrap">订旅馆</span></h3><blockquote id="pNer44BqQcifixUUmkKxmw" class="wolai-block"><span class="inline-wrap">奶牛们最近的旅游计划，是到苏必利尔湖畔，享受那里的湖光山色，以及明媚的阳光。作为整个旅游的策划者和负责人，贝茜选择在湖边的一家著名的旅馆住宿。这个巨大的旅馆一共有 N (1 &lt;= N &lt;= 50,000)间客房，它们在同一层楼中顺次一字排开，在任何一个房间里，只需要拉开窗帘，就能见到波光粼粼的湖面。</span><span class="inline-wrap">
</span><span class="inline-wrap">贝茜一行，以及其他慕名而来的旅游者，都是一批批地来到旅馆的服务台，希望能订到 D_i (1 &lt;= D_i &lt;= N) 间连续的房间。服务台的接待工作也很简单：如果存在 r 满足编号为 r..r+D_i-1 的房间均空着，他就将这一批顾客安排到这些房间入住；如果没有满足条件的 r，他会道歉说没有足够的空房间，请顾客们另找一家宾馆。如果有多个满足条件的 r，服务员会选择其中最小的一个。</span><span class="inline-wrap">
</span><span class="inline-wrap">旅馆中的退房服务也是批量进行的。每一个退房请求由 2 个数字 X_i、D_i 描述，表示编号为 X_i..X_i+D_i-1 (1 &lt;= X_i &lt;= N-D_i+1) 房间中的客人全部离开。退房前，请求退掉的房间中的一些，甚至是所有，可能本来就无人入住。</span><span class="inline-wrap">
</span><span class="inline-wrap">而你的工作，就是写一个程序，帮服务员为旅客安排房间。你的程序一共需要处理 M (1 &lt;= M &lt; 50,000)个按输入次序到来的住店或退房的请求。第一个请求到来前，旅店中所有房间都是空闲的。
输入格式
第 1 行: 2 个用空格隔开的整数：N、M 。
第 2.. M+1<span class="jill"></span>行: 第 i+1 描述了第 i 个请求，如果它是一个订房请求，则用 2 个数字 1、D_i<span class="jill"></span>描述，数字间用空格隔开；如果它是一个退房请求，用 3 个以空格隔开的数字 2、X_i、D_i 描述.</span><span class="inline-wrap">
</span><span class="inline-wrap">输出格式
第 1 ... ?? 行: 对于每个订房请求，输出 1 个独占 1 行的数字：如果请求能被满足，输出满足条件的最小的 r；如果请求无法被满足，输出 0 。</span><span class="inline-wrap">
</span><span class="inline-wrap">样例数据 1
输入　</span><span class="inline-wrap">
</span><span class="inline-wrap">10 6
1 3
1 3
1 3
1 3
2 5 5
1 6
输出</span><span class="inline-wrap">
</span><span class="inline-wrap">1
4
7
0
5</span></blockquote><div id="8ywuy5xdQovEaLdC1SZH98" class="wolai-block wolai-text"><div><span class="inline-wrap">分析：</span></div></div><div id="gQ8CBnaH945B4NTcDSkjTG" class="wolai-block wolai-text"><div><span class="inline-wrap">订房：查询是否有连续<span class="jill"></span>D<span class="jill"></span>个位置是空的，如果有输出最左端点</span></div></div><div id="fhX8hzGj2ZXRS19LMy6JVo" class="wolai-block wolai-text"><div><span class="inline-wrap">退房：将<span class="jill"></span>X<span class="jill"></span>到<span class="jill"></span>X+D-1<span class="jill"></span>这段位置置为空</span></div></div><div id="deP4kxjk8RAsdBPZ7qWsXb" class="wolai-block wolai-text"><div><span class="inline-wrap">这样一转述，就很容易想到线段树了，区间查询，区间修改</span></div></div><div id="aGHbsW6DTd4woB3o5mtdEd" class="wolai-block wolai-text"><div><span class="inline-wrap">每个节点存储<span class="jill"></span>3<span class="jill"></span>个信息：</span></div></div><div id="uiiP2y2B4AuaDQRKG1onEf" class="wolai-block wolai-text"><div><span class="inline-wrap">从左数最多有多少个连续的<span class="jill"></span>0  lmax
从右数最多有多少个连续的<span class="jill"></span>0  rmax
整个区间最多有多少个连续的<span class="jill"></span>0  maxn
一开始的时候这些的值都赋为区间的长度，因为整个区间都是空的</span></div></div><div id="eSVf8Kdov1xjoKufd2Fi2U" class="wolai-block wolai-text"><div><span class="inline-wrap">当遇到一个查询的时候，就从<span class="jill"></span>root<span class="jill"></span>开始，如果左边的连续<span class="jill"></span>0<span class="jill"></span>的个数大于我们需要的<span class="jill"></span>D，就直接返回 左端点</span></div></div><div id="tUFvDqgwaW3NKJm5kqKFwZ" class="wolai-block wolai-text"><div><span class="inline-wrap">然后判断中间</span></div></div><div id="rPKVdwBHfeYMdVHoHeUNdP" class="wolai-block wolai-text"><div><span class="inline-wrap">最后判断右边</span></div></div><div id="5SEUfd6vWuVJ23233m8d7r" class="wolai-block wolai-text"><div><span class="inline-wrap">（因为题目要求我们输出最左端的一种情况，每次我们都从左开始判断，就能保证最后得到的答案一定是最靠左的了）</span></div></div><div id="axKsNPevEK54A1QLbuEJJR" class="wolai-block wolai-text"><div><span class="inline-wrap">遇到修改的时候，就该怎么修改怎么修改，只是在最后<span class="jill"></span>pushup<span class="jill"></span>的时候稍微复杂一点点</span></div></div><div id="gUgeBozahrSeUdBcQsrSQa" class="wolai-block wolai-text"><div><span class="inline-wrap">有几种情况需要判断</span></div></div><div id="iyuMPrsKifgLzaHgDi5C61" class="wolai-block wolai-text"><div><span class="inline-wrap">最后需要注意：由于我们涉及了区间修改，所以每做一步操作都别忘了<span class="jill"></span>pushdown</span></div></div><code-block id="eShaY1jyqM8N1BEGpHvM36" class="wolai-block"><div class="wolai-pre"><div data-lang="C++" class="marker"></div><pre>#include<span class="token operator">&lt;</span>cstdio<span class="token operator">></span>
#include<span class="token operator">&lt;</span>cstdlib<span class="token operator">></span>
#include<span class="token operator">&lt;</span>iostream<span class="token operator">></span>
#define <span class="token keyword">in</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
#define <span class="token function">lc</span> <span class="token punctuation">(</span>k<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span>
#define <span class="token function">rc</span> <span class="token punctuation">(</span>k<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token number">1</span>
#define <span class="token constant">N</span> <span class="token number">50009</span>
using namespace std<span class="token punctuation">;</span>
inline int <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  char ch<span class="token punctuation">;</span> int f <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ch <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token string">'0'</span> <span class="token operator">||</span> ch <span class="token operator">></span> <span class="token string">'9'</span><span class="token punctuation">)</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token string">'-'</span><span class="token punctuation">)</span>
      f <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>ch <span class="token operator">>=</span> <span class="token string">'0'</span> <span class="token operator">&amp;&amp;</span> ch <span class="token operator">&lt;=</span> <span class="token string">'9'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">=</span> <span class="token punctuation">(</span>res <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>res <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> ch <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">;</span>
    ch <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> f <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> res <span class="token operator">:</span> <span class="token operator">-</span>res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

int n<span class="token punctuation">,</span> m<span class="token punctuation">;</span>
int lmax<span class="token punctuation">[</span><span class="token constant">N</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rmax<span class="token punctuation">[</span><span class="token constant">N</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> maxn<span class="token punctuation">[</span><span class="token constant">N</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> lzy<span class="token punctuation">[</span><span class="token constant">N</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">int k<span class="token punctuation">,</span> int l<span class="token punctuation">,</span> int r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> r<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    lmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> rmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> maxn<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  int mid <span class="token operator">=</span> l <span class="token operator">+</span> r <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token function">build</span><span class="token punctuation">(</span>lc<span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">build</span><span class="token punctuation">(</span>rc<span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>
  lmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> rmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> maxn<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">pushdown</span><span class="token punctuation">(</span><span class="token parameter">int k<span class="token punctuation">,</span> int l<span class="token punctuation">,</span> int r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  int mid <span class="token operator">=</span> l <span class="token operator">+</span> r <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>maxn<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    lmax<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">=</span> rmax<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">=</span> maxn<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    lmax<span class="token punctuation">[</span>rc<span class="token punctuation">]</span> <span class="token operator">=</span> rmax<span class="token punctuation">[</span>rc<span class="token punctuation">]</span> <span class="token operator">=</span> maxn<span class="token punctuation">[</span>rc<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    lmax<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">=</span> rmax<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">=</span> maxn<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">=</span> mid <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    lmax<span class="token punctuation">[</span>rc<span class="token punctuation">]</span> <span class="token operator">=</span> rmax<span class="token punctuation">[</span>rc<span class="token punctuation">]</span> <span class="token operator">=</span> maxn<span class="token punctuation">[</span>rc<span class="token punctuation">]</span> <span class="token operator">=</span> r <span class="token operator">-</span> mid<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  lzy<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  lzy<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">=</span> lzy<span class="token punctuation">[</span>rc<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
int <span class="token function">query</span><span class="token punctuation">(</span><span class="token parameter">int k<span class="token punctuation">,</span> int l<span class="token punctuation">,</span> int r<span class="token punctuation">,</span>int x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> r<span class="token punctuation">)</span><span class="token keyword control-flow">return</span> l<span class="token punctuation">;</span>
  int mid <span class="token operator">=</span> l <span class="token operator">+</span> r <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>lzy<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">pushdown</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//首先下放懒标签</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>lmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">>=</span> x<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> l<span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>maxn<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">>=</span> x<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> <span class="token function">query</span><span class="token punctuation">(</span>lc<span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>rmax<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">+</span> lmax<span class="token punctuation">[</span>rc<span class="token punctuation">]</span> <span class="token operator">>=</span> x<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> mid <span class="token operator">-</span> rmax<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token function">query</span><span class="token punctuation">(</span>rc<span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">pushup</span><span class="token punctuation">(</span><span class="token parameter">int k<span class="token punctuation">,</span> int l<span class="token punctuation">,</span> int r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  int mid <span class="token operator">=</span> l <span class="token operator">+</span> r <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>lmax<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">!=</span> mid <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> lmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> lmax<span class="token punctuation">[</span>lc<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">else</span> lmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> lmax<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">+</span> lmax<span class="token punctuation">[</span>rc<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>rmax<span class="token punctuation">[</span>rc<span class="token punctuation">]</span> <span class="token operator">!=</span> r <span class="token operator">-</span> mid<span class="token punctuation">)</span> rmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> rmax<span class="token punctuation">[</span>rc<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">else</span> rmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> rmax<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">+</span> rmax<span class="token punctuation">[</span>rc<span class="token punctuation">]</span><span class="token punctuation">;</span>
  maxn<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>lmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> rmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  maxn<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>maxn<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> rmax<span class="token punctuation">[</span>lc<span class="token punctuation">]</span> <span class="token operator">+</span> lmax<span class="token punctuation">[</span>rc<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  maxn<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>maxn<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> maxn<span class="token punctuation">[</span>lc<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  maxn<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>maxn<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> maxn<span class="token punctuation">[</span>rc<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">modify</span><span class="token punctuation">(</span><span class="token parameter">int k<span class="token punctuation">,</span> int l<span class="token punctuation">,</span> int r<span class="token punctuation">,</span> int x<span class="token punctuation">,</span> int y<span class="token punctuation">,</span> int v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//v==1-->be used</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;=</span> l <span class="token operator">&amp;&amp;</span> r <span class="token operator">&lt;=</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> rmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> maxn<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
      lzy<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
      lmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> rmax<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> maxn<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      lzy<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>lzy<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">pushdown</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>
  int mid <span class="token operator">=</span> l <span class="token operator">+</span> r <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span><span class="token function">modify</span><span class="token punctuation">(</span>lc<span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>y <span class="token operator">></span> mid<span class="token punctuation">)</span> <span class="token function">modify</span><span class="token punctuation">(</span>rc<span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">pushup</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
int <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">void</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  n <span class="token operator">=</span> <span class="token keyword">in</span><span class="token punctuation">;</span> m <span class="token operator">=</span> <span class="token keyword">in</span><span class="token punctuation">;</span>
  int i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> k<span class="token punctuation">,</span> ty<span class="token punctuation">,</span> x<span class="token punctuation">,</span> d<span class="token punctuation">;</span>
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ty <span class="token operator">=</span> <span class="token keyword">in</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>ty <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      d <span class="token operator">=</span> <span class="token keyword">in</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>maxn<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> d<span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"0\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在这里处理查询失败</span>
      <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
        int pos <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">modify</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> pos <span class="token operator">+</span> d <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1-->be used</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
      x <span class="token operator">=</span> <span class="token keyword">in</span><span class="token punctuation">;</span> d <span class="token operator">=</span> <span class="token keyword">in</span><span class="token punctuation">;</span>
      <span class="token function">modify</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> x<span class="token punctuation">,</span> x <span class="token operator">+</span> d <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block></article><footer></footer></body></html>